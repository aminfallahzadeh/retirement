import{c as Sn,j as e,v as zs,r as o,w as un,x as Cs,d as cs,y as ys,z,A as f,n as Ce,S as Hs,t as d,q as oe,D as Is,F as Ds,B as Se,I as te,C as De,T as fe,P as vs,H as Ss,J as Bs,K as _s,M as ks,N as Ps,Q as Zs,U as Re,V as dn,W as mn,X as hn,m as Xs,Y as js,L as Bn,E as xn,Z as Vs,_ as _n,$ as Qs,a0 as en,u as kn,a1 as Pn,a2 as On,a3 as cn,a4 as X,a5 as Mn,a6 as be,a7 as Fn,a8 as Ln,a9 as Rn,aa as Tn,ab as Ne,ac as An,ad as fs,ae as En,af as Un,ag as qn,ah as wn,ai as $n,aj as zn,ak as Hn,al as Yn,am as Kn,an as Gn,ao as Wn,ap as Vn,aq as Qn,ar as Jn,as as Zn,at as Xn,au as ea,av as sa,aw as na,ax as aa,ay as ta,az as oa,aA as la,aB as ra,aC as ia,aD as ca,aE as pa,aF as ua,aG as da,aH as ma,aI as ha,aJ as xa,aK as ga,aL as sn,aM as nn,aN as an,R as ja,aO as Js,aP as Na,a as fa,G as ya,e as gn,aQ as Ia,aR as ba,aS as Ca,aT as Da,aU as va,aV as Sa,aW as Ba,aX as _a,aY as ka,aZ as Pa,a_ as Oa,a$ as Ma,b0 as Fa,b1 as La,b2 as Ra,b3 as Ta,b4 as Aa,b5 as Ea,b6 as Ua,b7 as qa,b8 as wa,b9 as $a,ba as za,bb as Ha,bc as Ts,bd as Ya,be as Ka,bf as Ga,bg as Wa,bh as Va}from"./index-uMYFPxiZ.js";import{u as Qa,a as Ja,c as Za,F as Xa}from"./createTree-DYcO6tmT.js";import{T as et}from"./Title-BrzVKEUv.js";/* empty css                 */import{M as is}from"./Modal-bRk4cV2m.js";import{u as Ys,a as Os,b as J,c as st}from"./useFetchLookUpData-DUAHxbgt.js";import{u as Ms,m as ce,C as pe,d as he,a as me}from"./datePicker-De28OKQJ.js";import{i as Ks,S as W}from"./react-select-animated.esm-C8VyYNjL.js";import{o as V,s as j,a as Q}from"./reactSelect-BGq5yAQc.js";import{d as Fs}from"./table-options-yNTnUMGK.js";import{R as Ls}from"./Refresh-BACz30Wa.js";import{S as Gs}from"./index-aSTbZmc0.js";import{E as Rs}from"./EditOutlined-CpCsMuAN.js";import{D as jn}from"./DeleteOutline-I1q4SJ59.js";import{A as Nn}from"./Add-BX80d1Pb.js";import{R as nt}from"./RetiredStatementsGrid-C04BQlf9.js";import{u as tn}from"./sharedApi-BUKHe_o2.js";import{b as at}from"./requestApi-D5ZfTC-b.js";import{u as tt,S as ot}from"./SlipFormTemplate-BWh2JxMc.js";import{c as ye,S as Ie}from"./SelectInput-BmpqqcCa.js";import{T as pn}from"./TextArea-B5yatLE0.js";import{A as As,a as Es,b as Us,c as qs}from"./ArrowDropDown-D1HbTMwU.js";import{T as lt,a as rt,b as ws}from"./TabPanel-B2X-ZXwn.js";import"./index-DtxsoJRD.js";import"./InfoOutlined-CK5l1LIN.js";import"./statementApi-B9fIOO0d.js";import"./module-BL1YM4C-.js";import"./excel-icon-Dq0N6FeV.js";const on=Sn(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"DoneOutlined"),it=()=>{const[l]=zs(),[m,y]=o.useState([]),[B,D]=o.useState([]),x=l.get("personID"),{data:R,isLoading:p,isSuccess:L,refetch:h}=Qa(),{data:A,isLoading:S,isSuccess:E,refetch:P}=Ja(x);o.useEffect(()=>{E&&D(A.itemList)},[E,A]),o.useEffect(()=>{if(L){const $=Za(R.itemList);y($)}},[L,R]);const w=o.useCallback(()=>{h(),P()},[h,P]);return e.jsx(Xa,{structure:m,files:B,isLoading:p||S,refetch:w,access:"files"})},ct=un.injectEndpoints({endpoints:l=>({getRelatedListByParentPersonID:l.query({query:m=>({url:`${Cs}/GetRelatedListByParentPersonID?parentPersonID=${m}`})}),getRelated:l.query({query:m=>({url:`${Cs}/GetRelated?personID=${m}`})}),insertRelated:l.mutation({query:m=>({url:`${Cs}/InsertRelated`,method:"POST",body:m})}),updateRelated:l.mutation({query:m=>({url:`${Cs}/UpdateRelated`,method:"POST",body:m})}),removeRelated:l.mutation({query:({pensionaryID:m})=>({url:`${Cs}/RemoveRelated?pensionaryID=${m}`,method:"POST"})})})}),{useGetRelatedListByParentPersonIDQuery:pt,useGetRelatedQuery:ut,useInsertRelatedMutation:dt,useUpdateRelatedMutation:mt,useRemoveRelatedMutation:ht}=ct;function xt({setShowCreateRelatedModal:l,refetch:m}){const y=o.useRef(null),B=o.useRef(null),D=o.useRef(null),x=o.useRef(null),R=o.useRef(null),[p,L]=o.useState(null),[h,A]=o.useState(null),[S,E]=o.useState(null),[P,w]=o.useState(null),[$,H]=o.useState(null),[ee,c]=o.useState(!1),[F,O]=o.useState(!1),[Y,n]=o.useState(!1),[u,T]=o.useState(!1),[U,ne]=o.useState(!1),{handleSubmit:se,formState:{errors:s},control:Z,register:_,watch:i}=cs(),t=i(),[r,{isLoading:C}]=dt(),K=ys(),G=new URLSearchParams(K.search).get("personID"),le=Ks(),{relationships:ue,relationshipIsLoading:ns,relationshipIsFetching:de}=Ys(),{pensionaryStatus:ae,pensionaryStatusIsLoading:ie,pensionaryStatusIsFetching:Te}=Os({pensionaryStatusCategory:"L"}),{lookUpItems:as,lookUpItemsIsLoading:Pe,lookUpItemsIsFetching:re}=J({lookUpType:"MaritialStatus"}),{lookUpItems:Be,lookUpItemsIsLoading:Ae,lookUpItemsIsFetching:ts}=J({lookUpType:"EducationType"}),{lookUpItems:os,lookUpItemsIsLoading:Ee,lookUpItemsIsFetching:xe}=J({lookUpType:"UniversityType"}),{lookUpItems:ls,lookUpItemsIsLoading:Ue,lookUpItemsIsFetching:qe}=J({lookUpType:"Country"}),{lookUpItems:we,lookUpItemsIsLoading:$e,lookUpItemsIsFetching:ze}=J({lookUpType:"State"}),{lookUpItems:He,lookUpItemsIsLoading:Ye,lookUpItemsIsFetching:Ke}=J({lookUpType:"City"}),Oe=V(ue,"relationshipID","relationshipName"),Ge=V(ae,"pensionaryStatusID","pensionaryStatusName"),We=V(as,"lookUpID","lookUpName"),Ve=V(Be,"lookUpID","lookUpName"),Qe=V(os,"lookUpID","lookUpName"),Je=V(ls,"lookUpID","lookUpName"),Ze=V(we,"lookUpID","lookUpName"),Me=V(He,"lookUpID","lookUpName"),rs=M=>{L(M),O(!1)},q=M=>{A(M),n(!1)},N=M=>{E(M),T(!1)},ge=M=>{w(M),ne(!1)},je=M=>{H(M),c(!1)},Xe=M=>{O(M)},ps=M=>{n(M)},Fe=M=>{c(M)},us=M=>{T(M)},ds=M=>{ne(M)},ms=async()=>{var M;try{let I,ve,_e,Le,v;p?(I=new Date(p),I.setMinutes(I.getMinutes()-I.getTimezoneOffset())):I=null,$?(v=new Date($),v.setMinutes(v.getMinutes()-v.getTimezoneOffset())):v=null,h?(ve=new Date(h),ve.setMinutes(ve.getMinutes()-ve.getTimezoneOffset())):ve=null,S?(_e=new Date(S),_e.setMinutes(_e.getMinutes()-_e.getTimezoneOffset())):_e=null,P?(Le=new Date(P),Le.setMinutes(Le.getMinutes()-Le.getTimezoneOffset())):Le=null;const g=await r({...t,parentPersonID:G,relationshipWithParentID:d(t.relationshipWithParentID),personCertificateNo:d(t.personCertificateNo),personNationalCode:d(t.personNationalCode),pensionaryStatusID:d(t.pensionaryStatusID),maritalStatusID:d(t.maritalStatusID),educationTypeID:d(t.educationTypeID),universityID:d(t.universityID),personPhone:d(t.personPhone),personCellPhone:d(t.personCellPhone),personCellPhone2:d(t.personCellPhone2),personRegion:parseInt(d(t.personRegion))||null,personArea:parseInt(d(t.personArea))||null,personCountryID:d(t.personCountryID),personCityID:d(t.personCityID),personStateID:d(t.personStateID),personPostalCode:d(t.personPostalCode),backupPhone:d(t.backupPhone),backupCellphone:d(t.backupCellphone),personBirthDate:I,personMaritalDate:ve,selfEmployeeStartDate:_e,selfEmployeeEndDate:Le,pensionaryStartDate:v}).unwrap();l(!1),m(),oe.success(g.message,{autoClose:2e3})}catch(I){console.log(I),oe.error(((M=I==null?void 0:I.data)==null?void 0:M.message)||I.error,{autoClose:2e3})}};return Ms([y,B,D,x,R],[O,n,T,ne,c]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:se(ms),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"relationshipWithParentID",control:Z,rules:{required:!0},render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Oe,onChange:I=>M(I?I.value:null),value:Oe.find(I=>I.value===(t==null?void 0:t.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:ns||de})}),e.jsxs("label",{className:t!=null&&t.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),s.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personFirstName&&e.jsx("span",{className:"error-form",children:s.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,..._("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personLastName&&e.jsx("span",{className:"error-form",children:s.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,..._("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personNationalCode&&e.jsx("span",{className:"error-form",children:s.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(t==null?void 0:t.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,..._("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personCertificateNo&&e.jsx("span",{className:"error-form",children:s.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(t==null?void 0:t.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,..._("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personFatherName&&e.jsx("span",{className:"error-form",children:s.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,..._("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:p,onChange:rs,format:"jYYYY/jMM/jDD",onOpenChange:Xe,suffixIcon:e.jsx(pe,{color:"action"}),open:F,style:he,wrapperStyle:me,pickerProps:{ref:y}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:h,onChange:q,format:"jYYYY/jMM/jDD",onOpenChange:ps,suffixIcon:e.jsx(pe,{color:"action"}),open:Y,style:he,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personBirthPlace&&e.jsx("span",{className:"error-form",children:s.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,..._("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"pensionaryStatusID",control:Z,rules:{required:!0},render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Ge,onChange:I=>M(I?I.value:null),value:Ge.find(I=>I.value===(t==null?void 0:t.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:ie||Te})}),e.jsxs("label",{className:t!=null&&t.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),s.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:$,defaultValue:null,onChange:je,onOpenChange:Fe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(pe,{color:"action"}),open:ee,style:he,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"maritalStatusID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:We,onChange:I=>M(I?I.value:null),value:We.find(I=>I.value===(t==null?void 0:t.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Pe||re})}),e.jsx("label",{className:t!=null&&t.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"educationTypeID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Ve,onChange:I=>M(I?I.value:null),value:Ve.find(I=>I.value===(t==null?void 0:t.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ae||ts})}),e.jsx("label",{className:t!=null&&t.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.educationTypeCaption&&e.jsx("span",{className:"error-form",children:s.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,..._("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"universityID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Qe,onChange:I=>M(I?I.value:null),value:Qe.find(I=>I.value===(t==null?void 0:t.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ee||xe})}),e.jsx("label",{className:t!=null&&t.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.universityCaption&&e.jsx("span",{className:"error-form",children:s.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,..._("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personCellPhone&&e.jsx("span",{className:"error-form",children:s.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:(t==null?void 0:t.personCellPhone)||"",id:"personCellPhone1",required:!0,..._("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personCellPhone2&&e.jsx("span",{className:"error-form",children:s.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:(t==null?void 0:t.personCellPhone2)||"",id:"personCellPhone22",required:!0,..._("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personPhone&&e.jsx("span",{className:"error-form",children:s.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:(t==null?void 0:t.personPhone)||"",id:"personPhone1",required:!0,..._("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personRegion&&e.jsx("span",{className:"error-form",children:s.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:(t==null?void 0:t.personRegion)||"",id:"personRegion1",required:!0,..._("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personArea&&e.jsx("span",{className:"error-form",children:s.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:(t==null?void 0:t.personArea)||"",id:"personArea1",required:!0,..._("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCountryID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Je,onChange:I=>M(I?I.value:null),value:Je.find(I=>I.value===(t==null?void 0:t.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ue||qe})}),e.jsx("label",{className:t!=null&&t.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personStateID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Ze,onChange:I=>M(I?I.value:null),value:Ze.find(I=>I.value===(t==null?void 0:t.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:$e||ze})}),e.jsx("label",{className:t!=null&&t.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCityID",control:Z,render:({field:{onChange:M}})=>e.jsx(W,{closeMenuOnSelect:!0,components:le,options:Me,onChange:I=>M(I?I.value:null),value:Me.find(I=>I.value===(t==null?void 0:t.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ye||Ke})}),e.jsx("label",{className:t!=null&&t.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personPostalCode&&e.jsx("span",{className:"error-form",children:s.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:(t==null?void 0:t.personPostalCode)??"",id:"personPostalCode1",required:!0,..._("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.personSpecialDisease&&e.jsx("span",{className:"error-form",children:s.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(t==null?void 0:t.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,..._("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[s.personAddress&&e.jsx("span",{className:"error-form",children:s.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(t==null?void 0:t.personAddress)||"",id:"personAddress1",required:!0,..._("personAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[s.personDescription&&e.jsx("span",{className:"error-form",children:s.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",required:!0,name:"personDescription",value:(t==null?void 0:t.personDescription)||"",id:"personDescription1",..._("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[s.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:s.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(t==null?void 0:t.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,..._("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:S,onChange:N,format:"jYYYY/jMM/jDD",onOpenChange:us,suffixIcon:e.jsx(pe,{color:"action"}),open:u,style:he,wrapperStyle:me,pickerProps:{ref:D}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:P,onChange:ge,format:"jYYYY/jMM/jDD",onOpenChange:ds,suffixIcon:e.jsx(pe,{color:"action"}),open:U,wrapperStyle:me,pickerProps:{ref:x}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[s.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:s.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(t==null?void 0:t.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,..._("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[s.backupFirstName&&e.jsx("span",{className:"error-form",children:s.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(t==null?void 0:t.backupFirstName)||"",id:"backupFirstName1",required:!0,..._("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.backupLastName&&e.jsx("span",{className:"error-form",children:s.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(t==null?void 0:t.backupLastName)||"",id:"backupLastName1",required:!0,..._("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.backupRelation&&e.jsx("span",{className:"error-form",children:s.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(t==null?void 0:t.backupRelation)||"",id:"backupRelation",required:!0,..._("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.backupPhone&&e.jsx("span",{className:"error-form",children:s.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:(t==null?void 0:t.backupPhone)||"",id:"backupPhone",required:!0,..._("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[s.backupCellphone&&e.jsx("span",{className:"error-form",children:s.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:(t==null?void 0:t.backupCellphone)||"",id:"backupCellphone",required:!0,..._("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[s.backupAddress&&e.jsx("span",{className:"error-form",children:s.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(t==null?void 0:t.backupAddress)||"",id:"backupAddress",required:!0,..._("backupAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Hs,{}),onClick:se,loading:C,type:"submit",variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function fn({statusHistoryTableData:l,isLoading:m,isFetching:y,handleRefresh:B}){const[D,x]=o.useState({pageIndex:0,pageSize:3}),R=o.useMemo(()=>[{accessorKey:"pensionaryStatusRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:h})=>e.jsx("div",{children:f(h)})},{accessorKey:"pensionaryStatusName",header:"وضعیت",size:20,Cell:({renderedCellValue:h})=>e.jsx("div",{children:f(h)})},{accessorKey:"pensionaryStartdate",header:"تاریخ شروع",size:20,Cell:({renderedCellValue:h})=>e.jsx("div",{children:Is(h)})},{accessorKey:"isActive",header:"وضعیت",size:20,Cell:({renderedCellValue:h})=>e.jsx("div",{children:h===!0?"فعال":"غیرفعال"})}],[]),p=Ds({...Fs,columns:R,data:l,muiTopToolbarProps:{sx:{overflow:"none"}},muiTableBodyRowProps:({row:h})=>({sx:{color:h.original.isActive?"#087a30":"","& td":{color:h.original.isActive?"#087a30":""}}}),muiTableHeadProps:{sx:{zIndex:0}},renderTopToolbarCustomActions:()=>e.jsx(Se,{children:m||y?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"info",onClick:B,children:e.jsx(Ls,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:h=>e.jsx(vs,{...h,page:f(h.page),slots:{previous:Ss,next:Bs,first:_s,last:ks}})},initialState:{density:"compact",sorting:[{id:"isActive",desc:!0}]},onPaginationChange:x,state:{pagination:D}});return e.jsx(Ps,{table:p})}function gt({setShowEditRelatedModal:l,personID:m,refetch:y}){const B=o.useRef(null),D=o.useRef(null),x=o.useRef(null),R=o.useRef(null),p=o.useRef(null),[L,h]=o.useState(null),[A,S]=o.useState(null),[E,P]=o.useState(null),[w,$]=o.useState(null),[H,ee]=o.useState(null),[c,F]=o.useState(!1),[O,Y]=o.useState(!1),[n,u]=o.useState(!1),[T,U]=o.useState(!1),[ne,se]=o.useState(!1),[s,Z]=o.useState([]),{handleSubmit:_,formState:{errors:i},control:t,register:r,watch:C,setValue:K}=cs(),a=C(),[G,{isLoading:le}]=mt(),ue=Ks(),de=new URLSearchParams(location.search).get("personID"),{data:ae,isSuccess:ie,isLoading:Te,isFetching:as,refetch:Pe,error:re}=Zs(m),{data:Be,isSuccess:Ae,isFetching:ts,isLoading:os,refetch:Ee,error:xe}=ut(m);o.useEffect(()=>{if(Pe(),ie){const k=ae==null?void 0:ae.itemList.map((b,ss)=>({id:b.pensionaryID,pensionaryStatusRowNum:ss+1,isActive:b.pensionaryIsActive,pensionaryStatusName:b.pensionaryStatusName||"-",pensionaryStartdate:Re(b.pensionaryStartdate)||"-"}));Z(k)}return()=>{Z([])}},[Pe,ie,ae]),o.useEffect(()=>{Ee(),Ae&&Object.keys(Be).forEach(k=>{K(k,Be[k])})},[Ae,Be,Ee,K]),o.useEffect(()=>{var k;xe&&xe.status!=="FETCH_ERROR"&&oe.error(((k=xe==null?void 0:xe.data)==null?void 0:k.message)||xe.error,{autoClose:2e3})},[xe]),o.useEffect(()=>{var k;re&&(console.log(re),oe.error(((k=re==null?void 0:re.data)==null?void 0:k.message)||re.error,{autoClose:2e3}))},[re]);const{relationships:ls,relationshipIsLoading:Ue,relationshipIsFetching:qe}=Ys(),{pensionaryStatus:we,pensionaryStatusIsLoading:$e,pensionaryStatusIsFetching:ze}=Os({pensionaryStatusCategory:"L"}),{lookUpItems:He,lookUpItemsIsLoading:Ye,lookUpItemsIsFetching:Ke}=J({lookUpType:"MaritialStatus"}),{lookUpItems:Oe,lookUpItemsIsLoading:Ge,lookUpItemsIsFetching:We}=J({lookUpType:"EducationType"}),{lookUpItems:Ve,lookUpItemsIsLoading:Qe,lookUpItemsIsFetching:Je}=J({lookUpType:"UniversityType"}),{lookUpItems:Ze,lookUpItemsIsLoading:Me,lookUpItemsIsFetching:rs}=J({lookUpType:"Country"}),{lookUpItems:q,lookUpItemsIsLoading:N,lookUpItemsIsFetching:ge}=J({lookUpType:"State"}),{lookUpItems:je,lookUpItemsIsLoading:Xe,lookUpItemsIsFetching:ps}=J({lookUpType:"City"}),Fe=V(ls,"relationshipID","relationshipName"),us=V(we,"pensionaryStatusID","pensionaryStatusName"),ds=V(He,"lookUpID","lookUpName"),ms=V(Oe,"lookUpID","lookUpName"),bs=V(Ve,"lookUpID","lookUpName"),M=V(Ze,"lookUpID","lookUpName"),I=V(q,"lookUpID","lookUpName"),ve=V(je,"lookUpID","lookUpName"),_e=k=>{h(k),F(!1)},Le=k=>{S(k),Y(!1)},v=k=>{P(k),u(!1)},g=k=>{$(k),U(!1)},ke=k=>{ee(k),se(!1)},es=k=>{se(k)},Ws=k=>{F(k)},In=k=>{Y(k)},bn=k=>{u(k)},Cn=k=>{U(k)};o.useEffect(()=>{h(Re(a==null?void 0:a.personBirthDate))},[a==null?void 0:a.personBirthDate]),o.useEffect(()=>{S(Re(a==null?void 0:a.personMaritalDate))},[a==null?void 0:a.personMaritalDate]),o.useEffect(()=>{P(Re(a==null?void 0:a.selfEmployeeStartDate))},[a==null?void 0:a.selfEmployeeStartDate]),o.useEffect(()=>{$(Re(a==null?void 0:a.selfEmployeeEndDate))},[a==null?void 0:a.selfEmployeeEndDate]);const Dn=()=>{Pe()},vn=async()=>{var k;try{let b,ss,hs,xs,gs;L?(b=new Date(L),b.setMinutes(b.getMinutes()-b.getTimezoneOffset())):b=null,H?(gs=new Date(H),gs.setMinutes(gs.getMinutes()-gs.getTimezoneOffset())):gs=null,A?(ss=new Date(A),ss.setMinutes(ss.getMinutes()-ss.getTimezoneOffset())):ss=null,E?(hs=new Date(E),hs.setMinutes(hs.getMinutes()-hs.getTimezoneOffset())):hs=null,w?(xs=new Date(w),xs.setMinutes(xs.getMinutes()-xs.getTimezoneOffset())):xs=null;const rn=await G({...a,parentPersonID:de,relationshipWithParentID:d(a.relationshipWithParentID),personCertificateNo:d(a.personCertificateNo),personNationalCode:d(a.personNationalCode),pensionaryStatusID:d(a.pensionaryStatusID),maritalStatusID:d(a.maritalStatusID),educationTypeID:d(a.educationTypeID),universityID:d(a.universityID),personPhone:d(a.personPhone),personCellPhone:d(a.personCellPhone),personCellPhone2:d(a.personCellPhone2),personRegion:parseInt(d(a.personRegion))||null,personArea:parseInt(d(a.personArea))||null,personCountryID:d(a.personCountryID),personCityID:d(a.personCityID),personStateID:d(a.personStateID),personPostalCode:d(a.personPostalCode),backupPhone:d(a.backupPhone),backupCellphone:d(a.backupCellphone),personBirthDate:b,personMaritalDate:ss,selfEmployeeStartDate:hs,selfEmployeeEndDate:xs,pensionaryStartDate:gs}).unwrap();console.log(rn),l(!1),y(),oe.success(rn.message,{autoClose:2e3})}catch(b){console.log(b),oe.error(((k=b==null?void 0:b.data)==null?void 0:k.message)||b.error,{autoClose:2e3})}};return Ms([B,D,x,R,p],[F,Y,u,U,se]),e.jsx(e.Fragment,{children:os||ts?e.jsx(Se,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(De,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:_(vn),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"relationshipWithParentID",control:t,rules:{required:!0},render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:Fe,onChange:b=>k(b?b.value:null),value:Fe.find(b=>b.value===(a==null?void 0:a.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ue||qe})}),e.jsxs("label",{className:a!=null&&a.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),i.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFirstName&&e.jsx("span",{className:"error-form",children:i.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFirstName)||"",name:"personFirstName",id:"personFirstName2",required:!0,...r("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName2",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personLastName&&e.jsx("span",{className:"error-form",children:i.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...r("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personNationalCode&&e.jsx("span",{className:"error-form",children:i.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(a==null?void 0:a.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...r("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCertificateNo&&e.jsx("span",{className:"error-form",children:i.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(a==null?void 0:a.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...r("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFatherName&&e.jsx("span",{className:"error-form",children:i.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...r("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:Re(L),onChange:_e,format:"jYYYY/jMM/jDD",onOpenChange:Ws,suffixIcon:e.jsx(pe,{color:"action"}),open:c,style:he,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:A,onChange:Le,format:"jYYYY/jMM/jDD",onOpenChange:In,suffixIcon:e.jsx(pe,{color:"action"}),open:O,style:he,wrapperStyle:me,pickerProps:{ref:D}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personBirthPlace&&e.jsx("span",{className:"error-form",children:i.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...r("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"pensionaryStatusID",control:t,rules:{required:!0},render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:us,onChange:b=>k(b?b.value:null),value:us.find(b=>b.value===(a==null?void 0:a.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:$e||ze})}),e.jsxs("label",{className:a!=null&&a.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),i.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:H,defaultValue:null,onChange:ke,onOpenChange:es,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(pe,{color:"action"}),open:ne,style:he,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"maritalStatusID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:ds,onChange:b=>k(b?b.value:null),value:ds.find(b=>b.value===(a==null?void 0:a.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ye||Ke})}),e.jsx("label",{className:a!=null&&a.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"educationTypeID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:ms,onChange:b=>k(b?b.value:null),value:ms.find(b=>b.value===(a==null?void 0:a.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ge||We})}),e.jsx("label",{className:a!=null&&a.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.educationTypeCaption&&e.jsx("span",{className:"error-form",children:i.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...r("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"universityID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:bs,onChange:b=>k(b?b.value:null),value:bs.find(b=>b.value===(a==null?void 0:a.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Qe||Je})}),e.jsx("label",{className:a!=null&&a.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.universityCaption&&e.jsx("span",{className:"error-form",children:i.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...r("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCellPhone&&e.jsx("span",{className:"error-form",children:i.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:f(a==null?void 0:a.personCellPhone)??"",id:"personCellPhone1",required:!0,...r("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCellPhone2&&e.jsx("span",{className:"error-form",children:i.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:f(a==null?void 0:a.personCellPhone2)??"",id:"personCellPhone22",required:!0,...r("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPhone&&e.jsx("span",{className:"error-form",children:i.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:f(a==null?void 0:a.personPhone)||"",id:"personPhone1",required:!0,...r("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personRegion&&e.jsx("span",{className:"error-form",children:i.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:f(a==null?void 0:a.personRegion)??"",id:"personRegion1",required:!0,...r("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personArea&&e.jsx("span",{className:"error-form",children:i.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:f(a==null?void 0:a.personArea)??"",id:"personArea1",required:!0,...r("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCountryID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:M,onChange:b=>k(b?b.value:null),value:M.find(b=>b.value===(a==null?void 0:a.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Me||rs})}),e.jsx("label",{className:a!=null&&a.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personStateID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:I,onChange:b=>k(b?b.value:null),value:I.find(b=>b.value===(a==null?void 0:a.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:N||ge})}),e.jsx("label",{className:a!=null&&a.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCityID",control:t,render:({field:{onChange:k}})=>e.jsx(W,{closeMenuOnSelect:!0,components:ue,options:ve,onChange:b=>k(b?b.value:null),value:ve.find(b=>b.value===(a==null?void 0:a.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Xe||ps})}),e.jsx("label",{className:a!=null&&a.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPostalCode&&e.jsx("span",{className:"error-form",children:i.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:f(a==null?void 0:a.personPostalCode)??"",id:"personPostalCode1",required:!0,...r("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personSpecialDisease&&e.jsx("span",{className:"error-form",children:i.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(a==null?void 0:a.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...r("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[i.personAddress&&e.jsx("span",{className:"error-form",children:i.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(a==null?void 0:a.personAddress)||"",id:"personAddress1",required:!0,...r("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[i.personDescription&&e.jsx("span",{className:"error-form",children:i.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"personDescription",value:(a==null?void 0:a.personDescription)||"",id:"personDescription1",required:!0,...r("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(fn,{statusHistoryTableData:s,isLoading:Te,isFetching:as,handleRefresh:Dn}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[i.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:i.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(a==null?void 0:a.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...r("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:E,onChange:v,format:"jYYYY/jMM/jDD",onOpenChange:bn,suffixIcon:e.jsx(pe,{color:"action"}),open:n,style:he,wrapperStyle:me,pickerProps:{ref:x}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:w,onChange:g,format:"jYYYY/jMM/jDD",onOpenChange:Cn,suffixIcon:e.jsx(pe,{color:"action"}),open:T,style:he,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[i.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:i.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(a==null?void 0:a.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...r("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[i.backupFirstName&&e.jsx("span",{className:"error-form",children:i.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(a==null?void 0:a.backupFirstName)||"",id:"backupFirstName1",required:!0,...r("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.backupLastName&&e.jsx("span",{className:"error-form",children:i.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(a==null?void 0:a.backupLastName)||"",id:"backupLastName1",required:!0,...r("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.backupRelation&&e.jsx("span",{className:"error-form",children:i.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(a==null?void 0:a.backupRelation)||"",id:"backupRelation",required:!0,...r("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.backupPhone&&e.jsx("span",{className:"error-form",children:i.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:f(a==null?void 0:a.backupPhone)??"",id:"backupPhone",required:!0,...r("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.backupCellphone&&e.jsx("span",{className:"error-form",children:i.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:f(a==null?void 0:a.backupCellphone)??"",id:"backupCellphone",required:!0,...r("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[i.backupAddress&&e.jsx("span",{className:"error-form",children:i.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(a==null?void 0:a.backupAddress)||"",id:"backupAddress",required:!0,...r("backupAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Hs,{}),variant:"contained",onClick:_,type:"submit",loading:le,color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function jt(){const[l,m]=o.useState({}),[y,B]=o.useState([]),[D,x]=o.useState(!1),[R,p]=o.useState(!1),[L,h]=o.useState(!1),[A,S]=o.useState(""),[E,P]=o.useState(""),[w,{isLoading:$}]=ht(),H=ys(),c=new URLSearchParams(H.search).get("personID"),{data:F,isSuccess:O,isLoading:Y,isFetching:n,refetch:u,error:T}=pt(c);o.useEffect(()=>{if(u(),O){const r=F.itemList.map((C,K)=>({id:C.personID,relatedRowNum:K+1,pensionaryID:C.pensionaryID,relatedBirthDate:C.personBirthDate,relatedNtionalCode:C.personNationalCode,relatedFirstName:C.personFirstName,relatedLastName:C.personLastName,relatedStatus:C.pensionaryIsUnderGauranteeText,relation:C.relationshipWithParentName}));B(r)}},[O,F,u]),o.useEffect(()=>{var r;T&&(console.log(T),oe.error(((r=T==null?void 0:T.data)==null?void 0:r.message)||T.error,{autoClose:2e3}))},[T]);const U=()=>{u()},ne=()=>{x(!0)},se=()=>{p(!0)},s=()=>{h(!0)},Z=async()=>{var r;try{const C=await w({pensionaryID:E}).unwrap();u(),h(!1),oe.success(C.message,{autoClose:2e3})}catch(C){console.log(C),oe.error(((r=C==null?void 0:C.data)==null?void 0:r.message)||C.error,{autoClose:2e3})}},_=o.useMemo(()=>[{accessorKey:"relatedRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(r)})},{accessorKey:"relatedNtionalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(r)})},{accessorKey:"relatedFirstName",header:"نام",size:20},{accessorKey:"relatedLastName",header:"نام خانوادگی",size:20},{accessorKey:"relatedStatus",header:"وضعیت",size:20},{accessorKey:"relatedBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(Is(r))})},{accessorKey:"relation",header:"نسبت",size:20},{accessorKey:"editRelatedAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`ویرایش "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(te,{color:"success",onClick:se,sx:{padding:"0"},children:e.jsx(Rs,{})})})},{accessorKey:"deleteRelatedAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`حذف "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(te,{color:"error",onClick:s,sx:{padding:"0"},children:e.jsx(jn,{})})})}],[]),i=Ds({...Fs,columns:_,data:y,muiTableBodyRowProps:({row:r})=>({onClick:()=>m(()=>({[r.id]:!0})),selected:l[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Se,{children:[n?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"info",onClick:U,children:e.jsx(Ls,{fontSize:"small"})})})}),n?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد وابسته"}),children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"success",onClick:ne,children:e.jsx(Nn,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(vs,{...r,page:f(r.page),slots:{previous:Ss,next:Bs,first:_s,last:ks}})},getRowId:r=>r.id,onRowSelectionChange:m,state:{rowSelection:l}});return o.useEffect(()=>{const r=Object.keys(i.getState().rowSelection)[0];if(r){const C=dn(y,r);S(r),P(C==null?void 0:C.pensionaryID)}},[i,l,y]),e.jsx(e.Fragment,{children:Y||n?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[D?e.jsx(is,{title:"ایجاد وابسته",closeModal:()=>x(!1),children:e.jsx(xt,{setShowCreateRelatedModal:x,refetch:u})}):R&&A?e.jsx(is,{title:"ویرایش اطلاعات وابسته",closeModal:()=>p(!1),children:e.jsx(gt,{setShowEditRelatedModal:p,personID:A,refetch:u})}):L?e.jsxs(is,{title:"حذف وابسته",closeModal:()=>h(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این وابسته اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(mn,{}),onClick:Z,loading:$,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(hn,{dir:"ltr",endIcon:e.jsx(Xs,{}),onClick:()=>h(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):null,e.jsx(Ps,{table:i})]})})}const Nt=un.injectEndpoints({endpoints:l=>({getHeirListByParentPersonID:l.query({query:m=>({url:`${js}/GetHeirListByParentPersonID?parentPersonID=${m}`})}),getHeir:l.query({query:m=>({url:`${js}/GetHeir?personID=${m}`})}),insertHeir:l.mutation({query:m=>({url:`${js}/InsertHeir`,method:"POST",body:m})}),updateHeir:l.mutation({query:m=>({url:`${js}/UpdateHeir`,method:"POST",body:m})}),updateHeirAccount:l.mutation({query:({token:m,data:y})=>({url:`${js}/UpdateHeirAccount`,method:"POST",body:y,headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`}})}),removeHeir:l.mutation({query:({pensionaryID:m})=>({url:`${js}/RemoveHeir?pensionaryID=${m}`,method:"POST"})})})}),{useGetHeirListByParentPersonIDQuery:ft,useLazyGetHeirListByParentPersonIDQuery:co,useGetHeirQuery:yt,useRemoveHeirMutation:It,useUpdateHeirMutation:bt,useInsertHeirMutation:Ct}=Nt;function Dt({setShowEditHeirModal:l,personID:m,refetch:y}){const B=o.useRef(null),D=o.useRef(null),x=o.useRef(null),[R,p]=o.useState([]),[L,h]=o.useState([]),[A,S]=o.useState(null),[E,P]=o.useState(!1);o.useState(null);const[w,$]=o.useState(null),[H,ee]=o.useState(null),[c,F]=o.useState(!1),[O,Y]=o.useState(!1),{handleSubmit:n,formState:{errors:u},control:T,register:U,watch:ne,setValue:se}=cs(),s=ne(),[Z,{isLoading:_}]=bt(),i=Ks(),r=new URLSearchParams(location.search).get("personID"),[C,{isLoading:K,isFetching:a}]=tn(),{data:G,isSuccess:le,isLoading:ue,isFetching:ns,refetch:de,error:ae}=Zs(m),{data:ie,isSuccess:Te,isLoading:as,isFetching:Pe,error:re,refetch:Be}=yt(m);o.useEffect(()=>{if(de(),le){const v=G==null?void 0:G.itemList.map((g,ke)=>({id:g.pensionaryID,isActive:g.pensionaryIsActive,pensionaryStatusRowNum:ke+1,pensionaryStatusName:g.pensionaryStatusName||"-",pensionaryStartdate:Re(g.pensionaryStartdate)||"-"}));h(v)}return()=>{h([])}},[de,le,G]),o.useEffect(()=>{Be(),Te&&Object.keys(ie).forEach(v=>{se(v,ie[v])})},[Te,ie,Be,se]),o.useEffect(()=>{var v;re&&re.status!=="FETCH_ERROR"&&oe.error(((v=re==null?void 0:re.data)==null?void 0:v.message)||re.error,{autoClose:2e3})},[re]),o.useEffect(()=>{var v;ae&&(console.log(ae),oe.error(((v=ae==null?void 0:ae.data)==null?void 0:v.message)||ae.error,{autoClose:2e3}))},[ae]);const{relationships:Ae,relationshipIsLoading:ts,relationshipIsFetching:os}=Ys(),{lookUpItems:Ee,lookUpItemsIsLoading:xe,lookUpItemsIsFetching:ls}=J({lookUpType:"MaritialStatus"}),{lookUpItems:Ue,lookUpItemsIsLoading:qe,lookUpItemsIsFetching:we}=J({lookUpType:"Country"}),{lookUpItems:$e,lookUpItemsIsLoading:ze,lookUpItemsIsFetching:He}=J({lookUpType:"State"}),{lookUpItems:Ye,lookUpItemsIsLoading:Ke,lookUpItemsIsFetching:Oe}=J({lookUpType:"City"}),{pensionaryStatus:Ge,pensionaryStatusIsLoading:We,pensionaryStatusIsFetching:Ve}=Os({pensionaryStatusCategory:"H"}),{lookUpItems:Qe,lookUpItemsIsLoading:Je,lookUpItemsIsFetching:Ze}=J({lookUpType:"Bank"}),Me=V(Ae,"relationshipID","relationshipName"),rs=V(Ee,"lookUpID","lookUpName"),q=V(Ue,"lookUpID","lookUpName"),N=V($e,"lookUpID","lookUpName"),ge=V(Ye,"lookUpID","lookUpName"),je=V(Ge,"pensionaryStatusID","pensionaryStatusName"),Xe=V(Qe,"lookUpID","lookUpName"),ps=V(R,"lookUpID","lookUpName"),Fe=o.useCallback(async v=>{try{const g=await C({lookUpType:"BankBranch",lookUpParentID:v}).unwrap();p(g.itemList)}catch(g){console.log(g)}},[C,p]);o.useEffect(()=>{s.bankID&&Fe(s.bankID)},[s.bankID,Fe]),o.useEffect(()=>{s.bankID&&Fe(s.bankID)},[s.bankID,Fe]);const us=v=>{S(v),P(!1)},ds=v=>{ee(v),F(!1)},ms=v=>{$(v),Y(!1)},bs=v=>{Y(v)},M=v=>{P(v)},I=v=>{F(v)};o.useEffect(()=>{S(Re(s==null?void 0:s.personBirthDate))},[s==null?void 0:s.personBirthDate]),o.useEffect(()=>{ee(Re(s==null?void 0:s.personBaseFinishDate))},[s==null?void 0:s.personBaseFinishDate]);const ve=()=>{de()},_e=async()=>{var v;try{let g,ke,es;A?(g=new Date(A),g.setMinutes(g.getMinutes()-g.getTimezoneOffset())):g=null,w?(ke=new Date(w),ke.setMinutes(ke.getMinutes()-ke.getTimezoneOffset())):ke=null,H?(es=new Date(H),es.setMinutes(es.getMinutes()-es.getTimezoneOffset())):es=null;const Ws=await Z({...s,relationshipWithParentID:d(s==null?void 0:s.relationshipWithParentID),personNationalCode:d(s==null?void 0:s.personNationalCode),personCertificateNo:d(s==null?void 0:s.personCertificateNo),personBirthDate:g,maritalStatusID:d(s==null?void 0:s.maritalStatusID),personPhone:d(s==null?void 0:s.personPhone),personCellPhone:d(s==null?void 0:s.personCellPhone),personRegion:parseInt(d(s==null?void 0:s.personRegion))||null,personArea:parseInt(d(s==null?void 0:s.personArea))||null,personCountryID:d(s==null?void 0:s.personCountryID),personStateID:d(s==null?void 0:s.personStateID),personCityID:d(s==null?void 0:s.personCityID),personPostalCode:d(s==null?void 0:s.personPostalCode),pensionaryStatusID:d(s==null?void 0:s.pensionaryStatusID),personBaseFinishDate:es,bankID:d(s==null?void 0:s.bankID),bankBranchID:d(s==null?void 0:s.bankBranchID),accountNo:d(s==null?void 0:s.accountNo),insuranceCoef:parseFloat(d(s==null?void 0:s.insuranceCoef))||0,insuranceAmount:parseFloat(d(s==null?void 0:s.insuranceAmount))||0,ledgerCode:parseInt(d(s.ledgerCode))||0,parentPersonID:r,pensionaryStartDate:ke}).unwrap();l(!1),y(),oe.success(Ws.message,{autoClose:2e3})}catch(g){console.log(g),oe.error(((v=g==null?void 0:g.data)==null?void 0:v.message)||g.error,{auroClose:2e3})}};return Ms([B,D,x],[P,F,Y]),e.jsx(e.Fragment,{children:as||Pe?e.jsx(Se,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(De,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:n(_e),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"relationshipWithParentID",control:T,rules:{required:!0},render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:Me,onChange:g=>v(g?g.value:null),value:Me.find(g=>g.value===(s==null?void 0:s.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:ts||os})}),e.jsxs("label",{className:s!=null&&s.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),u.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFirstName&&e.jsx("span",{className:"error-form",children:u.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...U("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personLastName&&e.jsx("span",{className:"error-form",children:u.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personLastName",value:(s==null?void 0:s.personLastName)||"",id:"personLastName1",required:!0,...U("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personNationalCode&&e.jsx("span",{className:"error-form",children:u.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...U("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCertificateNo&&e.jsx("span",{className:"error-form",children:u.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...U("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificatetNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFatherName&&e.jsx("span",{className:"error-form",children:u.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...U("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:A,onChange:us,format:"jYYYY/jMM/jDD",onOpenChange:M,suffixIcon:e.jsx(pe,{color:"action"}),open:E,style:he,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personBirthPlace&&e.jsx("span",{className:"error-form",children:u.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personBirthPlace",value:(s==null?void 0:s.personBirthPlace)||"",id:"personBirthPlace1",required:!0,...U("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"maritalStatusID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:rs,onChange:g=>v(g?g.value:null),value:rs.find(g=>g.value===(s==null?void 0:s.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:xe||ls})}),e.jsx("label",{className:s!=null&&s.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPhone&&e.jsx("span",{className:"error-form",children:u.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...U("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCellPhone&&e.jsx("span",{className:"error-form",children:u.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personCellPhone)||"",name:"personCellPhone",id:"personCellPhone222",required:!0,...U("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personArea&&e.jsx("span",{className:"error-form",children:u.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personArea)||"",name:"personArea",id:"personArea1",required:!0,...U("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personRegion&&e.jsx("span",{className:"error-form",children:u.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:f(s==null?void 0:s.personRegion)||"",id:"personRegion1",required:!0,...U("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCountryID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:q,onChange:g=>v(g?g.value:null),value:q.find(g=>g.value===(s==null?void 0:s.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:qe||we})}),e.jsx("label",{className:s!=null&&s.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personStateID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:N,onChange:g=>v(g?g.value:null),value:N.find(g=>g.value===(s==null?void 0:s.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:ze||He})}),e.jsx("label",{className:s!=null&&s.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCityID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:ge,onChange:g=>v(g?g.value:null),value:ge.find(g=>g.value===(s==null?void 0:s.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Ke||Oe})}),e.jsx("label",{className:s!=null&&s.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPostalCode&&e.jsx("span",{className:"error-form",children:u.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personPostalCode)||"",name:"personPostalCode",id:"personPostalCode1",required:!0,...U("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personSpecialDisease&&e.jsx("span",{className:"error-form",children:u.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personSpecialDisease)||"",name:"personSpecialDisease",id:"personSpecialDisease1",required:!0,...U("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[u.personAddress&&e.jsx("span",{className:"error-form",children:u.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...U("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[u.personDescription&&e.jsx("span",{className:"error-form",children:u.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...U("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"pensionaryStatusID",control:T,rules:{required:!0},render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:je,onChange:g=>v(g?g.value:null),value:je.find(g=>g.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:We||Ve})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),u.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:w,defaultValue:null,onChange:ms,onOpenChange:bs,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(pe,{color:"action"}),open:O,style:he,wrapperStyle:me,pickerProps:{ref:x}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:H,onChange:ds,format:"jYYYY/jMM/jDD",onOpenChange:I,suffixIcon:e.jsx(pe,{color:"action"}),open:c,style:he,wrapperStyle:me,pickerProps:{ref:D}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:f(s==null?void 0:s.heirID)||"-",name:"heirID",id:"heirID",...U("heirID")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"heirID",children:"شماره وظیفه بگیری"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:f(Is(s==null?void 0:s.pensionaryStartDate))||"-",name:"pensionaryStartDate",id:"pensionaryStartDate",...U("pensionaryStartDate")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"pensionaryStartDate",children:"تاریخ وظیفه بگیری"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(fn,{statusHistoryTableData:L,isLoading:ue,isFetching:ns,handleRefresh:ve}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"bankID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:Xe,onChange:g=>v(g?g.value:null),value:Xe.find(g=>g.value===(s==null?void 0:s.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Je||Ze})}),e.jsx("label",{htmlFor:"bankID",className:s!=null&&s.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"bankBranchID",control:T,render:({field:{onChange:v}})=>e.jsx(W,{closeMenuOnSelect:!0,components:i,options:ps,onChange:g=>v(g?g.value:null),isDisabled:K||a||!s.bankID,value:ps.find(g=>g.value===(s==null?void 0:s.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:K||a})}),e.jsx("label",{htmlFor:"bankBranchID",className:s!=null&&s.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.accountNo&&e.jsx("span",{className:"error-form",children:u.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...U("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.ledgerCode&&e.jsx("span",{className:"error-form",children:u.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...U("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.insuranceCoef&&e.jsx("span",{className:"error-form",children:u.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.insuranceCoef)||"",name:"insuranceCoef",id:"insuranceCoefHeir",required:!0,...U("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.insuranceAmount&&e.jsx("span",{className:"error-form",children:u.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(s==null?void 0:s.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...U("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Hs,{}),onClick:n,type:"submit",loading:_,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function vt({setShowCreateHeirModal:l,refetch:m}){const y=o.useRef(null),B=o.useRef(null),D=o.useRef(null),[x,R]=o.useState(null),[p,L]=o.useState(!1),[h,A]=o.useState(null),[S,E]=o.useState(null),[P,w]=o.useState(!1),[$,H]=o.useState(!1),{handleSubmit:ee,formState:{errors:c},control:F,register:O,watch:Y}=cs(),n=Y(),[u,{isLoading:T}]=Ct(),[U,ne]=o.useState([]),se=ys(),Z=new URLSearchParams(se.search).get("personID"),_=Ks(),[i,{isLoading:t,isFetching:r}]=tn(),{relationships:C,relationshipIsLoading:K,relationshipIsFetching:a}=Ys(),{lookUpItems:G,lookUpItemsIsLoading:le,lookUpItemsIsFetching:ue}=J({lookUpType:"MaritialStatus"}),{lookUpItems:ns,lookUpItemsIsLoading:de,lookUpItemsIsFetching:ae}=J({lookUpType:"Country"}),{lookUpItems:ie,lookUpItemsIsLoading:Te,lookUpItemsIsFetching:as}=J({lookUpType:"State"}),{lookUpItems:Pe,lookUpItemsIsLoading:re,lookUpItemsIsFetching:Be}=J({lookUpType:"City"}),{pensionaryStatus:Ae,pensionaryStatusIsLoading:ts,pensionaryStatusIsFetching:os}=Os({pensionaryStatusCategory:"H"}),{lookUpItems:Ee,lookUpItemsIsLoading:xe,lookUpItemsIsFetching:ls}=J({lookUpType:"Bank"}),Ue=V(C,"relationshipID","relationshipName"),qe=V(G,"lookUpID","lookUpName"),we=V(ns,"lookUpID","lookUpName"),$e=V(Ae,"pensionaryStatusID","pensionaryStatusName"),ze=V(ie,"lookUpID","lookUpName"),He=V(Pe,"lookUpID","lookUpName"),Ye=V(Ee,"lookUpID","lookUpName"),Ke=V(U,"lookUpID","lookUpName"),Oe=o.useCallback(async q=>{try{const N=await i({lookUpType:"BankBranch",lookUpParentID:d(q)}).unwrap();ne(N.itemList)}catch(N){console.log(N)}},[i,ne]);o.useEffect(()=>{n.bankID&&Oe(n.bankID)},[n.bankID,Oe]);const Ge=q=>{R(q),L(!1)},We=q=>{E(q),w(!1)},Ve=q=>{A(q),H(!1)},Qe=q=>{H(q)},Je=q=>{L(q)},Ze=q=>{w(q)},Me=async()=>{var q;try{let N,ge,je;x?(N=new Date(x),N.setMinutes(N.getMinutes()-N.getTimezoneOffset())):N=null,h?(je=new Date(h),je.setMinutes(je.getMinutes()-je.getTimezoneOffset())):je=null,S?(ge=new Date(S),ge.setMinutes(ge.getMinutes()-ge.getTimezoneOffset())):ge=null;const Xe=await u({...n,relationshipWithParentID:d(n==null?void 0:n.relationshipWithParentID),personNationalCode:d(n==null?void 0:n.personNationalCode),personCertificateNo:d(n==null?void 0:n.personCertificateNo),personBirthDate:N,maritalStatusID:d(n==null?void 0:n.maritalStatusID),personPhone:d(n==null?void 0:n.personPhone),personCellPhone:d(n==null?void 0:n.personCellPhone),personRegion:parseInt(d(n==null?void 0:n.personRegion))||null,personArea:parseInt(d(n==null?void 0:n.personArea))||null,personCountryID:d(n==null?void 0:n.personCountryID),personStateID:d(n==null?void 0:n.personStateID),personCityID:d(n==null?void 0:n.personCityID),personPostalCode:d(n==null?void 0:n.personPostalCode),pensionaryStatusID:d(n==null?void 0:n.pensionaryStatusID),personBaseFinishDate:ge,bankID:d(n==null?void 0:n.bankID),bankBranchID:d(n==null?void 0:n.bankBranchID),accountNo:d(n==null?void 0:n.accountNo),insuranceCoef:parseFloat(d(n==null?void 0:n.insuranceCoef))||0,insuranceAmount:parseFloat(d(n==null?void 0:n.insuranceAmount))||0,ledgerCode:parseInt(d(n.ledgerCode))||0,parentPersonID:Z,pensionaryStartDate:je}).unwrap();l(!1),m(),oe.success(Xe.message,{autoClose:2e3})}catch(N){console.log(N),oe.error(((q=N==null?void 0:N.data)==null?void 0:q.message)||N.error,{autoClose:2e3})}};return Ms([y,B],[L,w]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:ee(Me),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"relationshipWithParentID",control:F,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:Ue,onChange:N=>q(N?N.value:null),value:Ue.find(N=>N.value===(n==null?void 0:n.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:K||a})}),e.jsxs("label",{className:n!=null&&n.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),c.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personFirstName&&e.jsx("span",{className:"error-form",children:c.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personFirstName",value:(n==null?void 0:n.personFirstName)||"",id:"personFirstName1",required:!0,...O("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personLastName&&e.jsx("span",{className:"error-form",children:c.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...O("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personNationalCode&&e.jsx("span",{className:"error-form",children:c.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personNationalCode",value:f(n==null?void 0:n.personNationalCode)||"",id:"personNationalCode2",required:!0,...O("personNationalCode",{required:"کد ملی را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personCertificateNo&&e.jsx("span",{className:"error-form",children:c.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...O("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personFatherName&&e.jsx("span",{className:"error-form",children:c.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...O("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:x,onChange:Ge,format:"jYYYY/jMM/jDD",onOpenChange:Je,suffixIcon:e.jsx(pe,{color:"action"}),open:p,style:he,wrapperStyle:me,pickerProps:{ref:y}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personBirthPlace&&e.jsx("span",{className:"error-form",children:c.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...O("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"maritalStatusID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:qe,onChange:N=>q(N?N.value:null),value:qe.find(N=>N.value===(n==null?void 0:n.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:le||ue})}),e.jsx("label",{className:n!=null&&n.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personPhone&&e.jsx("span",{className:"error-form",children:c.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...O("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personCellPhone&&e.jsx("span",{className:"error-form",children:c.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:f(n==null?void 0:n.personCellPhone)||"",id:"personCellPhone222",required:!0,...O("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personArea&&e.jsx("span",{className:"error-form",children:c.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personArea),name:"personArea",id:"personArea1",required:!0,...O("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personRegion&&e.jsx("span",{className:"error-form",children:c.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personRegion),name:"personRegion",id:"personRegion1",required:!0,...O("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCountryID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:we,onChange:N=>q(N?N.value:null),value:we.find(N=>N.value===(n==null?void 0:n.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:de||ae})}),e.jsx("label",{className:n!=null&&n.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personStateID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:ze,onChange:N=>q(N?N.value:null),value:ze.find(N=>N.value===(n==null?void 0:n.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:Te||as})}),e.jsx("label",{className:n!=null&&n.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"personCityID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:He,onChange:N=>q(N?N.value:null),value:He.find(N=>N.value===(n==null?void 0:n.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:re||Be})}),e.jsx("label",{className:n!=null&&n.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personPostalCode&&e.jsx("span",{className:"error-form",children:c.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:f(n==null?void 0:n.personPostalCode)||"",id:"personPostalCode1",required:!0,...O("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.personSpecialDisease&&e.jsx("span",{className:"error-form",children:c.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(n==null?void 0:n.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...O("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[c.personAddress&&e.jsx("span",{className:"error-form",children:c.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...O("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[c.personDescription&&e.jsx("span",{className:"error-form",children:c.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...O("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"pensionaryStatusID",control:F,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:$e,onChange:N=>q(N?N.value:null),value:$e.find(N=>N.value===(n==null?void 0:n.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:ts||os})}),e.jsxs("label",{className:n!=null&&n.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),c.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:h,defaultValue:null,onChange:Ve,onOpenChange:Qe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(pe,{color:"action"}),open:$,style:he,wrapperStyle:me,pickerProps:{ref:D}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ce.InputDatePicker,{value:S,onChange:We,format:"jYYYY/jMM/jDD",onOpenChange:Ze,suffixIcon:e.jsx(pe,{color:"action"}),open:P,style:he,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ مبنای قطع سهم"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"bankID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:Ye,onChange:N=>q(N?N.value:null),value:Ye.find(N=>N.value===(n==null?void 0:n.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:xe||ls})}),e.jsx("label",{htmlFor:"bankID",className:n!=null&&n.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:"bankBranchID",control:F,render:({field:{onChange:q}})=>e.jsx(W,{closeMenuOnSelect:!0,components:_,options:Ke,onChange:N=>q(N?N.value:null),isDisabled:t||r||!n.bankID,value:Ke.find(N=>N.value===(n==null?void 0:n.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:j.noOptionsMessage,loadingMessage:j.loadingMessage,styles:Q,isLoading:t||r})}),e.jsx("label",{htmlFor:"bankBranchID",className:n!=null&&n.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.accountNo&&e.jsx("span",{className:"error-form",children:c.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...O("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.ledgerCode&&e.jsx("span",{className:"error-form",children:c.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:f(n==null?void 0:n.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...O("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.insuranceCoef&&e.jsx("span",{className:"error-form",children:c.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"insuranceCoef",value:f(n==null?void 0:n.insuranceCoef)||"",id:"insuranceCoefHeir",required:!0,...O("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[c.insuranceAmount&&e.jsx("span",{className:"error-form",children:c.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...O("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Hs,{}),onClick:ee,type:"submit",loading:T,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function St(){const[l,m]=o.useState({}),[y,B]=o.useState([]),[D,x]=o.useState(!1),[R,p]=o.useState(!1),[L,h]=o.useState(!1),[A,S]=o.useState(""),[E,P]=o.useState(""),w=ys(),H=new URLSearchParams(w.search).get("personID"),[ee,{isLoading:c}]=It(),{data:F,isLoading:O,isSuccess:Y,isFetching:n,error:u,refetch:T}=ft(H);o.useEffect(()=>{if(T(),Y){const r=F.itemList.map((C,K)=>({id:C.personID,heirRowNum:K+1,pensionaryID:C.pensionaryID,personNationalCode:C.personNationalCode,personFirstName:C.personFirstName,personLastName:C.personLastName,pensionaryIsUnderGauranteeText:C.pensionaryIsUnderGauranteeText,personBirthDate:C.personBirthDate,relationshipWithParentName:C.relationshipWithParentName,parentPersonNationalCode:C.parentPersonNationalCode}));B(r)}},[Y,F,T]),o.useEffect(()=>{var r;u&&(console.log(u),oe.error(((r=u==null?void 0:u.data)==null?void 0:r.message)||u.error,{autoClose:2e3}))},[u]);const U=()=>{T()},ne=()=>{p(!0)},se=()=>{x(!0)},s=()=>{h(!0)},Z=async()=>{var r;try{const C=await ee({pensionaryID:E}).unwrap();h(!1),T(),oe.success(C.message,{autoClose:2e3})}catch(C){console.log(C),oe.error(((r=C==null?void 0:C.data)==null?void 0:r.message)||C.error,{autoClose:2e3})}},_=o.useMemo(()=>[{accessorKey:"heirRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(r)})},{accessorKey:"personNationalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(r)})},{accessorKey:"personFirstName",header:"نام",size:20},{accessorKey:"personLastName",header:"نام خانوادگی",size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:"وضعیت",size:20},{accessorKey:"personBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(Is(r))})},{accessorKey:"relationshipWithParentName",size:20,header:"نسبت"},{accessorKey:"parentPersonNationalCode",header:"شماره پرونده",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:f(r)})},{accessorKey:"editHeirAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`ویرایش "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(te,{color:"success",onClick:se,sx:{padding:"0"},children:e.jsx(Rs,{})})})},{accessorKey:"deleteHeirAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`حذف "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(te,{color:"error",onClick:s,sx:{padding:"0"},children:e.jsx(jn,{})})})}],[]),i=Ds({...Fs,columns:_,data:y,muiTableBodyRowProps:({row:r})=>({onClick:()=>m(()=>({[r.id]:!0})),selected:l[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Se,{children:[n?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"info",onClick:U,children:e.jsx(Ls,{fontSize:"small"})})})}),n?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد موظف"}),children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"success",onClick:ne,children:e.jsx(Nn,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(vs,{...r,page:f(r.page),slots:{previous:Ss,next:Bs,first:_s,last:ks}})},getRowId:r=>r.id,onRowSelectionChange:m,state:{rowSelection:l}});return o.useEffect(()=>{const r=Object.keys(i.getState().rowSelection)[0];if(r){const C=dn(y,r);S(r),P(C==null?void 0:C.pensionaryID)}},[i,l,y]),e.jsx(e.Fragment,{children:O||n?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[D&&A?e.jsx(is,{title:"ویرایش اطلاعات موظف",closeModal:()=>x(!1),children:e.jsx(Dt,{setShowEditHeirModal:x,personID:A,refetch:T})}):L?e.jsxs(is,{title:"حذف موظف",closeModal:()=>h(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این موظف اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(mn,{}),onClick:Z,loading:c,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(hn,{dir:"ltr",endIcon:e.jsx(Xs,{}),onClick:()=>h(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):R?e.jsx(is,{title:"ایجاد موظف",closeModal:()=>p(!1),children:e.jsx(vt,{setShowCreateHeirModal:p,refetch:T})}):null,e.jsx(Ps,{table:i})]})})}function Bt(){const[l,m]=o.useState({}),[y,B]=o.useState([]),D=ys(),x=new URLSearchParams(D.search),R=x.get("Role"),p=x.get("personID"),{data:L,isSuccess:h,isLoading:A,isFetching:S,error:E,refetch:P}=at({Role:R,personID:p});o.useEffect(()=>{if(P(),h){const c=L.itemList.map(F=>({id:F.requestID,type:F.requestTypeID,requestNO:F.requestNO||"-",personId:F.personID,requestTypeNameFa:F.requestTypeNameFa||"-",personName:F.personName||"-",date:F.requestDate||"-",body:F.requestText||"-"}));B(c),sessionStorage.setItem("requests",JSON.stringify(c))}},[L,h,P]),o.useEffect(()=>{var c;E&&oe.error(((c=E==null?void 0:E.data)==null?void 0:c.message)||E.error,{autoClose:2e3})},[E]);const w=()=>{P()},$=o.useMemo(()=>[{accessorKey:"id",header:"شماره درخواست",size:20,Cell:({renderedCellValue:c})=>e.jsx("div",{children:f(c)})},{accessorKey:"requestTypeNameFa",header:"نوع درخواست",size:20},{accessorKey:"personName",header:"ارسال کننده",size:20},{accessorKey:"date",header:"تاریخ درخواست",size:20,Cell:({renderedCellValue:c})=>e.jsx("div",{children:f(Is(c))})},{accessorKey:"observeReq",header:"مشاهده درخواست",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:c})=>e.jsx(fe,{title:f(c.original.requestNO),children:e.jsx(Bn,{to:`/retirement/request?requestID=${c.id}&Role=${R}&type=${c.original.type}`,children:e.jsx(te,{color:"primary",sx:{padding:"0"},children:e.jsx(xn,{})})})})}],[R]),H=Ds({...Fs,columns:$,data:y,muiTableBodyRowProps:({row:c})=>({onClick:()=>m(()=>({[c.id]:!0})),selected:l[c.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(Se,{children:S?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"info",onClick:w,children:e.jsx(Ls,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:c=>e.jsx(vs,{...c,page:f(c.page),slots:{previous:Ss,next:Bs,first:_s,last:ks}})},getRowId:c=>c.id,onRowSelectionChange:m,state:{rowSelection:l}});return e.jsx(e.Fragment,{children:A?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Ps,{table:H})})}function _t(){const[l,m]=o.useState({}),[y,B]=o.useState([]),[D,x]=o.useState(null),[R,p]=o.useState(!1),L=ys(),A=new URLSearchParams(L.search).get("personID"),{data:S,isLoading:E,isSuccess:P,isFetching:w,error:$,refetch:H}=tt({personID:A,payType:"M"}),ee=()=>{H()};o.useEffect(()=>{if(P){const n=S.itemList.map((u,T)=>({id:u.payID,payRowNum:T+1,payCreditAmount:u.payCreditAmount,payDebitAmount:u.payDebitAmount,payAmount:u.payAmount,payDate:u.payDate,currentYear:u.currentYear,currentMonth:u.currentMonth}));B(n)}},[P,H,S]),o.useEffect(()=>{var n;$&&oe.error(((n=$==null?void 0:$.data)==null?void 0:n.message)||$.error,{autoClose:2e3})},[$]);const c=()=>{p(!0)},F=o.useMemo(()=>[{accessorKey:"payRowNum",header:"ردیف",size:20,Cell:({renderedCellValue:n})=>e.jsx("div",{children:f(n)})},{accessorKey:"payCreditAmount",header:"مبلغ بستانکاری",size:20,Cell:({renderedCellValue:n})=>e.jsxs("div",{children:[Vs(f(n))," ","ریال"]})},{accessorKey:"payDebitAmount",header:"مبلغ بدهکاری",size:20,Cell:({renderedCellValue:n})=>e.jsxs("div",{children:[Vs(f(n))," ","ریال"]})},{accessorKey:"payAmount",header:"مبلغ کل",size:20,Cell:({renderedCellValue:n})=>e.jsxs("div",{children:[Vs(f(n))," ","ریال"]})},{accessorKey:"payDate",header:"تاریخ پرداخت",size:20,Cell:({renderedCellValue:n})=>e.jsx("div",{children:Is(n)})},{accessorKey:"currentYear",header:"سال مالی",size:20,Cell:({renderedCellValue:n})=>e.jsx("div",{children:f(n)})},{accessorKey:"currentMonth",header:"ماه مالی",size:20,Cell:({renderedCellValue:n})=>e.jsx("div",{children:f(n)})},{accessorKey:"downloadRetiredSlip",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:()=>e.jsx(fe,{title:"دانلود و مشاهده فیش",children:e.jsx(te,{color:"primary",sx:{padding:"0"},onClick:c,children:e.jsx(xn,{})})})}],[]),O=Ds({...Fs,columns:F,data:y,renderTopToolbarCustomActions:()=>e.jsx(Se,{children:w?e.jsx(te,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(De,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(te,{"aria-label":"refresh",color:"info",onClick:ee,children:e.jsx(Ls,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:n=>e.jsx(vs,{...n,page:f(n.page),slots:{previous:Ss,next:Bs,first:_s,last:ks}})},muiTableBodyRowProps:({row:n})=>({onClick:()=>m(()=>({[n.id]:!0})),selected:l[n.id],sx:{cursor:"pointer"}}),getRowId:n=>n.id,onRowSelectionChange:m,state:{rowSelection:l}});return o.useEffect(()=>{const n=Object.keys(O.getState().rowSelection)[0];x(n||null)},[O,l]),e.jsxs(e.Fragment,{children:[R&&D&&e.jsx(is,{closeModal:()=>p(!1),children:e.jsx(ot,{payID:D})},D),E?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Ps,{table:O})]})}const $s=({name:l,label:m,disabled:y,format:B="jYYYY/jMM/jDD",rules:D,control:x,required:R=!1,errors:p,setValue:L})=>{var w;const h=o.useRef(null),[A,S]=o.useState(!1),E=$=>{S($)},P=()=>{L(l,null)};return Ms([h],[S]),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{name:l,control:x,rules:D,render:({field:{onChange:$,value:H}})=>e.jsx(ce.InputDatePicker,{id:l,"aria-label":l,disabled:y,format:B,value:H,open:A,suffixIcon:H&&!y?e.jsx(te,{color:"default",size:"small",onClick:P,children:e.jsx(Xs,{})}):e.jsx(pe,{color:"action"}),defaultValue:null,onOpenChange:E,onChange:ee=>{S(!1),$(ee)},pickerProps:{...h&&{ref:h}},style:{border:"none",cursor:"pointer"},wrapperStyle:{border:"1px solid var(--color-input-border)",width:"100%",height:"100%",paddingLeft:"20px",borderRadius:"4px",cursor:"pointer"}})}),e.jsxs("label",{htmlFor:l,className:"inputBox__form--readOnly-label",children:[R&&e.jsx("span",{children:"*"})," ",m]}),p&&e.jsx("span",{className:"error-form",children:(w=p==null?void 0:p[l])==null?void 0:w.message})]})},Ns=({label:l,size:m="small",color:y="primary",disabled:B,control:D,name:x,errors:R,rules:p})=>e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(z,{name:x,control:D,rules:p,render:({field:{onChange:L,value:h}})=>e.jsx(_n,{id:x,checked:!!h,onChange:A=>L(A.target.checked),size:m,color:y,disabled:B,sx:{padding:.5}})}),e.jsx("label",{htmlFor:x,className:B?"checkboxContainer__label--disabled":"checkboxContainer__label",children:l})]}),yn=(l,m,y,B)=>{if(!l)return{};const D={...l};return Object.keys(D).forEach(x=>{var R;y.includes(x)?D[x]=D[x]===null?null:Qs(D[x]):m.includes(x)&&(D[x]=D[x]===null?null:(R=B[x])==null?void 0:R.find(p=>p.value===D[x]))}),D},ln=(l,m,y)=>{const B={...l};return y.forEach(D=>{if(l[D]){const x=new Date(l[D]);x.setMinutes(x.getMinutes()-x.getTimezoneOffset()),B[D]=x}else B[D]=null}),m.forEach(D=>{l[D]&&l[D].value!==void 0&&(B[D]=l[D].value)}),B},kt=()=>{const[l,m]=en(!1),[y]=zs(),B=kn(),D=y.get("personID"),x=o.useMemo(()=>["personCountryID","personStateID","personCityID","housingTypeID","educationTypeID","maritalStatusID"],[]),R=o.useMemo(()=>["personDeathDate","personBirthDate"],[]),{control:p,handleSubmit:L,formState:{errors:h},setValue:A}=cs({defaultValues:{personCountryID:null}}),{data:S,isLoading:E,isFetching:P,isSuccess:w,refetch:$}=Pn(D),[H,{isLoading:ee}]=On(),{lookUpItems:c,lookUpItemsIsLoading:F}=J({lookUpType:"Gender"}),O=o.useMemo(()=>ye(c,"lookUpID","lookUpName"),[c]),{lookUpItems:Y,lookUpItemsIsLoading:n}=J({lookUpType:"EducationType"}),u=o.useMemo(()=>ye(Y,"lookUpID","lookUpName"),[Y]),{lookUpItems:T,lookUpItemsIsLoading:U}=J({lookUpType:"Country"}),ne=o.useMemo(()=>ye(T,"lookUpID","lookUpName"),[T]),{lookUpItems:se,lookUpItemsIsLoading:s}=J({lookUpType:"State"}),Z=o.useMemo(()=>ye(se,"lookUpID","lookUpName"),[se]),{lookUpItems:_,lookUpItemsIsLoading:i}=J({lookUpType:"City"}),t=o.useMemo(()=>ye(_,"lookUpID","lookUpName"),[_]),{lookUpItems:r,lookUpItemsIsLoading:C}=J({lookUpType:"HousingType"}),K=o.useMemo(()=>ye(r,"lookUpID","lookUpName"),[r]),{lookUpItems:a,lookUpItemsIsLoading:G}=J({lookUpType:"MaritialStatus"}),le=o.useMemo(()=>ye(a,"lookUpID","lookUpName"),[a]),ue=async de=>{const ae=ln(de,x,R),ie=await H({...ae}).unwrap();$(),m(),an.success(ie.message)};return o.useEffect(()=>{if(w){const de=S==null?void 0:S.itemList[0];B(cn((de==null?void 0:de.personDeathDate)!==null));const ae=yn(de,x,R,{genderID:O,educationTypeID:u,personCountryID:ne,personStateID:Z,personCityID:t,housingTypeID:K,maritalStatusID:le});Object.keys(ae).forEach(ie=>{ae[ie]===null?A(ie,""):A(ie,ae[ie])})}return()=>{B(cn(null))}},[B,w,S==null?void 0:S.itemList,A,O,ne,u,Z,t,K,le,R,x]),e.jsx(e.Fragment,{children:E||P?e.jsx(Se,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(De,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:L(ue),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(X,{name:"personFirstName",label:Mn,rules:be,required:!0,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personLastName",label:Fn,rules:be,required:!0,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personNationalCode",label:Ln,rules:{...Rn,...be},required:!0,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personCertificateNo",label:Tn,rules:{...Ne,...be},required:!0,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personFatherName",label:An,rules:fs,required:!0,control:p,editable:l,type:"text"}),e.jsx(Ie,{name:"genderID",control:p,label:En,required:!0,isClearable:!0,isDisabled:!l,options:O,isLoading:F,rules:be,errors:h}),e.jsx($s,{name:"personBirthDate",label:Un,control:p,disabled:!l,required:!0,errors:h,rules:be,setValue:A}),e.jsx(X,{name:"personBirthPlace",label:qn,rules:fs,required:!1,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personPreviousName",label:wn,rules:fs,required:!1,control:p,editable:l,type:"text"}),e.jsxs("div",{className:l?"checkboxContainer col-span-3":"checkboxContainer--disabled col-span-3",children:[e.jsx("p",{className:"inputBox__form--readOnly-label",children:$n}),e.jsx(Ns,{disabled:!l,control:p,label:zn,name:"personIsSacrificedFamily"}),e.jsx(Ns,{disabled:!l,control:p,label:Hn,name:"personIsWarrior"}),e.jsx(Ns,{disabled:!l,control:p,label:Yn,name:"personIsChildOfSacrificed"}),e.jsx(Ns,{disabled:!l,control:p,label:Kn,name:"personIsValiant"}),e.jsx(Ns,{disabled:!l,control:p,label:Gn,name:"personIsSacrificed"}),e.jsx(Ns,{disabled:!l,control:p,label:Wn,name:"personIsCaptive"})]}),e.jsx(X,{name:"retiredID",label:Vn,required:!1,control:p,editable:!1,type:"text"}),e.jsx(X,{name:"personPhone",label:Qn,required:!1,rules:Ne,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personCellPhone",label:Jn,required:!1,rules:Zn,control:p,editable:l,type:"text"}),e.jsx(X,{name:"backupNum",label:Xn,required:!1,rules:Ne,control:p,editable:l,type:"text"}),e.jsx(X,{name:"backupName",label:ea,required:!1,rules:fs,control:p,editable:l,type:"text"}),e.jsx(X,{name:"backupLname",label:sa,required:!1,rules:fs,control:p,editable:l,type:"text"}),e.jsx(X,{name:"personEmail",label:na,required:!1,rules:aa,control:p,editable:l,type:"text"}),e.jsx(Ie,{name:"educationTypeID",control:p,label:ta,required:!1,isClearable:!0,isDisabled:!l,options:u,isLoading:n}),e.jsx(Ie,{name:"personCountryID",control:p,label:oa,required:!1,isClearable:!0,isDisabled:!l,options:ne,isLoading:U}),e.jsx(Ie,{name:"personStateID",control:p,label:la,required:!1,isClearable:!0,isDisabled:!l,options:Z,isLoading:s}),e.jsx(Ie,{name:"personCityID",control:p,label:ra,required:!1,isClearable:!0,isDisabled:!l,options:t,isLoading:i}),e.jsx(X,{name:"personRegion",label:ia,required:!1,control:p,editable:l,rules:Ne,type:"text"}),e.jsx(X,{name:"personArea",label:ca,required:!1,control:p,editable:l,rules:Ne,type:"text"}),e.jsx(X,{name:"personPostalCode",label:pa,required:!1,control:p,editable:l,rules:ua,type:"text"}),e.jsx(Ie,{name:"housingTypeID",control:p,label:da,required:!1,isClearable:!0,isDisabled:!l,options:K,isLoading:C}),e.jsx(Ie,{name:"maritalStatusID",control:p,label:ma,required:!1,isClearable:!0,isDisabled:!l,options:le,isLoading:G}),e.jsx($s,{name:"personDeathDate",label:ha,control:p,disabled:!l,required:!1,setValue:A}),e.jsx(pn,{name:"personAddress",label:xa,required:!0,control:p,editable:l,containerClassNames:"col-span-3"}),e.jsx(pn,{name:"personDescription",label:ga,required:!0,control:p,editable:l,containerClassNames:"col-span-4 row-span-2"})]}),e.jsxs("div",{className:"flex-row mr-auto",children:[e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(on,{}),disabled:!l,variant:"contained",type:"submit",loading:ee,color:"success",children:e.jsx("span",{children:sn})}),e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Rs,{}),onClick:m,disabled:l,variant:"contained",color:"primary",children:e.jsx("span",{children:nn})})]})]})})})},Pt=()=>[{accessorKey:"pensionaryStatusRowNum",header:ja,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"pensionaryStatusName",header:Js,size:20},{accessorKey:"pensionaryStartdate",header:Na,size:20,Cell:({renderedCellValue:l})=>e.jsx("div",{children:fa(l)})},{accessorKey:"isActive",header:Js,size:20,Cell:({renderedCellValue:l})=>e.jsx("div",{children:l===!0?"فعال":"غیرفعال"})}],Ot=({data:l,isLoading:m,isFetching:y})=>{const B=Pt();return e.jsx(ya,{data:l,columns:B,scroll:!1,isLoading:m,isFetching:y,sorting:[{id:"isActive",desc:!0}],highlightActive:!0})},Mt=()=>{const[l,m]=o.useState([]),[y,B]=en(!1),[D]=zs(),x=D.get("personID"),{personDeathDate:R}=gn(K=>K.person),p=o.useMemo(()=>["retiredOrganizationID","employmentTypeID","pensionaryStatusID"],[]),L=o.useMemo(()=>["retirementDate","pensionaryStartdate"],[]),{control:h,handleSubmit:A,formState:{errors:S},setValue:E}=cs(),{data:P,isSuccess:w,isLoading:$,isFetching:H,refetch:ee}=Ia(x),{data:c,isSuccess:F,isLoading:O,isFetching:Y,refetch:n}=Zs(x),[u,{isLoading:T}]=ba(),{organizations:U,organizationIsLoading:ne}=st({}),{lookUpItems:se,lookUpItemsIsLoading:s}=J({lookUpType:"EmploymentType"}),{pensionaryStatus:Z,pensionaryStatusIsLoading:_}=Os({pensionaryStatusCategory:"R",pensionaryStatusIsDead:R}),i=o.useMemo(()=>ye(U,"organizationID","organizationName"),[U]),t=o.useMemo(()=>ye(se,"lookUpID","lookUpName"),[se]),r=o.useMemo(()=>ye(Z,"pensionaryStatusID","pensionaryStatusName"),[Z]);o.useEffect(()=>{if(w){const K=P==null?void 0:P.itemList[0];if(K){const a={...K};Object.keys(a).forEach(G=>{G==="retirementDate"&&(a[G]=a[G]===null?null:Qs(a[G])),G==="pensionaryStartdate"&&(a[G]=a[G]===null?null:Qs(a[G])),E(G,a[G])})}}},[w,P==null?void 0:P.itemList,E]);const C=async K=>{const a=ln(K,p,L),G=await u({...a,retiredGroup:parseInt(K.retiredGroup),retiredJobDegreeCoef:parseInt(K.retiredJobDegreeCoef),retiredRealDuration:parseInt(K.retiredRealDuration),retiredGrantDuration:parseInt(K.retiredGrantDuration),personID:x}).unwrap();B(),ee(),n(),an.success(G.message)};return o.useEffect(()=>{if(w){const K=P==null?void 0:P.itemList[0],a=yn(K,p,L,{retiredOrganizationID:i,employmentTypeID:t,pensionaryStatusID:r});Object.keys(a).forEach(G=>{a[G]===null?E(G,""):E(G,a[G])})}},[w,P==null?void 0:P.itemList,i,t,r,E,p,L]),o.useEffect(()=>{if(F){const K=c==null?void 0:c.itemList.map((a,G)=>({id:a.pensionaryID,isActive:a.pensionaryIsActive,pensionaryStatusRowNum:G+1,pensionaryStatusName:a.pensionaryStatusName||"-",pensionaryStartdate:a.pensionaryStartdate||"-"}));m(K)}},[F,c==null?void 0:c.itemList]),e.jsx(e.Fragment,{children:$||H?e.jsx(Se,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(De,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:A(C),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(X,{name:"retiredGroup",label:Ca,control:h,required:!0,editable:y,rules:{...be,...Ne},type:"text"}),e.jsx(Ie,{name:"retiredOrganizationID",control:h,label:Da,required:!0,isClearable:!0,isDisabled:!y,options:i,isLoading:ne,rules:be,errors:S}),e.jsx(X,{name:"retiredLastPosition",label:va,control:h,required:!1,editable:y,rules:fs,type:"text"}),e.jsx(Ie,{name:"employmentTypeID",control:h,label:Sa,required:!0,isClearable:!0,isDisabled:!y,options:t,isLoading:s,rules:be,errors:S}),e.jsx($s,{name:"retirementDate",label:Ba,control:h,disabled:!y,required:!1,errors:S,rules:be,setValue:E}),e.jsx(Ie,{name:"pensionaryStatusID",control:h,label:Js,required:!0,isClearable:!0,isDisabled:!y,options:r,isLoading:_,rules:be,errors:S}),e.jsx($s,{name:"pensionaryStartdate",label:_a,control:h,disabled:!y,required:!0,errors:S,rules:be,setValue:E}),e.jsx(X,{name:"retiredJobDegreeCoef",label:ka,control:h,required:!1,editable:y,rules:Ne,type:"text"}),e.jsx(X,{name:"retiredGrantDuration",label:Pa,control:h,required:!1,editable:y,rules:Ne,type:"text"}),e.jsx(X,{name:"retiredRealDuration",label:Oa,control:h,required:!1,editable:y,rules:Ne,type:"text"})]}),e.jsxs("div",{className:"flex-row mr-auto",children:[e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(on,{}),disabled:!y,variant:"contained",type:"submit",loading:T,color:"success",children:e.jsx("span",{children:sn})}),e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Rs,{}),onClick:B,disabled:y,variant:"contained",color:"primary",children:e.jsx("span",{children:nn})})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Ot,{data:l,isLoading:O,isFetching:Y})]})})})},Ft=()=>{const[l,m]=en(!1),[y,B]=o.useState([]),[D]=zs(),x=D.get("personID"),R=o.useMemo(()=>["bankID","bankBranchID"],[]),p=o.useMemo(()=>[],[]),{control:L,handleSubmit:h,formState:{errors:A},setValue:S,watch:E}=cs(),P=E("bankID"),{lookUpItems:w,lookUpItemsIsLoading:$}=J({lookUpType:"Bank"}),H=o.useMemo(()=>ye(w,"lookUpID","lookUpName"),[w]),[ee,{isLoading:c,isFetching:F}]=tn(),O=o.useMemo(()=>ye(y,"lookUpID","lookUpName"),[y]),{data:Y,isSuccess:n,isLoading:u,isFetching:T,refetch:U}=Ma(x),[ne,{isLoading:se}]=Fa(),s=o.useCallback(async i=>{const t=await ee({lookUpType:"BankBranch",lookUpParentID:i}).unwrap();B(t.itemList)},[ee]),Z=async i=>{const t=ln(i,R,p),r=await ne({...t,ledgerCode:parseInt(i.ledgerCode)||null,insuranceAmount:parseFloat(i.insuranceAmount)||null,insuranceCoef:parseFloat(i.insuranceCoef)||null,personID:x}).unwrap();U(),m(),an.success(r.message)};return o.useEffect(()=>{P?s(P.value):(S("bankBranchID",null),B([]))},[P,s,S]),o.useEffect(()=>{n&&({...Y},Object.keys(Y).forEach(i=>{Y[i]===null?S(i,""):S(i,Y[i])}))},[n,Y,S]),o.useEffect(()=>{n&&H.length>0&&S("bankID",H.find(i=>i.value===Y.bankID))},[n,Y,S,H]),o.useEffect(()=>{n&&O.length>0&&S("bankBranchID",O.find(i=>i.value===Y.bankBranchID))},[n,Y,S,O]),e.jsx(e.Fragment,{children:u||T?e.jsx(Se,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(De,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:h(Z),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(Ie,{name:"bankID",control:L,label:La,required:!1,isClearable:!0,isDisabled:!l,options:H,isLoading:$,errors:A}),e.jsx(Ie,{name:"bankBranchID",control:L,label:Ra,required:!1,isClearable:!0,isDisabled:!l,options:O,isLoading:c||F,errors:A}),e.jsx(X,{name:"accountNo",label:Ta,rules:Ne,required:!1,control:L,editable:l,type:"text"}),e.jsx(X,{name:"ledgerCode",label:Aa,rules:Ne,required:!1,control:L,editable:l,type:"text"}),e.jsx(X,{name:"insuranceCoef",label:Ea,rules:Ne,required:!1,control:L,editable:l,type:"text"}),e.jsx(X,{name:"insuranceAmount",label:Ua,rules:Ne,required:!1,control:L,editable:l,type:"text"})]}),e.jsxs("div",{className:"flex-row mr-auto",children:[e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(on,{}),disabled:!l,variant:"contained",type:"submit",loading:se,color:"success",children:e.jsx("span",{children:sn})}),e.jsx(Ce,{dir:"ltr",endIcon:e.jsx(Rs,{}),onClick:m,disabled:l,variant:"contained",color:"primary",children:e.jsx("span",{children:nn})})]})]})})})},po=()=>{const[l,m]=o.useState("1"),{personDeathDate:y}=gn(x=>x.person),B=(x,R)=>{m(R)};return e.jsxs("section",{className:"flex-col",children:[e.jsx(et,{title:qa,back:!0}),e.jsxs("div",{"data-name":"retired-forms",children:[e.jsxs(As,{children:[e.jsx(Es,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Us,{}),children:wa}),e.jsx(qs,{children:e.jsx(kt,{})})]}),e.jsxs(As,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Es,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Us,{}),children:$a}),e.jsx(qs,{children:e.jsx(Mt,{})})]}),e.jsxs(As,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Es,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Us,{}),children:za}),e.jsx(qs,{children:e.jsx(Ft,{})})]}),e.jsxs(As,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Es,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Us,{}),children:Ha}),e.jsx(qs,{children:e.jsx(it,{})})]})]}),e.jsx("div",{"data-name":"retired-grids",children:e.jsxs(lt,{value:l,children:[e.jsx(Se,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(rt,{onChange:B,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(Ts,{label:y?Ya:Ka,value:"1"}),e.jsx(Ts,{label:Ga,value:"2"}),e.jsx(Ts,{label:Wa,value:"3"}),e.jsx(Ts,{label:Va,value:"4"})]})}),e.jsx(ws,{value:"1",sx:{padding:"0"},children:y?e.jsx(St,{}):e.jsx(jt,{})}),e.jsx(ws,{value:"2",sx:{padding:"0"},children:e.jsx(nt,{})}),e.jsx(ws,{value:"3",sx:{padding:"0"},children:e.jsx(_t,{})}),e.jsx(ws,{value:"4",sx:{padding:"0"},children:e.jsx(Bt,{})})]})})]})};export{po as default};
