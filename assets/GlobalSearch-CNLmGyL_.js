import{c as g,j as e,r as a,h as F,A as O}from"./index-DXLU_PyE.js";import{u as w}from"./index.esm-BbqTopL3.js";import{a as E}from"./personApi-CgWrLM2b.js";import{I as l}from"./Input-CGe5v-_f.js";import{G as v}from"./Grid-D4u5Jkje.js";import{R as P,F as x,b as h,N as f,aH as S,aO as _}from"./const-XmctE7J8.js";import{a as z}from"./messages-C1aWCoMO.js";import{o as u,a as N}from"./rules-DZzP7WC9.js";const G=g(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"SearchOutlined"),K=(s=[])=>[{accessorKey:"personnelRowNo",header:P,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"personnelFirstName",header:x,size:20},{accessorKey:"personnelLastName",header:h,size:20},{accessorKey:"personnelNationalCode",header:f,size:20},{accessorKey:"personnelID",header:S,size:20},...s],b=a.createContext([]),M=()=>{const s=a.useContext(b);if(!s)throw new Error("useActions must be used within an ActionsProvider");return s},T=a.memo(({data:s,isLoading:r,isFetching:o})=>{const i=M(),c=K(i);return e.jsx(v,{columns:c,scroll:!1,data:s,isLoading:r,isFetching:o})}),q=()=>{const[s,r]=a.useState([]),{control:o,handleSubmit:i,watch:c,reset:j}=w(),t=c(),[y,{isLoading:m,isFetching:p}]=E(),C=a.useMemo(()=>!t.personNationalCode&&!t.personnelID&&!t.personFirstName&&!t.personLastName,[t]),D=async A=>{const d=await y(A).unwrap();if(d.itemList.length===0){O.warning(z),j();return}const I=d.itemList.map((n,R)=>({id:n.personID,personnelRowNum:R+1,personnelDeathDate:n.personDeathDate,personnelID:n.personnelID,personnelNationalCode:n.personNationalCode,personnelFirstName:n.personFirstName,personnelLastName:n.personLastName}));r(I)},L=a.useMemo(()=>s,[s]);return e.jsxs("section",{className:"flex-col",children:[e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:i(D),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(l,{name:"personNationalCode",label:f,rules:u,control:o,required:!1,type:"text"}),e.jsx(l,{name:"personnelID",label:S,rules:u,control:o,required:!1,type:"text"}),e.jsx(l,{name:"personFirstName",label:x,rules:N,control:o,required:!1,type:"text"}),e.jsx(l,{name:"personLastName",label:h,rules:N,control:o,required:!1,type:"text"})]}),e.jsx("div",{className:"flex-row mr-auto",children:e.jsx(F,{dir:"ltr",endIcon:e.jsx(G,{}),loading:m||p,disabled:C,variant:"contained",color:"primary",type:"submit",children:e.jsx("span",{children:_})})})]}),e.jsx(T,{data:L,isLoading:m,isFetching:p})]})},B=({children:s,actions:r})=>e.jsx(b.Provider,{value:r||[],children:s}),Z=({actions:s=[]})=>e.jsx(B,{actions:s,children:e.jsx(q,{})});export{Z as G,G as S};
