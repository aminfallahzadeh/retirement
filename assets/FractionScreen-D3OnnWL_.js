import{c as he,j as e,r as x,h as K,b8 as F,d2 as as,N as rs,d3 as v,U as fe,Q as je,z as o,I as W,C as ts,T as Q,m as k,B as ge,bJ as is,d4 as ls,q as u,p as B,d5 as Ne,d6 as os,D as cs,P as ds,E as ms,F as ps,H as us,J as xs,M as hs,W as E,S as fs,f as T,b as js,y as te,X as ie,b1 as le}from"./index-DQyzDCLR.js";import{k as gs,c as Ns,l as ys,m as vs,n as _s}from"./useFetchLookUpData-EmJzsGiy.js";import{u as bs,m as oe,C as ce,d as de,a as me}from"./datePicker-C8gr3sj3.js";import{M as Ps}from"./Modal-hxHYA1BW.js";import{i as ye,S as z}from"./react-select-animated.esm-BBTJRA6k.js";import{r as Cs,u as Bs}from"./xlsx-uoQkVabA.js";import{e as Ds}from"./excel-icon-Dq0N6FeV.js";import{o as X,s as b,a as q}from"./reactSelect-BGq5yAQc.js";import{U as Os}from"./UploadOutlined-Ci0d2bt4.js";import{D as ve}from"./DeleteOutline-DkzFNTnt.js";/* empty css                 */import{A as Ss}from"./Add-xgazHMMc.js";import{d as Is}from"./table-options-DNK9GsEa.js";import{T as Ms,a as Fs,b as pe}from"./TabPanel-Cmxy28vk.js";import"./sharedApi-L5ofKGPV.js";import"./requestApi-6QKBOa2y.js";const Ts=he([e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14z"},"0"),e.jsx("path",{d:"M6.25 7.72h5v1.5h-5zM13 15.75h5v1.5h-5zm0-2.5h5v1.5h-5zM8 18h1.5v-2h2v-1.5h-2v-2H8v2H6V16h2zm6.09-7.05 1.41-1.41 1.41 1.41 1.06-1.06-1.41-1.42 1.41-1.41L16.91 6 15.5 7.41 14.09 6l-1.06 1.06 1.41 1.41-1.41 1.42z"},"1")],"CalculateOutlined"),ws=he(e.jsxs("g",{fillRule:"evenodd",children:[e.jsx("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H4V5h16z"}),e.jsx("path",{d:"M19.41 10.42 17.99 9l-3.17 3.17-1.41-1.42L12 12.16 14.82 15zM5 7h5v2H5zm0 4h5v2H5zm0 4h5v2H5z"})]}),"FactCheckOutlined");function zs(){const n=x.useRef(null),[d,a]=x.useState(!1),[p,r]=x.useState(!1),[m,s]=x.useState(0),j=x.useRef(null),h=x.useRef(null),N=ye(),i=K(),[C,P]=x.useState("group"),{data:t}=F(l=>l.calculateFractionData),[_,M]=x.useState(0),[D,$]=x.useState(null),[Pe,Y]=x.useState(null),[Ce,H]=x.useState(null),[Be,L]=x.useState(!1),[De,R]=x.useState(!1),[Oe,{isLoading:Se,isFetching:Ie}]=gs(),[Me,{isLoading:Fe,isFetching:Te}]=as(),{organizations:we,organizationIsLoading:ze,organizationIsFetching:qe}=Ns({}),{fractionTypes:ke,fractionTypesIsLoading:Le,fractionTypesIsFetching:Re}=ys(),{personnelStatementOffTypes:G,personnelStatementOffTypesIsLoading:Ee,personnelStatementOffTypesIsFetching:Ye}=vs(),Z=X(G,"personnelStatementOffTypeID","personnelStatementOffTypeName"),ee=X(ke,"fractionTypeid","fractionTypeName"),He=X(we,"organizationID","organizationName"),se=[{value:"d621c0cd-1381-44d9-9d59-a1c772931080",label:"چک"},{value:"39363fd7-5dc7-4195-89f0-5eb62c667127",label:"فیش"}];x.useEffect(()=>{if(t.personnelStatementOffTypeID){const l=rs(G,t.personnelStatementOffTypeID,"personnelStatementOffTypeID");i(v({...t,personelPercent:l==null?void 0:l.fractionPersonnelCoef,organazationPercent:l==null?void 0:l.fractionOrganizationCoef}))}},[t==null?void 0:t.personnelStatementOffTypeID,i,G]);const Ve=l=>{L(l)},Ae=l=>{R(l)},Ue=l=>{if(!l){console.log("Date is null or undefined"),i(v({...t,letterDate:null})),Y(null),L(!1);return}let c=new Date(l);if(isNaN(c.getTime())){console.error("Invalid date value"),i(v({...t,letterDate:null})),Y(null),L(!1);return}c.setMinutes(c.getMinutes()-c.getTimezoneOffset()),i(v({...t,letterDate:c.toDateString()})),Y(l),L(!1)},We=l=>{if(!l){i(v({...t,paymentDate:null})),H(null),R(!1);return}let c=new Date(l);if(isNaN(c.getTime())){console.error("Invalid date value"),i(v({...t,paymentDate:null})),H(null),R(!1);return}c.setMinutes(c.getMinutes()-c.getTimezoneOffset()),i(v({...t,paymentDate:c.toDateString()})),H(l),R(!1)},ne=l=>{i(ls(l.target.value)),P(l.target.value)},V=l=>{const{name:c,value:y}=l.target;i(v({...t,[c]:y}))},A=(l,c)=>{const{name:y}=c;if(l){const{value:g}=l;i(v({...t,[y]:g||""}))}else i(v({...t,[y]:null}))},Ke=async(l,c)=>{var y,g,O;console.log(c);try{const f=await Oe({data:l,type:c}).unwrap();r(!0),B.success(f.message,{autoClose:2e3})}catch(f){((y=f==null?void 0:f.data)==null?void 0:y.error)==="period exists"?B.error("دوره تکراری می باشد",{autoClose:2e3}):((g=f==null?void 0:f.data)==null?void 0:g.error)==="PersonnelID not found"?B.error("شماره کارمندی یافت نشد",{autoClose:2e3}):B.error(((O=f==null?void 0:f.data)==null?void 0:O.message)||f.error,{autoClose:2e3}),console.log(f==null?void 0:f.data.error)}},$e=async()=>{var l;try{const c=await Me({personNationalCode:u(t.personNationalCode)}).unwrap();if(c.itemList.length===0){B.error("نتیجه ای یافت نشد",{autoClose:2e3});return}const g=c.itemList.find(J=>J.personID.startsWith("E"))||c.itemList[1];if(!g){B.error("!کد ملی معتبر نمی باشد",{autoClose:2e3});return}const O=g.personID;i(v({...t,personFirstName:g.personFirstName,personLastName:g.personLastName,personID:g.personID}));const f=new URLSearchParams(window.location.search);f.set("personID",O),window.history.replaceState({},"",`${window.location.pathname}?${f.toString()}`),a(!0)}catch(c){console.log(c),B.error(((l=c==null?void 0:c.data)==null?void 0:l.message)||c.error,{autoClose:2e3})}},Ge=()=>{n.current.click()},Je=()=>{$(null),M(0)},Xe=()=>{r(!1),i(v({fractionTypeID:null,letterNO:null,paymentTypeID:null,paymentNO:null})),Y(null),H(null),$(null),M(0)},Qe=l=>{const c=l.target.files[0];if(c){const y=new FileReader;$(c),y.onprogress=g=>{const O=Math.round(g.loaded/g.total*100);M(O)},y.onload=g=>{const O=new Uint8Array(g.target.result),f=Cs(O,{type:"array"}),J=f.SheetNames[0],Ze=f.Sheets[J],ae=Bs.sheet_to_json(Ze,{header:1}),es=ae[0],re=ae.slice(1).map(U=>{if(U.every(w=>w==null||w===""))return null;const S={};return U.forEach((w,ns)=>{S[es[ns]]=u(w?w.toString():"")}),S.saved=!0,S.letterNO=u(t.letterNO),S.letterDate=new Date(t.letterDate),S.paymentDate=new Date(t.paymentDate),S.paymentTypeID=t.paymentTypeID,S.paymentNO=u(t.paymentNO),S}).filter(U=>U!==null);console.log(t);const ss=t==null?void 0:t.fractionTypeID;s(re.length),Ke(re,ss)},y.onloadend=()=>{setTimeout(()=>{M(0)},2e3)},y.readAsArrayBuffer(c)}};return bs([j,h],[L,R]),e.jsxs(e.Fragment,{children:[p&&e.jsxs(Ps,{title:"نتیجه",children:[e.jsxs("p",{className:"paragraph-primary",children:["تعداد ",m," رکورد ثبت شد"]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(fe,{dir:"ltr",endIcon:e.jsx(je,{}),onClick:Xe,variant:"contained",color:"success",children:e.jsx("span",{children:"تایید"})})})]}),e.jsxs("section",{className:"formContainer flex-col",children:[e.jsxs("form",{method:"POST",className:"grid grid--col-5",noValidate:!0,children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{closeMenuOnSelect:!0,options:ee,components:N,name:"fractionTypeID",value:ee.find(l=>l.value===(t==null?void 0:t.fractionTypeID))||null,onChange:A,isLoading:Le||Re,isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"نوع کسور"}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:q}),e.jsx("label",{className:t!=null&&t.fractionTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"نوع کسور"})]}),e.jsxs("div",{className:"checkboxContainer",children:[e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx("input",{type:"radio",id:"groupTyped",name:"frType",value:"group",onChange:ne,checked:C==="group"}),e.jsx("label",{htmlFor:"groupTyped",className:"checkboxContainer__label",children:"سازمانی"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx("input",{type:"radio",id:"soloTyped",name:"frType",value:"solo",onChange:ne}),e.jsx("label",{htmlFor:"soloTyped",className:"checkboxContainer__label",children:"انفرادی"})]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:V,name:"letterNO",value:o(t.letterNO)||"",required:!0,id:"letterNO"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"letterNO",children:"شماره نامه"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(oe.InputDatePicker,{onChange:Ue,value:Pe,onOpenChange:Ve,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(ce,{color:"action"}),open:Be,style:de,wrapperStyle:me,placement:"bottom",pickerProps:{ref:j}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ نامه"})]}),e.jsx("div",{children:" "}),C==="solo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{closeMenuOnSelect:!0,options:Z,components:N,onChange:A,value:Z.find(l=>l.value===(t==null?void 0:t.relationshipWithParentID)),name:"personnelStatementOffTypeID",isLoading:Ee||Ye,isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"نوع سابقه"}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:q}),e.jsx("label",{className:t!=null&&t.personnelStatementOffTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"نوع سابقه"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",required:!0,name:"personNationalCode",id:"personNationalCode",onChange:V,value:o(t.personNationalCode)||""}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode",children:[e.jsx("span",{children:"*"})," شماره ملی"]}),e.jsx("div",{className:"inputBox__form--icon",children:Fe||Te?e.jsx(W,{"aria-label":"search",color:"info",disabled:!0,children:e.jsx(ts,{size:20,value:100})}):e.jsx(Q,{title:"استعلام",children:e.jsx("span",{children:e.jsx(W,{color:"primary",onClick:$e,disabled:!t.personNationalCode,children:e.jsx(ws,{})})})})})]}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:t.personFirstName||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام خانوادگی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:t.personLastName||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره کارمندی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:o(t.personID)||"-"})]})}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{closeMenuOnSelect:!0,components:N,onChange:A,isClearable:!0,options:He,name:"organazationID",placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نام سازمان"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,isLoading:ze||qe,styles:q}),e.jsxs("label",{className:t!=null&&t.organazationID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نام سازمان"]})]}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(z,{closeMenuOnSelect:!0,components:N,isClearable:!0,value:se.find(l=>l.value===(t==null?void 0:t.paymentTypeID))||null,onChange:A,options:se,name:"paymentTypeID",placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع پرداخت"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:q}),e.jsxs("label",{className:t!=null&&t.paymentTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع پرداخت"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:V,name:"paymentNO",value:o(t.paymentNO)||"",required:!0,id:"paymentNO"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"paymentNO",children:"شماره"})]}),C==="solo"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:V,name:"amount",value:o(t.amount)||"",required:!0,id:"amount"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"amount",children:"مبلغ"})]})}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(oe.InputDatePicker,{defaultValue:null,onChange:We,value:Ce,onOpenChange:Ae,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(ce,{color:"action"}),open:De,style:de,wrapperStyle:me,placement:"top",pickerProps:{ref:h}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پرداخت"})]})]}),C==="group"&&e.jsx("div",{style:{marginRight:"auto"},className:"flex-row flex-center",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",ref:n,style:{display:"none"},onChange:Qe,accept:".xlsx, .xls"}),e.jsx(k,{dir:"ltr",variant:"contained",color:"warning",disabled:_>0||D?!0:!t.fractionTypeID,endIcon:e.jsx(Os,{}),loading:Se||Ie,onClick:Ge,children:e.jsx("span",{children:"بارگزاری اکسل"})}),D&&e.jsxs("div",{className:"excel",style:{position:"absolute",top:"-100%",left:"50%",transform:"translateX(-50%)",width:"100%"},children:[e.jsx(W,{color:"error",size:"small",onClick:Je,sx:{padding:0},children:e.jsx(ve,{})}),e.jsx(Q,{title:D.name,children:e.jsx("span",{className:"excel__name",children:D.name})}),e.jsx("img",{src:Ds,className:"excel__image"})]}),e.jsxs(ge,{sx:{position:"absolute",left:"50%",bottom:"-40px",zIndex:2,width:"90%",transform:"translateX(-50%)",visibility:_>0?"visible":"hidden"},children:[e.jsx(is,{variant:"determinate",value:_,color:"warning",sx:{borderRadius:"40px"}}),e.jsxs("span",{style:{fontFamily:"IranYekan",fontSize:"12px"},children:[_,"%"]})]})]})})]})]})}function qs(){const[n,d]=x.useState({}),{periodsTableData:a}=F(j=>j.fractionData),p=K(),r=n.periodMonth===""||!n.periodMonth||n.periodYear===""||!n.periodYear,m=j=>{const{name:h,value:N}=j.target;d({...n,[h]:N})},s=()=>{if(a.some(i=>i.periodMonth===u(n.periodMonth)&&i.periodYear===u(n.periodYear))){B.error("دوره تکراری است");return}let h;!n.periodDay||n.periodDay===""?u(n.periodMonth)==="01"||u(n.periodMonth)==="02"||u(n.periodMonth)==="03"||u(n.periodMonth)==="04"||u(n.periodMonth)==="05"||u(n.periodMonth)==="06"?h="31":(u(n.periodMonth)==="07"||u(n.periodMonth)==="08"||u(n.periodMonth)==="09"||u(n.periodMonth)==="10"||u(n.periodMonth)==="11"||u(n.periodMonth)==="12")&&(h="30"):h=n.periodDay;const N={...n,periodDay:h,periodMonth:u(n.periodMonth),periodYear:u(n.periodYear),id:Date.now()};p(Ne(N)),d({})};return e.jsx("section",{className:"formContainer-transparent flex-col",children:e.jsxs("form",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodYear",value:o(n.periodYear)||"",onChange:m,required:!0,id:"periodYear",maxLength:4,minLength:4}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"periodYear",children:[e.jsx("span",{children:"*"})," سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodMonth",value:o(n.periodMonth)||"",onChange:m,required:!0,id:"periodMonth",maxLength:2}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"periodMonth",children:[e.jsx("span",{children:"*"})," ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodDay",value:o(n.periodDay)||"",onChange:m,required:!0,id:"periodDay",maxLength:2}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"periodDay",children:"روز"})]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(fe,{dir:"ltr",endIcon:e.jsx(Ss,{}),variant:"contained",color:"success",disabled:r,onClick:s,children:e.jsx("span",{children:"اضافه کردن دوره"})})})]})})}function ks(){const[n,d]=x.useState({}),[a,p]=x.useState([]),{periodsTableData:r}=F(i=>i.fractionData),m=K(),s=x.useCallback(i=>{m(os(i))},[m]);x.useEffect(()=>{const i=r.map((C,P)=>({id:C.id,periodRowNum:P+1,periodYear:C.periodYear||"-",periodMonth:C.periodMonth||"-",periodDay:C.periodDay||"-"}));p(i)},[r]);const j=x.useMemo(()=>[{accessorKey:"periodRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodYear",header:"سال",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodMonth",header:"ماه",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodDay",header:"روز",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"deletePeriod",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:i})=>e.jsx(Q,{title:"حذف دوره",children:e.jsx(W,{color:"error",sx:{padding:"0"},onClick:()=>s(i.original.id),children:e.jsx(ve,{})})})}],[s]),h=cs({...Is,columns:j,data:a,muiTableBodyRowProps:({row:i})=>({onClick:()=>d(()=>({[i.id]:!0})),selected:n[i.id],sx:{cursor:"pointer"}}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:i=>e.jsx(ds,{...i,page:o(i.page),slots:{previous:ms,next:ps,first:us,last:xs}})},getRowId:i=>i.id,onRowSelectionChange:d,state:{rowSelection:n}});return e.jsxs(e.Fragment,{children:[e.jsx(qs,{}),e.jsx(hs,{table:h})]})}function Ls(){const[n,d]=x.useState(!1),{fractionType:a}=F(P=>P.fractionData),{periodsTableData:p}=F(P=>P.fractionData),{data:r}=F(P=>P.calculateFractionData),[m,s]=x.useState({}),[j,{isLoading:h,isFetching:N}]=_s(),i=async P=>{var t;try{const _=p.map(D=>({period:u(`${D.periodYear}/${D.periodMonth}`),days:Number(u(D.periodDay))})),M=await j({...r,letterNO:u(r.letterNO),amount:u(r.amount),paymentNO:u(r.paymentNO),personNationalCode:u(r.personNationalCode),letterDate:new Date(r.letterDate),paymentDate:new Date(r.paymentDate),save:P,periods:_}).unwrap();d(!0),s(M.itemList[0]),B.success(M.message,{autoClose:2e3})}catch(_){console.log(_),B.error(((t=_==null?void 0:_.data)==null?void 0:t.message)||_.error,{autoClose:2e3})}};return e.jsx(e.Fragment,{children:a==="solo"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"محاسبه کسورات"})}),e.jsxs("div",{className:"formContainer flex-col",children:[e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("p",{className:"fraction-item",children:["جمع مشمول کسور :",e.jsx("span",{children:o(E(m==null?void 0:m.sumFraction))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارفرما :",e.jsxs("span",{children:[" ",o(E(m==null?void 0:m.sumFractionOrganization))||"-"]})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارمند :",e.jsx("span",{children:o(E(m==null?void 0:m.sumFractionPersonnel))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بدهی :",e.jsx("span",{children:o(E(m==null?void 0:m.debtor))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارفرما :"," ",e.jsx("span",{children:o(r==null?void 0:r.organazationPercent)+"%"||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارمند :"," ",e.jsxs("span",{children:[" ",o(r==null?void 0:r.personelPercent)+"%"||"-"]})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بستانکاری :"," ",e.jsx("span",{children:o(E(m==null?void 0:m.credit))||"-"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row flex-center",children:[e.jsx(k,{dir:"ltr",endIcon:e.jsx(Ts,{}),variant:"contained",type:"submit",loading:N||h,onClick:()=>i(!1),color:"warning",children:e.jsx("span",{children:"محاسبه"})}),e.jsx(k,{dir:"ltr",endIcon:e.jsx(fs,{}),disabled:!n,variant:"contained",type:"submit",loading:N||h,onClick:()=>i(!0),color:"success",children:e.jsx("span",{children:"ذخیره"})})]})]})]}):null})}var _e={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ue=T.createContext&&T.createContext(_e),I=function(){return I=Object.assign||function(n){for(var d,a=1,p=arguments.length;a<p;a++){d=arguments[a];for(var r in d)Object.prototype.hasOwnProperty.call(d,r)&&(n[r]=d[r])}return n},I.apply(this,arguments)},Rs=function(n,d){var a={};for(var p in n)Object.prototype.hasOwnProperty.call(n,p)&&d.indexOf(p)<0&&(a[p]=n[p]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,p=Object.getOwnPropertySymbols(n);r<p.length;r++)d.indexOf(p[r])<0&&Object.prototype.propertyIsEnumerable.call(n,p[r])&&(a[p[r]]=n[p[r]]);return a};function be(n){return n&&n.map(function(d,a){return T.createElement(d.tag,I({key:a},d.attr),be(d.child))})}function Es(n){return function(d){return T.createElement(Ys,I({attr:I({},n.attr)},d),be(n.child))}}function Ys(n){var d=function(a){var p=n.attr,r=n.size,m=n.title,s=Rs(n,["attr","size","title"]),j=r||a.size||"1em",h;return a.className&&(h=a.className),n.className&&(h=(h?h+" ":"")+n.className),T.createElement("svg",I({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,p,s,{className:h,style:I(I({color:n.color||a.color},a.style),n.style),height:j,width:j,xmlns:"http://www.w3.org/2000/svg"}),m&&T.createElement("title",null,m),n.children)};return ue!==void 0?T.createElement(ue.Consumer,null,function(a){return d(a)}):d(_e)}function xe(n){return Es({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}},{tag:"path",attr:{d:"M6.25 7.72h5v1.5h-5zM13 15.75h5v1.5h-5zM13 13.25h5v1.5h-5zM8 18h1.5v-2h2v-1.5h-2v-2H8v2H6V16h2zM14.09 10.95l1.41-1.41 1.41 1.41 1.06-1.06-1.41-1.42 1.41-1.41L16.91 6 15.5 7.41 14.09 6l-1.06 1.06 1.41 1.41-1.41 1.42z"}}]})(n)}function Hs(){const n=ye(),{handleSubmit:d,formState:{errors:a},control:p,register:r,watch:m}=js(),s=m(),j=()=>{console.log(s)};return e.jsxs("section",{className:"formContainer flex-col",children:[e.jsx("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:d(j),children:e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"inputBox__form",children:[a.nationaCode&&e.jsx("span",{className:"error-form",children:a.nationaCode.message}),e.jsx("input",{type:"text",id:"nationaCode",className:"inputBox__form--input",value:o(s==null?void 0:s.nationaCode)??"",required:!0,...r("nationaCode",{required:"شماره ملی اجباری است"})}),e.jsxs("label",{htmlFor:"nationaCode",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," شماره ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.name&&e.jsx("span",{className:"error-form",children:a.name.message}),e.jsx("input",{type:"text",id:"name",className:"inputBox__form--input",value:o(s==null?void 0:s.name)??"",required:!0,...r("name",{required:"نام اجباری است"})}),e.jsxs("label",{htmlFor:"name",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.familyName&&e.jsx("span",{className:"error-form",children:a.familyName.message}),e.jsx("input",{type:"text",id:"familyName",className:"inputBox__form--input",value:o(s==null?void 0:s.familyName)??"",required:!0,...r("familyName",{required:"نام خانوادگی اجباری است"})}),e.jsxs("label",{htmlFor:"familyName",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.familyName&&e.jsx("span",{className:"error-form",children:a.familyName.message}),e.jsx("input",{type:"text",id:"personID",className:"inputBox__form--input",value:o(s==null?void 0:s.personID)??"",required:!0,...r("personID",{required:"نام خانوادگی اجباری است"})}),e.jsxs("label",{htmlFor:"personID",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," شماره کارمندی"]})]}),e.jsx("div",{}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(te,{name:"calcualteType",control:p,render:({field:{onChange:N}})=>e.jsx(z,{closeMenuOnSelect:!0,components:n,isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع محاسیه کسور"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:q})}),e.jsxs("label",{className:s!=null&&s.calcualteType?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع محاسبه کسور"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(te,{name:"oraginaztionName",control:p,render:({field:{onChange:N}})=>e.jsx(z,{closeMenuOnSelect:!0,components:n,isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نام سازمان"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:q})}),e.jsxs("label",{className:s!=null&&s.oraginaztionName?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نام سازمان"]})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(k,{loading:!1,type:"submit",endIcon:e.jsx(xe,{}),variant:"contained",color:"warning",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"محاسبه سنوات"})})})]})}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:d(j),children:[e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," مبلغ مشمول کسور"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," مبلغ منتقله"]})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"سنوات قابل محاسبه :"}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ از :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ تا :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(ie,{size:"small",color:"success",checked:!!(s!=null&&s.isTadiye),id:"isInstallment",sx:{padding:.5},...r("isTadiye")}),e.jsx("label",{htmlFor:"isTadiye",className:"checkboxContainer__label",children:"تاخیر و تادیه"})]}),s.isTadiye&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ از :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ تا :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(k,{loading:!1,type:"submit",endIcon:e.jsx(xe,{}),variant:"contained",color:"warning",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"محاسبه کسور"})})})]}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("p",{className:"fraction-item",children:["جمع مشمول کسور :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارفرما : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارمند : ",e.jsx("span",{children:"-"})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsxs("p",{className:"fraction-item",children:["مبلغ کسور :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارفرما : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارمند : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بدهی :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بستانکاری : ",e.jsx("span",{children:"-"})]})]}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:d(j),children:[e.jsxs("section",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(ie,{size:"small",color:"success",checked:!!(s!=null&&s.isInstallment),id:"isInstallment",sx:{padding:.5},...r("isInstallment")}),e.jsx("label",{htmlFor:"isInstallment",className:"checkboxContainer__label",children:"قسطی"})]}),s.isInstallment&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"مبلغ قسط"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"تعداد قسط"]})]})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(k,{loading:!1,type:"submit",endIcon:e.jsx(je,{}),variant:"contained",color:"success",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"ذخیره"})})})]})]})}function on(){const[n,d]=x.useState("1"),{fractionType:a}=F(s=>s.fractionData),p=K();x.useEffect(()=>()=>{p(Ne([])),p(v({}))},[p]);const r=(s,j)=>{d(j)};return e.jsxs("section",{className:"flex-col u-margin-bottom-xl",children:[e.jsx("div",{className:"title-primary--container flex-row flex-center",children:e.jsx("h4",{className:"title-primary",children:e.jsx("span",{className:"title-primary--underline",children:"کسورات"})})}),e.jsx("div",{children:e.jsxs(Ms,{value:n,children:[e.jsx(ge,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(Fs,{onChange:r,"aria-label":"tabs",children:[e.jsx(le,{label:"ثبت کسورات",value:"1"}),e.jsx(le,{label:"محاسبه کسورات",value:"2"})]})}),e.jsxs(pe,{value:"1",sx:{padding:"0"},children:[e.jsx(zs,{}),a==="solo"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"لیست دوره ها"})}),e.jsx(ks,{})]}),e.jsx(Ls,{})]}),e.jsx(pe,{value:"2",sx:{padding:"0"},children:e.jsx(Hs,{})})]})})]})}export{on as default};
