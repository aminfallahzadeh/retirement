var se=Object.defineProperty;var ne=(o,i,t)=>i in o?se(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var L=(o,i,t)=>ne(o,typeof i!="symbol"?i+"":i,t);import{r as d,o as F,m as R,j as e,a,b as P,B as I,C as k,z as c,p as re,T as f,I as C,t as ae,e as oe,al as ie,v as le}from"./index-BSRVVr8n.js";import{u as Z}from"./personApi-DxjGnvyA.js";import{a as X}from"./sharedApi-Bhit52A6.js";import{g as te,h as ce,i as de,j as he}from"./useFetchLookUpData-3d-SvVf8.js";/* empty css                 */import{u as $,P as E,C as M,a as U,L as G,F as Q,b as V,T as w}from"./index.esm-BxY0lyNJ.js";import{M as D}from"./Modal-CHpckkD-.js";import{U as me}from"./const-BYnLywqp.js";import{D as xe,$ as fe}from"./module-VPD-lIuN.js";import{C as O}from"./index-BywiX4DN.js";import{d as Y}from"./table-options-DlAa6-Lw.js";import{S as W}from"./index-Czcrc2XJ.js";import{E as ue}from"./VisibilityOutlined-YP-_yELv.js";import{R as q}from"./Refresh-DHTXiARq.js";import{R as je}from"./RetiredStatementsGrid-JPiiLuJ5.js";import{T as pe,a as ge,b as K}from"./TabPanel-Cyg5lnFe.js";import"./requestApi-BdwrSs1O.js";import"./Save-BGOXVp9e.js";import"./react-select-animated.esm-C8qvyk3o.js";import"./statementApi-CwRN-Mss.js";import"./index.esm-CjA9BksF.js";import"./datePicker-D-YGL39f.js";import"./reactSelect-BGq5yAQc.js";import"./DeleteOutline-DTlBR821.js";import"./Add-BfxQkocC.js";class be{constructor(i=""){L(this,"num");L(this,"separator",",");this.num=i}toPersian(){if(this.num||this.num==="0"){const i=["۰","۱","۲","۳","۴","۵","۶","۷","۸","۹"];return String(this.num).replace(/\d/g,t=>i[parseInt(t)])}return""}toEnglish(){let i=this.num;if(typeof i=="string")for(let t=0;t<10;t++)i=i.replace(me[t],String(t));return i}toSeparated(){const i=parseFloat(this.toEnglish());if(isNaN(i))return"";if(i===0)return"۰";let t="";const g=i<0,n=Math.abs(i),[b,l]=n.toString().split(".");for(let x=0;x<b.length;x++){const u=b.substr(b.length-x-1,1);x%3===0&&x>0?t=u+this.separator+t:t=u+t}return t=l?t+"."+l:t,this.num=t,t=this.toPersian(),g?"-"+t:t}}function Ne(){const[o,i]=d.useState({}),[t,g]=d.useState(""),[n,b]=d.useState(""),l=F(),x=new URLSearchParams(l.search),u=x.get("personID"),z=x.get("personDeathDate"),{data:j,isSuccess:_,error:h}=Z({personID:u});d.useEffect(()=>{_&&i(j==null?void 0:j.itemList[0])},[_,j==null?void 0:j.itemList]),d.useEffect(()=>{var s;h&&(console.log(h),R.error(((s=h==null?void 0:h.data)==null?void 0:s.message)||h.error,{autoClose:2e3}))},[h]);const{data:N,isSuccess:S}=X({lookUpType:"Gender",lookUpID:o==null?void 0:o.genderID}),{data:p,isSuccess:y}=X({lookUpType:"MaritialStatus",lookUpID:o==null?void 0:o.maritalStatusID});return d.useEffect(()=>{var s;y&&(((s=p==null?void 0:p.itemList)==null?void 0:s.length)>1?g(null):g(p.itemList[0].lookUpName))},[y,p==null?void 0:p.itemList]),d.useEffect(()=>{var s;S&&(((s=N==null?void 0:N.itemList)==null?void 0:s.length)>1?b(null):b(N.itemList[0].lookUpName))},[S,N==null?void 0:N.itemList]),e.jsx("section",{className:"formContainer",children:e.jsxs("form",{method:"POST",className:"grid grid--col-4",children:[e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"کد ملی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:a(o==null?void 0:o.personNationalCode)})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره کارمندی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:a((o==null?void 0:o.personnelID)||"-")})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:o==null?void 0:o.personFirstName})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام خانوادگی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:o==null?void 0:o.personLastName})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره شناسنامه"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:a((o==null?void 0:o.personCertificateNo)||"-")})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام پدر"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(o==null?void 0:o.personFatherName)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:P(o==null?void 0:o.personBirthDate)})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"محل تولد"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(o==null?void 0:o.personBirthPlace)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"جنسیت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"وضعیت تاهل"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:t||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"مدرک تحصیلی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(o==null?void 0:o.educationTypeCaption)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"ورود به خدمت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:P(o==null?void 0:o.employmentDate)||"-"})]})}),z!=="null"&&e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ فوت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:P(z)})]})})]})})}function Se({statementID:o}){const i=d.useRef(),g=new URLSearchParams(location.search).get("personID"),[n,b]=d.useState(null),[l,x]=d.useState(null),[u,z]=d.useState([]),[j,_]=d.useState([]),[h,N]=d.useState([]),{data:S,isSuccess:p,isLoading:y,isFetching:r}=te({personnelStatementID:o}),{data:s,isSuccess:T,isLoading:B,isFetching:H}=Z({personID:g});return d.useEffect(()=>{var v;if(p){const J=((v=S==null?void 0:S.itemList[0])==null?void 0:v.retiredRecorded1.trim()).match(/.{1,2}/g);N(J),b(S.itemList[0]),z(S.itemList[0].personnelStatementItems)}},[p,S]),d.useEffect(()=>{if(T){x(s.itemList[0]);const v=P(s.itemList[0].personBirthDate).split("/");_(v)}},[T,s]),e.jsx(e.Fragment,{children:y||r||B||H||n===null||l===null?e.jsx(D,{title:"در حال بارگذاری...",children:e.jsx(I,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(k,{color:"primary"})})}):e.jsxs("div",{className:"slip-container",children:[e.jsxs("div",{className:"slip-container",ref:i,children:[e.jsxs("div",{className:"slip-container__personnel-statement-header",children:[e.jsx("p",{className:"slip-container__logo--sub",children:"شهرداری تهران"}),e.jsx("h5",{children:"حکم کارگزینی"}),e.jsxs("p",{className:"slip-container__qr--serial",children:["شماره سریال :",e.jsx("span",{children:a(n==null?void 0:n.personnelStatementSerial)||"-"})]})]}),e.jsxs("table",{className:"slip-container__personnel-statement-table form-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"no-border-left",children:"۱- شماره مستخدم : "}),e.jsx("th",{className:"no-border-right",children:a(n==null?void 0:n.personnelID)}),e.jsx("th",{className:"no-border-left",children:"۲- شماره ملی : "}),e.jsx("th",{className:"no-border-right",children:a(l==null?void 0:l.personNationalCode)||"-"}),e.jsx("th",{className:"no-border-left",children:"۳- کد پستی :"}),e.jsx("th",{className:"no-border-right",children:a(l==null?void 0:l.personPostalCode)||"-"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۴- نام :"}),e.jsx("td",{className:"no-border-right",children:l==null?void 0:l.personFirstName}),e.jsx("td",{className:"no-border-left",children:"۵- نام خانوادگی :"}),e.jsx("td",{className:"no-border-right",children:l==null?void 0:l.personLastName}),e.jsx("td",{className:"no-border-left",children:"۶- نام پدر :"}),e.jsx("td",{className:"no-border-right",children:l==null?void 0:l.personFatherName})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۷- شماره شناسنامه :"}),e.jsx("td",{className:"no-border-right",children:a(l==null?void 0:l.personCertificateNo)||"-"}),e.jsx("td",{className:"no-border-left",children:"۸- محل صدور :‌"}),e.jsx("td",{className:"no-border-right"}),e.jsx("td",{className:"no-border-left",children:"۹- استان :"}),e.jsx("td",{className:"no-border-right"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left no-border-bottom",colSpan:2,children:"۱۰- تاریخ و محل تولد :"}),e.jsx("td",{className:"no-border-right no-border-bottom",children:n==null?void 0:n.personBirthPlace}),e.jsx("td",{className:"no-border-bottom",colSpan:3,children:"۱۱- بالاترین مدرک و رشته تحصیلی‌ :"})]}),e.jsxs("tr",{children:[e.jsxs("td",{className:"no-border-top no-border-left",children:["روز : ",j[2]]}),e.jsxs("td",{className:"no-border-top no-border-right no-border-left",children:["ماه : ",j[1]]}),e.jsxs("td",{className:"no-border-top no-border-right",children:["سال : ",j[0]]}),e.jsxs("td",{className:"no-border-top no-border-left",children:["مقطع تحصیلی : ",(n==null?void 0:n.educationLicence)||"-"]}),e.jsxs("td",{className:"no-border-top no-border-right no-border-left",children:["رشته : ",(n==null?void 0:n.eduBranch)||"-"]}),e.jsxs("td",{className:"no-border-top no-border-right",children:["گرایش : ",(n==null?void 0:n.eduBranchArea)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"no-border-left",children:"۱۲- عنوان پست سازمانی :"}),e.jsx("td",{className:"no-border-right no-border-left",children:(n==null?void 0:n.positionName)||"-"}),e.jsx("td",{className:"no-border-right"}),e.jsx("td",{className:"no-border-left",children:"شماره پست :"}),e.jsxs("td",{className:"no-border-right",children:[a(n==null?void 0:n.positionCode)||"-"," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",colSpan:2,children:"۱۳- رسته :"}),e.jsxs("td",{className:"no-border-left",colSpan:2,children:["رشته و طبفه شغلی : ",n==null?void 0:n.jobName]}),e.jsxs("td",{children:["کد شغل : ",(n==null?void 0:n.jobCode)||"-"]}),e.jsxs("td",{children:["مرتبه : ",(n==null?void 0:n.jobDegree1)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"۱۴- گروه :"}),e.jsxs("td",{colSpan:3,className:"no-border-left",children:["۱۵- سنوات فابل قبول از نظر بازنشستگی : ",e.jsx("br",{}),e.jsxs("div",{className:"w-full flex justify-between items-center px-10 mt-1",children:[e.jsxs("span",{children:["روز : ",a(h[2])]}),e.jsxs("span",{children:["ماه : ",a(h[1])]}),e.jsxs("span",{children:["سال : ",a(h[0])]})]})]}),e.jsxs("td",{colSpan:2,children:["صندوق بازنشستگی : ",n==null?void 0:n.payLocation]})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:6,children:e.jsxs("div",{className:"slip-container__person-info-table--checkbox",children:[e.jsx("span",{children:"۱۶- وضعیت ایثارگری :"}),e.jsxs("div",{children:[e.jsx(O,{size:"small",color:"success",name:"personIsSacrificedFamily",id:"personIsSacrificedFamily",disabled:!0,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificedFamily",children:"خانواده شهید"})]}),e.jsxs("div",{children:[e.jsx(O,{size:"small",color:"success",name:"personIsValiant",id:"personIsValiant",disabled:!0,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsValiant",children:"جانباز"})]}),e.jsxs("div",{children:[e.jsx(O,{size:"small",color:"success",name:"personIsCaptive",disabled:!0,checked:l==null?void 0:l.isCaptivity,id:"personIsCaptive",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsCaptive",children:"آزاده"})]}),e.jsxs("div",{children:[e.jsx(O,{size:"small",color:"success",disabled:!0,name:"personIsWarrior",id:"personIsWarrior",checked:l==null?void 0:l.isWar,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsWarrior",children:"رزمنده"})]}),e.jsxs("div",{children:[e.jsx(O,{size:"small",color:"success",name:"personIsSacrificed",disabled:!0,checked:l==null?void 0:l.isMartyrs,id:"personIsSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificed",children:"سایر"})]})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:3,children:["۱۷- واحد سازمانی : ",n==null?void 0:n.organizationUnit]}),e.jsxs("td",{colSpan:3,children:["۱۸- محل خدمت : ",(n==null?void 0:n.workPlace)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۱۹- وضعیت تاهل :"}),e.jsx("td",{className:"no-border-right",children:n==null?void 0:n.maritalStatusIDName}),e.jsxs("td",{children:["تعداد فرزندان :"," ",a(n==null?void 0:n.childCount)]}),e.jsx("td",{colSpan:3,children:"۲۰- ضریب افزایش سنواتی :"})]}),e.jsxs("tr",{children:[e.jsxs("th",{colSpan:3,children:["۲۱- نوع حکم : ",(n==null?void 0:n.orderType)||"-"]}),e.jsx("th",{colSpan:3,children:"حقوق و فوق العاده ها به ریال :"})]})]})]}),e.jsxs("div",{className:"flex justify-center items-start w-full gap-x-1",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{style:{verticalAlign:"top"},children:"۲۲- شرح حکم :"})}),e.jsx("tr",{children:e.jsx("td",{children:(n==null?void 0:n.description)||"-"})})]})}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{children:["۲۳ - تاریخ اجرای حکم :"," ",P(n==null?void 0:n.personnelStatementRunDate)]})}),e.jsx("tr",{children:e.jsxs("td",{children:["ﺷﻤﺎﺭﻩ ﺣﮑﻢ :"," ",a(n==null?void 0:n.code)]})}),e.jsx("tr",{children:e.jsxs("td",{children:["۲۴- ﺗﺎﺭﯾﺦ ﺻﺪﻭﺭ ﺣﮑﻢ :"," ",P(n==null?void 0:n.registerDate)||"-"]})})]})})]}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[u==null?void 0:u.map((v,A)=>{const ee=new be(v.personnelStatementItemAmount.toString()).toSeparated();return e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"top"},children:v.personnelStatementItemTypeName}),e.jsx("td",{className:"text-center",children:ee})]},A)}),e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{children:"جمع مشمول کسور"}),e.jsx("td",{className:"text-center",children:c(a(n==null?void 0:n.fractionBaseAmount))})]})]})})]}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:6,children:"۲۵- ﺟﻤﻊ ﺣﻘﻮﻕ ﻭ ﻣﺰﺍﯾﺎ ﺑﻪ ﺣﺮﻭﻑ :"})}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"no-border-bottom",children:"۲۶- ﻧﺎﻡ ﻭ ﻧﺎﻡ ﺧﺎﻧﻮﺍﺩﮔﯽ ﻣﻘﺎﻡ ﻣﺴﺌﻮﻝ :"}),e.jsx("td",{colSpan:3,className:"no-border-bottom",children:"ﻧﺴﺨﻪ ﻣﺮﺑﻮﻁ ﺑﻪ :"})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"no-border-top",children:"ﻋﻨﻮﺍﻥ ﭘﺴﺖ ﺛﺎﺑﺖ ﺳﺎﺯﻣﺎﻧﯽ :"}),e.jsx("td",{colSpan:3,style:{justifyContent:"center",textAlign:"center"},className:"no-border-top"})]})]})}),e.jsx("p",{style:{textAlign:"right",fontSize:"12px",justifyContent:"right",width:"100%"},children:"ﮐﺎﺭﺑﺮ :"})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(re,{dir:"ltr",endIcon:e.jsx(xe,{}),onClick:()=>fe(i,{filename:"حکم کارمندی.pdf"}),variant:"contained",color:"primary",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"دانلود حکم"})})})]})})}function ye(){const[o,i]=d.useState(null),[t,g]=d.useState(!1),[n,b]=d.useState({}),[l,x]=d.useState([]),u=F(),j=new URLSearchParams(u.search).get("personID"),{data:_,isSuccess:h,isLoading:N,isFetching:S,refetch:p,error:y}=ce({personID:j}),r=()=>{p()};d.useEffect(()=>{if(h){const m=_.itemList.map((v,A)=>({id:v.personnelStatementID,personnelStatementRowNum:A+1,personnelStatementSerial:v.personnelStatementSerial,personnelStatementNumber:v.personnelStatementID,personnelStatementTypeName:v.personnelStatementTypeName,personnelStatementIssueDate:v.insertTime,personnelStatementRunDate:v.personnelStatementRunDate}));x(m)}},[h,_]),d.useEffect(()=>{var m;y&&(console.log(y),R.error(((m=y==null?void 0:y.data)==null?void 0:m.message)||y.error,{autoClose:2e3}))},[y]);const s=()=>{g(!0)},T=d.useMemo(()=>[{accessorKey:"personnelStatementRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:m})=>e.jsx("div",{children:a(m)})},{accessorKey:"personnelStatementTypeName",header:"نوع حکم",size:20},{accessorKey:"personnelStatementSerial",header:"سریال حکم",size:20,Cell:({renderedCellValue:m})=>e.jsx("div",{children:a(m)})},{accessorKey:"personnelStatementNumber",header:"شماره حکم",size:20,Cell:({renderedCellValue:m})=>e.jsx("div",{children:a(m)||"-"})},{accessorKey:"personnelStatementIssueDate",header:"تاریخ صدور",size:20,Cell:({renderedCellValue:m})=>e.jsx("div",{children:P(m)})},{accessorKey:"personnelStatementRunDate",header:"تاریخ اجرا",size:20,Cell:({renderedCellValue:m})=>e.jsx("div",{children:P(m)})},{accessorKey:"downloadStatement",header:"مشاهده",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:m})=>e.jsx(f,{title:`سریال ${a(m.original.personnelStatementSerial)}`,children:e.jsx(C,{color:"primary",sx:{padding:"0"},onClick:s,children:e.jsx(ue,{})})})}],[]),B=$({...Y,columns:T,data:l,muiTableBodyRowProps:({row:m})=>({onClick:()=>b(()=>({[m.id]:!0})),selected:n[m.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(I,{children:S?e.jsx(C,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(k,{size:20,value:100})}):e.jsx(f,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(C,{"aria-label":"refresh",color:"info",onClick:r,children:e.jsx(q,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:m=>e.jsx(E,{...m,page:a(m.page),slots:{previous:M,next:U,first:G,last:Q}})},getRowId:m=>m.id,onRowSelectionChange:b,state:{rowSelection:n}});return d.useEffect(()=>{const m=Object.keys(B.getState().rowSelection)[0];m&&i(m)},[B,n]),e.jsx(e.Fragment,{children:N?e.jsx("div",{className:"skeleton-lg",children:e.jsx(W,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[t&&o?e.jsx(D,{closeModal:()=>g(!1),children:e.jsx(Se,{statementID:o})}):null,e.jsx(V,{table:B})]})})}const ve=()=>{const[o,i]=d.useState({}),[t,g]=d.useState([]),n=F(),l=new URLSearchParams(n.search).get("personID"),{data:x,isSuccess:u,isLoading:z,isFetching:j,refetch:_,error:h}=de({personID:l}),N=()=>{_()};d.useEffect(()=>{if(u){const r=x.itemList.map(s=>({fractionYear:s.years??"-",chestName:s.chestName??"-",fractiontypeName:s.fractiontypeName??"-",fractionOrganization:s.organizationName??"-",farv:s.fractionTotalAmount1??"-",farvPersonnel:s.fractionPersonnelTotalAmount1??"-",farvOrganization:s.fractionOrganizationTotalAmount1??"-",ordib:s.fractionTotalAmount2??"-",ordibPersonnel:s.fractionPersonnelTotalAmount2??"-",ordibOrganization:s.fractionOrganizationTotalAmount2??"-",khord:s.fractionTotalAmount3??"-",khordPersonnel:s.fractionPersonnelTotalAmount3??"-",khordOrganization:s.fractionOrganizationTotalAmount3??"-",tir:s.fractionTotalAmount4??"-",tirPersonnel:s.fractionPersonnelTotalAmount4??"-",tirOrganization:s.fractionOrganizationTotalAmount4??"-",mordad:s.fractionTotalAmount5??"-",mordadPersonnel:s.fractionPersonnelTotalAmount5??"-",mordadOrganization:s.fractionOrganizationTotalAmount5??"-",shah:s.fractionTotalAmount6??"-",shahPersonnel:s.fractionPersonnelTotalAmount6??"-",shahOrganization:s.fractionOrganizationTotalAmount6??"-",mehr:s.fractionTotalAmount7??"-",mehrPersonnel:s.fractionPersonnelTotalAmount7??"-",mehrOrganization:s.fractionOrganizationTotalAmount7??"-",aban:s.fractionTotalAmount8??"-",abanPersonnel:s.fractionPersonnelTotalAmount8??"-",abanOrganization:s.fractionOrganizationTotalAmount8??"-",azar:s.fractionTotalAmount9??"-",azarPersonnel:s.fractionPersonnelTotalAmount9??"-",azarOrganization:s.fractionOrganizationTotalAmount9??"-",dey:s.fractionTotalAmount10??"-",deyPersonnel:s.fractionPersonnelTotalAmount10??"-",deyOrganization:s.fractionOrganizationTotalAmount10??"-",bahman:s.fractionTotalAmount11??"-",bahmanPersonnel:s.fractionPersonnelTotalAmount11??"-",bahmanOrganization:s.fractionOrganizationTotalAmount11??"-",esfand:s.fractionTotalAmount12??"-",esfandPersonnel:s.fractionPersonnelTotalAmount12??"-",esfandOrganization:s.fractionOrganizationTotalAmount12??"-"}));g(r)}},[u,x]),d.useEffect(()=>{var r;h&&(console.log(h),R.error(((r=h==null?void 0:h.data)==null?void 0:r.message)||h.error,{autoClose:2e3}))},[h]);const S=d.useMemo(()=>[{accessorKey:"fractionYear",header:"سال",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"fractiontypeName",header:"نوع سابقه",size:20},{accessorKey:"chestName",header:"نام صندوق",size:20},{accessorKey:"fractionOrganization",header:"سازمان",size:20},{accessorKey:"farv",header:"فروردین",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.farvOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.farvPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"ordib",header:"اردیبهشت",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.ordibOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.ordibPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"khord",header:"خرداد",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.khordOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.khordPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"tir",header:"تیر",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.tirOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.tirPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"mordad",header:"مرداد",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.mordadOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.mordadPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"shah",header:"شهریور",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.shahOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.shahPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"mehr",header:"مهر",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.mehrOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.mehrPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"aban",header:"آبان",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.abanOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.abanPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"azar",header:"آذر",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.azarOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.azarPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"dey",header:"دی",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.deyOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.deyPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"bahman",header:"بهمن",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.bahmanOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.bahmanPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})},{accessorKey:"esfand",header:"اسفند",size:20,Cell:({renderedCellValue:r,row:s})=>e.jsx(f,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${c(a(s.original.esfandOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${c(a(s.original.esfandPersonnel))}`]}),children:e.jsx("div",{children:c(a(r))})})}],[]),p=$({...Y,columns:S,data:t,muiTableBodyRowProps:({row:r})=>({onClick:()=>i(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(I,{children:j?e.jsx(C,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(k,{size:20,value:100})}):e.jsx(f,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(C,{"aria-label":"refresh",color:"info",onClick:N,children:e.jsx(q,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:r=>e.jsx(E,{...r,page:a(r.page),slots:{previous:M,next:U,first:G,last:Q}})},getRowId:r=>r.id,onRowSelectionChange:i,state:{rowSelection:o}});return e.jsx(e.Fragment,{children:z?e.jsx("div",{className:"skeleton-lg",children:e.jsx(W,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(V,{table:p})})};function _e(){const[o,i]=d.useState({}),[t,g]=d.useState([]),n=F(),l=new URLSearchParams(n.search).get("personID"),{data:x,isSuccess:u,isLoading:z,isFetching:j,refetch:_,error:h}=he({personID:l}),N=()=>{_()};d.useEffect(()=>{if(u){const r=x.itemList.map((s,T)=>({rowNum:T+1,personnelStatementOffTypeName:s.personnelStatementOffTypeName,personnelStatementOffYear:s.personnelStatementOffYear,personnelStatementOffMonth:s.personnelStatementOffMonth,personnelStatementOffDay:s.personnelStatementOffDay}));g(r)}},[u,x]),d.useEffect(()=>{var r;h&&(console.log(h),R.error(((r=h==null?void 0:h.data)==null?void 0:r.message)||h.error,{autoClose:2e3}))},[h]);const S=d.useMemo(()=>[{accessorKey:"rowNum",header:"ردیف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"personnelStatementOffTypeName",header:"نوع خدمت",size:20},{accessorKey:"personnelStatementOffYear",header:"سال",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"personnelStatementOffMonth",header:"ماه",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"personnelStatementOffDay",header:"روز",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"reaclTotal",header:"جمع واقعی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})},{accessorKey:"total",header:"جمع",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:a(r)})}],[]),p=$({...Y,columns:S,data:t,muiTableBodyRowProps:({row:r})=>({onClick:()=>i(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(I,{children:j?e.jsx(C,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(k,{size:20,value:100})}):e.jsx(f,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(C,{"aria-label":"refresh",color:"info",onClick:N,children:e.jsx(q,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:r=>e.jsx(E,{...r,page:a(r.page),slots:{previous:M,next:U,first:G,last:Q}})},getRowId:r=>r.id,onRowSelectionChange:i,state:{rowSelection:o}});return e.jsx(e.Fragment,{children:z?e.jsx("div",{className:"skeleton-lg",children:e.jsx(W,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(V,{table:p})})}function ze(){const[o,i]=d.useState("1"),t=(n,b)=>{i(b)};return e.jsx("section",{className:"u-margin-top-lg",children:e.jsxs(pe,{value:o,children:[e.jsx(I,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(ge,{onChange:t,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(w,{label:"احکام کارمندی",value:"1"}),e.jsx(w,{label:"تعرفه",value:"2"}),e.jsx(w,{label:"احکام بازنشستگی",value:"3"})]})}),e.jsx(K,{value:"1",sx:{padding:"0"},children:e.jsx(ye,{})}),e.jsx(K,{value:"2",sx:{padding:"0"},children:e.jsxs("div",{className:"flex-col",children:[e.jsx(_e,{}),e.jsx(ve,{})]})}),e.jsx(K,{value:"3",sx:{padding:"0"},children:e.jsx(je,{})})]})})}function Ze(){const[o]=ae(),i=oe(),t=o.get("personID");return d.useEffect(()=>{t||i(-1)},[t,i]),t?e.jsxs("section",{className:"flex-col u-margin-bottom-md",children:[e.jsxs("div",{className:"title-primary--container flex-row flex-center",children:[e.jsxs("h4",{className:"title-primary",children:[e.jsx("span",{className:"title-primary--underline"}),"اطلاعات کارمند"]}),e.jsx("div",{style:{marginRight:"auto"},className:"back-button",children:e.jsx(f,{title:"بازگشت",children:e.jsx("span",{children:e.jsx(C,{color:"primary",onClick:()=>i(-1),children:e.jsx(le,{})})})})})]}),e.jsx(Ne,{}),e.jsx(ze,{})]}):e.jsx(ie,{})}export{Ze as default};
