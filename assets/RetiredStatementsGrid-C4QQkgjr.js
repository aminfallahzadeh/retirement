import{dJ as M,j as e,T as l,g7 as _,g8 as p,I,R as $,eK as K,eI as z,eJ as O,eL as B,f as h,eM as P,O as G,L as T,fT as k,E as F,B as U,C as q,er as J,g9 as Q,r as m,A as V,z as W,dK as Y,G as H,au as X}from"./index-Celh3WKK.js";import{j as Z,k as w}from"./statementApi-z0RhQNqU.js";import{D as ee}from"./DeleteOutline-BzsYrv9z.js";import{A as te}from"./Add-CMf60KAA.js";const se=(a,r)=>{const n=[{accessorKey:"retirementStatementRowNo",size:20,header:$,enableColumnActions:!1,enableSorting:!1},{accessorKey:"retirementStatementNo",size:20,header:K},{accessorKey:"retirementStatementSerial",size:20,header:z},{accessorKey:"retirementStatementTypeName",size:20,header:O},{accessorKey:"retirementStatementIssueDate",header:B,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"retirementStatementRunDate",header:P,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"observeRetirementStatement",header:G,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx(T,{to:`${k}document/rstatement?statementID=${t.original.id}&personID=${t.original.personID}&personDeathDate=${t.original.personDeathDate}`,children:e.jsx(F,{color:"primary"})})})}];return r&&n.push({accessorKey:"deleteRetirementStatement",header:M,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:t.original.retirementStatementIssueConfirmDate?_:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx("span",{children:e.jsx(I,{disabled:!!t.original.retirementStatementIssueConfirmDate,color:"error",onClick:()=>a(t.original.id),sx:{padding:"0"},children:e.jsx(ee,{})})})})}),n},ae=(a,r,n,t)=>e.jsx(U,{children:r||a?e.jsx(I,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(q,{size:20,value:100})}):e.jsx(l,{title:J,children:e.jsx(T,{to:`${Q}?personID=${n}&requestID=${t}`,children:e.jsx(te,{fontSize:"small",color:"success"})})})}),le=({columns:a,hasDeleteAction:r=!0})=>{const[n,t]=m.useState([]),[g,i]=V(!1),[f,R]=m.useState(""),[c]=W(),d=c.get("personID"),x=c.get("requestID"),{data:S,isSuccess:u,isLoading:D,isFetching:E,refetch:j}=Z({personID:d}),[A,{isLoading:C}]=w();m.useEffect(()=>{if(u){const o=S.map((s,v)=>({id:s.retirementStatementID,retirementStatementRowNo:v+1,retirementStatementSerial:s.retirementStatementSerial,retirementStatementTypeName:s.retirementStatementTypeName,retirementStatementNo:s.retirementStatementNo||"-",retirementStatementIssueDate:s.retirementStatementIssueDate,retirementStatementRunDate:s.retirementStatementRunDate,retirementStatementIssueConfirmDate:s.retirementStatementIssueConfirmDate,personID:s.personID,personDeathDate:s.personDeathDate}));t(o)}},[u,S]);const N=o=>{R(o),i()},y=async()=>{const o=await A({rsID:f}).unwrap();X.success(o.message),j(),i()},L=se(N,r),b=ae(D,E,d,x);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{open:g,onClose:i,isLoading:C,handleRemove:y}),e.jsx(H,{data:n,columns:a||L,scroll:!0,topBarActions:b,isLoading:D,isFetching:E,sorting:[{id:"retirementStatementIssueDate",desc:!0}]})]})};export{le as R};
