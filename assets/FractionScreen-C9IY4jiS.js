import{c as me,j as e,r as m,G as xe,p as U,$ as I,cz as Qe,cA as Ze,a3 as es,cB as ss,cC as ns,O as K,al as as,cD as v,a5 as rs,ao as is,Y as ue,ap as he,U as T,V as b,W as w,a as o,a6 as ae,a7 as re,a8 as ie,a9 as te,I as A,k as ts,T as X,w as q,ak as fe,B as je,bt as ls,cE as os,D as p,A as B,am as cs,cF as ge,cG as ds,u as ps,Z as ms,P as xs,C as us,b as hs,L as fs,F as js,d as gs,cH as Ns,as as L,X as ys,cI as vs,h as _s,S as le,ad as oe,ay as bs,az as Ps,aA as ce,aG as de}from"./index-Bx2CJIsO.js";import{r as Cs,u as Bs}from"./xlsx-uoQkVabA.js";import{U as Ds,e as Os}from"./excel-icon-DRauvMBs.js";const Fs=me([e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H5V5h14z"},"0"),e.jsx("path",{d:"M6.25 7.72h5v1.5h-5zM13 15.75h5v1.5h-5zm0-2.5h5v1.5h-5zM8 18h1.5v-2h2v-1.5h-2v-2H8v2H6V16h2zm6.09-7.05 1.41-1.41 1.41 1.41 1.06-1.06-1.41-1.42 1.41-1.41L16.91 6 15.5 7.41 14.09 6l-1.06 1.06 1.41 1.41-1.41 1.42z"},"1")],"CalculateOutlined"),Ss=me(e.jsxs("g",{fillRule:"evenodd",children:[e.jsx("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 16H4V5h16z"}),e.jsx("path",{d:"M19.41 10.42 17.99 9l-3.17 3.17-1.41-1.42L12 12.16 14.82 15zM5 7h5v2H5zm0 4h5v2H5zm0 4h5v2H5z"})]}),"FactCheckOutlined");function Is(){const t=m.useRef(null),[j,a]=m.useState(!1),[g,r]=m.useState(!1),[d,s]=m.useState(0),u=m.useRef(null),h=m.useRef(null),N=xe(),i=U(),[C,P]=m.useState("group"),{data:n}=I(l=>l.calculateFractionData),[_,S]=m.useState(0),[D,G]=m.useState(null),[Ne,R]=m.useState(null),[ye,Y]=m.useState(null),[ve,z]=m.useState(!1),[_e,k]=m.useState(!1),[be,{isLoading:Pe,isFetching:Ce}]=Qe(),[Be,{isLoading:De,isFetching:Oe}]=Ze(),{organizations:Fe,organizationIsLoading:Se,organizationIsFetching:Ie}=es({}),{fractionTypes:Me,fractionTypesIsLoading:Te,fractionTypesIsFetching:we}=ss(),{personnelStatementOffTypes:W,personnelStatementOffTypesIsLoading:qe,personnelStatementOffTypesIsFetching:ze}=ns(),J=K(W,"personnelStatementOffTypeID","personnelStatementOffTypeName"),Q=K(Me,"fractionTypeid","fractionTypeName"),ke=K(Fe,"organizationID","organizationName"),Z=[{value:"d621c0cd-1381-44d9-9d59-a1c772931080",label:"چک"},{value:"39363fd7-5dc7-4195-89f0-5eb62c667127",label:"فیش"}];m.useEffect(()=>{if(n.personnelStatementOffTypeID){const l=as(W,n.personnelStatementOffTypeID,"personnelStatementOffTypeID");i(v({...n,personelPercent:l==null?void 0:l.fractionPersonnelCoef,organazationPercent:l==null?void 0:l.fractionOrganizationCoef}))}},[n==null?void 0:n.personnelStatementOffTypeID,i,W]);const Le=l=>{z(l)},Re=l=>{k(l)},Ye=l=>{if(!l){console.log("Date is null or undefined"),i(v({...n,letterDate:null})),R(null),z(!1);return}let c=new Date(l);if(isNaN(c.getTime())){console.error("Invalid date value"),i(v({...n,letterDate:null})),R(null),z(!1);return}c.setMinutes(c.getMinutes()-c.getTimezoneOffset()),i(v({...n,letterDate:c.toDateString()})),R(l),z(!1)},Ee=l=>{if(!l){i(v({...n,paymentDate:null})),Y(null),k(!1);return}let c=new Date(l);if(isNaN(c.getTime())){console.error("Invalid date value"),i(v({...n,paymentDate:null})),Y(null),k(!1);return}c.setMinutes(c.getMinutes()-c.getTimezoneOffset()),i(v({...n,paymentDate:c.toDateString()})),Y(l),k(!1)},ee=l=>{i(os(l.target.value)),P(l.target.value)},E=l=>{const{name:c,value:y}=l.target;i(v({...n,[c]:y}))},H=(l,c)=>{const{name:y}=c;if(l){const{value:f}=l;i(v({...n,[y]:f||""}))}else i(v({...n,[y]:null}))},He=async(l,c)=>{var y,f,O;console.log(c);try{const x=await be({data:l,type:c}).unwrap();r(!0),B.success(x.message,{autoClose:2e3})}catch(x){((y=x==null?void 0:x.data)==null?void 0:y.error)==="period exists"?B.error("دوره تکراری می باشد",{autoClose:2e3}):((f=x==null?void 0:x.data)==null?void 0:f.error)==="PersonnelID not found"?B.error("شماره کارمندی یافت نشد",{autoClose:2e3}):B.error(((O=x==null?void 0:x.data)==null?void 0:O.message)||x.error,{autoClose:2e3}),console.log(x==null?void 0:x.data.error)}},Ve=async()=>{var l;try{const c=await Be({personNationalCode:p(n.personNationalCode)}).unwrap();if(c.itemList.length===0){B.error("نتیجه ای یافت نشد",{autoClose:2e3});return}const f=c.itemList.find($=>$.personID.startsWith("E"))||c.itemList[1];if(!f){B.error("!کد ملی معتبر نمی باشد",{autoClose:2e3});return}const O=f.personID;i(v({...n,personFirstName:f.personFirstName,personLastName:f.personLastName,personID:f.personID}));const x=new URLSearchParams(window.location.search);x.set("personID",O),window.history.replaceState({},"",`${window.location.pathname}?${x.toString()}`),a(!0)}catch(c){console.log(c),B.error(((l=c==null?void 0:c.data)==null?void 0:l.message)||c.error,{autoClose:2e3})}},Ae=()=>{t.current.click()},Ue=()=>{G(null),S(0)},Ge=()=>{r(!1),i(v({fractionTypeID:null,letterNO:null,paymentTypeID:null,paymentNO:null})),R(null),Y(null),G(null),S(0)},We=l=>{const c=l.target.files[0];if(c){const y=new FileReader;G(c),y.onprogress=f=>{const O=Math.round(f.loaded/f.total*100);S(O)},y.onload=f=>{const O=new Uint8Array(f.target.result),x=Cs(O,{type:"array"}),$=x.SheetNames[0],$e=x.Sheets[$],se=Bs.sheet_to_json($e,{header:1}),Ke=se[0],ne=se.slice(1).map(V=>{if(V.every(M=>M==null||M===""))return null;const F={};return V.forEach((M,Je)=>{F[Ke[Je]]=p(M?M.toString():"")}),F.saved=!0,F.letterNO=p(n.letterNO),F.letterDate=new Date(n.letterDate),F.paymentDate=new Date(n.paymentDate),F.paymentTypeID=n.paymentTypeID,F.paymentNO=p(n.paymentNO),F}).filter(V=>V!==null);console.log(n);const Xe=n==null?void 0:n.fractionTypeID;s(ne.length),He(ne,Xe)},y.onloadend=()=>{setTimeout(()=>{S(0)},2e3)},y.readAsArrayBuffer(c)}};return rs([u,h],[z,k]),e.jsxs(e.Fragment,{children:[g&&e.jsxs(is,{title:"نتیجه",children:[e.jsxs("p",{className:"paragraph-primary",children:["تعداد ",d," رکورد ثبت شد"]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(ue,{dir:"ltr",endIcon:e.jsx(he,{}),onClick:Ge,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"تایید"})})})]}),e.jsxs("section",{className:"formContainer flex-col",children:[e.jsxs("form",{method:"POST",className:"grid grid--col-5",noValidate:!0,children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(T,{closeMenuOnSelect:!0,options:Q,components:N,name:"fractionTypeID",value:Q.find(l=>l.value===(n==null?void 0:n.fractionTypeID))||null,onChange:H,isLoading:Te||we,isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"نوع کسور"}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:w}),e.jsx("label",{className:n!=null&&n.fractionTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"نوع کسور"})]}),e.jsxs("div",{className:"checkboxContainer",children:[e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx("input",{type:"radio",id:"groupTyped",name:"frType",value:"group",onChange:ee,checked:C==="group"}),e.jsx("label",{htmlFor:"groupTyped",className:"checkboxContainer__label",children:"سازمانی"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx("input",{type:"radio",id:"soloTyped",name:"frType",value:"solo",onChange:ee}),e.jsx("label",{htmlFor:"soloTyped",className:"checkboxContainer__label",children:"انفرادی"})]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:E,name:"letterNO",value:o(n.letterNO)||"",required:!0,id:"letterNO"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"letterNO",children:"شماره نامه"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ae.InputDatePicker,{onChange:Ye,value:Ne,onOpenChange:Le,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(re,{color:"action"}),open:ve,style:ie,wrapperStyle:te,placement:"bottom",pickerProps:{ref:u}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ نامه"})]}),e.jsx("div",{children:" "}),C==="solo"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(T,{closeMenuOnSelect:!0,options:J,components:N,onChange:H,value:J.find(l=>l.value===(n==null?void 0:n.relationshipWithParentID)),name:"personnelStatementOffTypeID",isLoading:qe||ze,isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"نوع سابقه"}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:w}),e.jsx("label",{className:n!=null&&n.personnelStatementOffTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"نوع سابقه"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",required:!0,name:"personNationalCode",id:"personNationalCode",onChange:E,value:o(n.personNationalCode)||""}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode",children:[e.jsx("span",{children:"*"})," شماره ملی"]}),e.jsx("div",{className:"inputBox__form--icon",children:De||Oe?e.jsx(A,{"aria-label":"search",color:"info",disabled:!0,children:e.jsx(ts,{size:20,value:100})}):e.jsx(X,{title:"استعلام",children:e.jsx("span",{children:e.jsx(A,{color:"primary",onClick:Ve,disabled:!n.personNationalCode,children:e.jsx(Ss,{})})})})})]}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n.personFirstName||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام خانوادگی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n.personLastName||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره کارمندی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:o(n.personID)||"-"})]})}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(T,{closeMenuOnSelect:!0,components:N,onChange:H,isClearable:!0,options:ke,name:"organazationID",placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نام سازمان"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,isLoading:Se||Ie,styles:w}),e.jsxs("label",{className:n!=null&&n.organazationID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نام سازمان"]})]}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "}),e.jsx("div",{children:" "})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(T,{closeMenuOnSelect:!0,components:N,isClearable:!0,value:Z.find(l=>l.value===(n==null?void 0:n.paymentTypeID))||null,onChange:H,options:Z,name:"paymentTypeID",placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع پرداخت"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:w}),e.jsxs("label",{className:n!=null&&n.paymentTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع پرداخت"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:E,name:"paymentNO",value:o(n.paymentNO)||"",required:!0,id:"paymentNO"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"paymentNO",children:"شماره"})]}),C==="solo"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:E,name:"amount",value:o(n.amount)||"",required:!0,id:"amount"}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"amount",children:"مبلغ"})]})}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ae.InputDatePicker,{defaultValue:null,onChange:Ee,value:ye,onOpenChange:Re,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(re,{color:"action"}),open:_e,style:ie,wrapperStyle:te,placement:"top",pickerProps:{ref:h}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پرداخت"})]})]}),C==="group"&&e.jsx("div",{style:{marginRight:"auto"},className:"flex-row flex-center",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:"file",ref:t,style:{display:"none"},onChange:We,accept:".xlsx, .xls"}),e.jsx(q,{dir:"ltr",variant:"contained",color:"warning",disabled:_>0||D?!0:!n.fractionTypeID,sx:{fontFamily:"sahel"},endIcon:e.jsx(Ds,{}),loading:Pe||Ce,onClick:Ae,children:e.jsx("span",{children:"بارگزاری اکسل"})}),D&&e.jsxs("div",{className:"excel",style:{position:"absolute",top:"-100%",left:"50%",transform:"translateX(-50%)",width:"100%"},children:[e.jsx(A,{color:"error",size:"small",onClick:Ue,sx:{padding:0},children:e.jsx(fe,{})}),e.jsx(X,{title:D.name,children:e.jsx("span",{className:"excel__name",children:D.name})}),e.jsx("img",{src:Os,className:"excel__image"})]}),e.jsxs(je,{sx:{position:"absolute",left:"50%",bottom:"-40px",zIndex:2,width:"90%",transform:"translateX(-50%)",visibility:_>0?"visible":"hidden"},children:[e.jsx(ls,{variant:"determinate",value:_,color:"warning",sx:{borderRadius:"40px"}}),e.jsxs("span",{style:{fontFamily:"IranYekan",fontSize:"12px"},children:[_,"%"]})]})]})})]})]})}function Ms(){const[t,j]=m.useState({}),{periodsTableData:a}=I(u=>u.fractionData),g=U(),r=t.periodMonth===""||!t.periodMonth||t.periodYear===""||!t.periodYear,d=u=>{const{name:h,value:N}=u.target;j({...t,[h]:N})},s=()=>{if(a.some(i=>i.periodMonth===p(t.periodMonth)&&i.periodYear===p(t.periodYear))){B.error("دوره تکراری است");return}let h;!t.periodDay||t.periodDay===""?p(t.periodMonth)==="01"||p(t.periodMonth)==="02"||p(t.periodMonth)==="03"||p(t.periodMonth)==="04"||p(t.periodMonth)==="05"||p(t.periodMonth)==="06"?h="31":(p(t.periodMonth)==="07"||p(t.periodMonth)==="08"||p(t.periodMonth)==="09"||p(t.periodMonth)==="10"||p(t.periodMonth)==="11"||p(t.periodMonth)==="12")&&(h="30"):h=t.periodDay;const N={...t,periodDay:h,periodMonth:p(t.periodMonth),periodYear:p(t.periodYear),id:Date.now()};g(ge(N)),j({})};return e.jsx("section",{className:"formContainer-transparent flex-col",children:e.jsxs("form",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodYear",value:o(t.periodYear)||"",onChange:d,required:!0,id:"periodYear",maxLength:4,minLength:4}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"periodYear",children:[e.jsx("span",{children:"*"})," سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodMonth",value:o(t.periodMonth)||"",onChange:d,required:!0,id:"periodMonth",maxLength:2}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"periodMonth",children:[e.jsx("span",{children:"*"})," ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",name:"periodDay",value:o(t.periodDay)||"",onChange:d,required:!0,id:"periodDay",maxLength:2}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"periodDay",children:"روز"})]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(ue,{dir:"ltr",endIcon:e.jsx(cs,{}),variant:"contained",color:"success",disabled:r,sx:{fontFamily:"sahel"},onClick:s,children:e.jsx("span",{children:"اضافه کردن دوره"})})})]})})}function Ts(){const[t,j]=m.useState({}),[a,g]=m.useState([]),{periodsTableData:r}=I(i=>i.fractionData),d=U(),s=m.useCallback(i=>{d(ds(i))},[d]);m.useEffect(()=>{const i=r.map((C,P)=>({id:C.id,periodRowNum:P+1,periodYear:C.periodYear||"-",periodMonth:C.periodMonth||"-",periodDay:C.periodDay||"-"}));g(i)},[r]);const u=m.useMemo(()=>[{accessorKey:"periodRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodYear",header:"سال",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodMonth",header:"ماه",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"periodDay",header:"روز",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:o(i)})},{accessorKey:"deletePeriod",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:i})=>e.jsx(X,{title:"حذف دوره",children:e.jsx(A,{color:"error",sx:{padding:"0"},onClick:()=>s(i.original.id),children:e.jsx(fe,{})})})}],[s]),h=ps({...ms,columns:u,data:a,muiTableBodyRowProps:({row:i})=>({onClick:()=>j(()=>({[i.id]:!0})),selected:t[i.id],sx:{cursor:"pointer"}}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:i=>e.jsx(xs,{...i,page:o(i.page),slots:{previous:us,next:hs,first:fs,last:js}})},getRowId:i=>i.id,onRowSelectionChange:j,state:{rowSelection:t}});return e.jsxs(e.Fragment,{children:[e.jsx(Ms,{}),e.jsx(gs,{table:h})]})}function ws(){const[t,j]=m.useState(!1),{fractionType:a}=I(P=>P.fractionData),{periodsTableData:g}=I(P=>P.fractionData),{data:r}=I(P=>P.calculateFractionData),[d,s]=m.useState({}),[u,{isLoading:h,isFetching:N}]=Ns(),i=async P=>{var n;try{const _=g.map(D=>({period:p(`${D.periodYear}/${D.periodMonth}`),days:Number(p(D.periodDay))})),S=await u({...r,letterNO:p(r.letterNO),amount:p(r.amount),paymentNO:p(r.paymentNO),personNationalCode:p(r.personNationalCode),letterDate:new Date(r.letterDate),paymentDate:new Date(r.paymentDate),save:P,periods:_}).unwrap();j(!0),s(S.itemList[0]),B.success(S.message,{autoClose:2e3})}catch(_){console.log(_),B.error(((n=_==null?void 0:_.data)==null?void 0:n.message)||_.error,{autoClose:2e3})}};return e.jsx(e.Fragment,{children:a==="solo"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"محاسبه کسورات"})}),e.jsxs("div",{className:"formContainer flex-col",children:[e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("p",{className:"fraction-item",children:["جمع مشمول کسور :",e.jsx("span",{children:o(L(d==null?void 0:d.sumFraction))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارفرما :",e.jsxs("span",{children:[" ",o(L(d==null?void 0:d.sumFractionOrganization))||"-"]})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارمند :",e.jsx("span",{children:o(L(d==null?void 0:d.sumFractionPersonnel))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بدهی :",e.jsx("span",{children:o(L(d==null?void 0:d.debtor))||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارفرما :"," ",e.jsx("span",{children:o(r==null?void 0:r.organazationPercent)+"%"||"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارمند :"," ",e.jsxs("span",{children:[" ",o(r==null?void 0:r.personelPercent)+"%"||"-"]})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بستانکاری :"," ",e.jsx("span",{children:o(L(d==null?void 0:d.credit))||"-"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row flex-center",children:[e.jsx(q,{dir:"ltr",endIcon:e.jsx(Fs,{}),variant:"contained",type:"submit",loading:N||h,onClick:()=>i(!1),color:"warning",children:e.jsx("span",{children:"محاسبه"})}),e.jsx(q,{dir:"ltr",endIcon:e.jsx(ys,{}),disabled:!t,variant:"contained",type:"submit",loading:N||h,onClick:()=>i(!0),color:"success",children:e.jsx("span",{children:"ذخیره"})})]})]})]}):null})}function pe(t){return vs({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z"}},{tag:"path",attr:{d:"M6.25 7.72h5v1.5h-5zM13 15.75h5v1.5h-5zM13 13.25h5v1.5h-5zM8 18h1.5v-2h2v-1.5h-2v-2H8v2H6V16h2zM14.09 10.95l1.41-1.41 1.41 1.41 1.06-1.06-1.41-1.42 1.41-1.41L16.91 6 15.5 7.41 14.09 6l-1.06 1.06 1.41 1.41-1.41 1.42z"}}]})(t)}function qs(){const t=xe(),{handleSubmit:j,formState:{errors:a},control:g,register:r,watch:d}=_s(),s=d(),u=()=>{console.log(s)};return e.jsxs("section",{className:"formContainer flex-col",children:[e.jsx("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:j(u),children:e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"inputBox__form",children:[a.nationaCode&&e.jsx("span",{className:"error-form",children:a.nationaCode.message}),e.jsx("input",{type:"text",id:"nationaCode",className:"inputBox__form--input",value:o(s==null?void 0:s.nationaCode)??"",required:!0,...r("nationaCode",{required:"شماره ملی اجباری است"})}),e.jsxs("label",{htmlFor:"nationaCode",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," شماره ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.name&&e.jsx("span",{className:"error-form",children:a.name.message}),e.jsx("input",{type:"text",id:"name",className:"inputBox__form--input",value:o(s==null?void 0:s.name)??"",required:!0,...r("name",{required:"نام اجباری است"})}),e.jsxs("label",{htmlFor:"name",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.familyName&&e.jsx("span",{className:"error-form",children:a.familyName.message}),e.jsx("input",{type:"text",id:"familyName",className:"inputBox__form--input",value:o(s==null?void 0:s.familyName)??"",required:!0,...r("familyName",{required:"نام خانوادگی اجباری است"})}),e.jsxs("label",{htmlFor:"familyName",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.familyName&&e.jsx("span",{className:"error-form",children:a.familyName.message}),e.jsx("input",{type:"text",id:"personID",className:"inputBox__form--input",value:o(s==null?void 0:s.personID)??"",required:!0,...r("personID",{required:"نام خانوادگی اجباری است"})}),e.jsxs("label",{htmlFor:"personID",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," شماره کارمندی"]})]}),e.jsx("div",{}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(le,{name:"calcualteType",control:g,render:({field:{onChange:N}})=>e.jsx(T,{closeMenuOnSelect:!0,components:t,isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع محاسیه کسور"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:w})}),e.jsxs("label",{className:s!=null&&s.calcualteType?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع محاسبه کسور"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(le,{name:"oraginaztionName",control:g,render:({field:{onChange:N}})=>e.jsx(T,{closeMenuOnSelect:!0,components:t,isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نام سازمان"]}),noOptionsMessage:b.noOptionsMessage,loadingMessage:b.loadingMessage,styles:w})}),e.jsxs("label",{className:s!=null&&s.oraginaztionName?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نام سازمان"]})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(q,{loading:!1,type:"submit",endIcon:e.jsx(pe,{}),variant:"contained",color:"warning",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"محاسبه سنوات"})})})]})}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:j(u),children:[e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," مبلغ مشمول کسور"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," مبلغ منتقله"]})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"سنوات قابل محاسبه :"}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ از :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ تا :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(oe,{size:"small",color:"success",checked:!!(s!=null&&s.isTadiye),id:"isInstallment",sx:{padding:.5},...r("isTadiye")}),e.jsx("label",{htmlFor:"isTadiye",className:"checkboxContainer__label",children:"تاخیر و تادیه"})]}),s.isTadiye&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ از :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]}),e.jsx("div",{}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ تا :"}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"ماه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"روز"]})]})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(q,{loading:!1,type:"submit",endIcon:e.jsx(pe,{}),variant:"contained",color:"warning",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"محاسبه کسور"})})})]}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("div",{className:"grid grid--col-5",children:[e.jsxs("p",{className:"fraction-item",children:["جمع مشمول کسور :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارفرما : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["درصد سهم کارمند : ",e.jsx("span",{children:"-"})]}),e.jsx("div",{}),e.jsx("div",{}),e.jsxs("p",{className:"fraction-item",children:["مبلغ کسور :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارفرما : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["سهم کارمند : ",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بدهی :",e.jsx("span",{children:"-"})]}),e.jsxs("p",{className:"fraction-item",children:["مانده بستانکاری : ",e.jsx("span",{children:"-"})]})]}),e.jsx("div",{style:{width:"100%",height:"1px",backgroundColor:"#ddd",margin:"10px 0"}}),e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:j(u),children:[e.jsxs("section",{className:"grid grid--col-5",children:[e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(oe,{size:"small",color:"success",checked:!!(s!=null&&s.isInstallment),id:"isInstallment",sx:{padding:.5},...r("isInstallment")}),e.jsx("label",{htmlFor:"isInstallment",className:"checkboxContainer__label",children:"قسطی"})]}),s.isInstallment&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"مبلغ قسط"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.fractionPrice&&e.jsx("span",{className:"error-form",children:a.fractionPrice.message}),e.jsx("input",{type:"text",id:"fractionPrice",className:"inputBox__form--input",value:o(s==null?void 0:s.fractionPrice)??"",required:!0,...r("fractionPrice",{required:"مبلغ مشمول کسور اجباری است"})}),e.jsxs("label",{htmlFor:"fractionPrice",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"}),"تعداد قسط"]})]})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(q,{loading:!1,type:"submit",endIcon:e.jsx(he,{}),variant:"contained",color:"success",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"ذخیره"})})})]})]})}function Es(){const[t,j]=m.useState("1"),{fractionType:a}=I(s=>s.fractionData),g=U();m.useEffect(()=>()=>{g(ge([])),g(v({}))},[g]);const r=(s,u)=>{j(u)};return e.jsxs("section",{className:"flex-col u-margin-bottom-xl",children:[e.jsx("div",{className:"title-primary--container flex-row flex-center",children:e.jsx("h4",{className:"title-primary",children:e.jsx("span",{className:"title-primary--underline",children:"کسورات"})})}),e.jsx("div",{children:e.jsxs(bs,{value:t,children:[e.jsx(je,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(Ps,{onChange:r,"aria-label":"tabs",children:[e.jsx(ce,{label:"ثبت کسورات",value:"1"}),e.jsx(ce,{label:"محاسبه کسورات",value:"2"})]})}),e.jsxs(de,{value:"1",sx:{padding:"0"},children:[e.jsx(Is,{}),a==="solo"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"لیست دوره ها"})}),e.jsx(Ts,{})]}),e.jsx(ws,{})]}),e.jsx(de,{value:"2",sx:{padding:"0"},children:e.jsx(qs,{})})]})})]})}export{Es as default};
