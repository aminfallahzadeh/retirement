import{c as E,j as e,R as I,a as T,b as D,d as C,e as b,f as A,g as N,T as f,L as R,I as x,O as F,E as S,r as o,u as v,h as z,s as m,B as L,C as B,i as O,G as $,k}from"./index-Bjjox_it.js";import{u as K,a as V}from"./requestApi-CCBEwMPc.js";import{c as P,S as Q}from"./SelectInput-_n2x3K2n.js";import{R as G}from"./Refresh-ClQGx8IQ.js";import{T as H}from"./Title-BBhp-6qg.js";import"./react-select-animated.esm-DP_YiYte.js";const U=E(e.jsx("path",{d:"M14.17 5 19 9.83V19H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V9.83c0-.53-.21-1.04-.59-1.41l-4.83-4.83c-.37-.38-.88-.59-1.41-.59M7 15h10v2H7zm0-4h10v2H7zm0-4h7v2H7z"}),"TextSnippetOutlined"),_=({role:t})=>[{accessorKey:"requestRowNum",header:I,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"requestNO",header:T,size:20},{accessorKey:"requestTypeNameFa",header:D,size:20},{accessorKey:"personName",header:C,size:20},{accessorKey:"date",header:b,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:A(s)})},{accessorKey:"senderInfo",header:N,enableSorting:!1,enableColumnActions:!1,muiTableBodyCellProps:{align:"center"},size:20,Cell:({row:s})=>e.jsx(f,{title:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s.original.requestTypeNameFa})," ",e.jsx("br",{}),e.jsx("span",{children:s.original.personName})]}),children:e.jsx(R,{to:s.original.requestTypeID==="62A54585-F331-434A-9027-C9F3060F683A"?`/retirement/group-slips?requestID=${s.original.id}`:s.original.requestTypeID==="EC1E7E50-9815-442F-9CCB-27F47AB05199"?`/retirement/group-slips?requestID=${s.original.id}&personID=${s.original.personID}`:s.original.requestTypeID==="6E7BA26E-A1DC-4A5E-9700-17820A36158D"?`/retirement/batch-statements?requestID=${s.original.id}`:`/retirement/retired?personID=${s.original.personID}&Role=${t==null?void 0:t.value}&requestID=${s.original.id}`,children:e.jsx("span",{children:e.jsx(x,{color:"success",sx:{padding:"0"},children:e.jsx(U,{color:"success"})})})})})},{accessorKey:"observe",header:F,enableSorting:!1,enableColumnActions:!1,muiTableBodyCellProps:{align:"center"},size:20,Cell:({row:s})=>e.jsx(f,{title:s.original.requestNO,children:e.jsx(R,{to:`/retirement/request?requestID=${s.id}&Role=${t==null?void 0:t.value}&type=${s.original.requestTypeID}`,children:e.jsx("span",{children:e.jsx(x,{sx:{padding:"0"},color:"info",children:e.jsx(S,{color:"info"})})})})})}],M=()=>{const[t,s]=o.useState([]),a=v(),{control:p,setValue:l}=z({}),[c,{isLoading:u,isFetching:q}]=K(),h=o.useCallback(async()=>{const r=await c().unwrap(),i=P(r==null?void 0:r.itemList,"url","itemName");s(i),a(m(i[0])),l("role",i[0])},[a,c,l]);o.useEffect(()=>{h()},[h]);const g=r=>{a(r?m(r):m(null))};return e.jsx("div",{style:{width:"300px",height:"40px",margin:"10px auto"},children:e.jsx(Q,{control:p,options:t,isLoading:u||q,onValueChange:g,name:"role",label:"نقش",required:!1})})},W=({isLoading:t,isFetching:s,handleRefresh:a})=>e.jsxs(L,{sx:{display:"flex",gap:"0.5rem",alignItems:"center",justifyContent:"flex-end"},children:[t||s?e.jsx(x,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(B,{size:20,value:100})}):e.jsx(f,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(x,{"aria-label":"refresh",color:"info",onClick:a,children:e.jsx(G,{fontSize:"small"})})})}),e.jsx(M,{})]}),Y=()=>{const[t,s]=o.useState([]),{role:a}=O(i=>i.role),[p,{isLoading:l,isFetching:c}]=V(),u=o.useCallback(async i=>{try{const d=await p({Role:i}).unwrap(),j=d==null?void 0:d.itemList.map((n,y)=>({id:n.requestID,requestRowNum:y+1,requestNO:n.requestNO||"-",requestTypeID:n.requestTypeID,personID:n.personID,requestTypeNameFa:n.requestTypeNameFa,personName:n.personFirstName+" "+n.personLastName||"-",date:n.requestDate,body:n.requestText}));s(j)}catch(d){console.log(d)}},[p]);o.useEffect(()=>{a?u(a==null?void 0:a.value):s([])},[a,u]);const h=W({isLoading:l,isFetching:c,handleRefresh:()=>{a&&u(a==null?void 0:a.value)}}),g=_({role:a});return e.jsx($,{columns:g,data:t,topBarActions:h,scroll:!1,isLoading:l,isFetching:c})};function ae(){return e.jsxs("section",{className:"flex-col",children:[e.jsx(H,{title:k,back:!1}),e.jsx(Y,{})]})}export{ae as Cartable};
