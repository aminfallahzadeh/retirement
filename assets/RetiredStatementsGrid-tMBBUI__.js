import{dO as _,j as e,T as l,ga as $,gb as p,I as g,R as M,eP as z,eN as O,eO as K,eQ as P,f as h,eR as B,O as G,L as I,fV as k,E as F,B as U,C as q,ew as Q,gc as V,r as m,A as W,z as Y,dP as w,G as H,aw as J}from"./index-CRad3sE9.js";import{j as X,k as Z}from"./statementApi-CRfu_X0W.js";import{D as ee}from"./DeleteOutline-BxTIN1MR.js";import{A as te}from"./Add-Bnl1OseK.js";const se=(a,r)=>{const n=[{accessorKey:"retirementStatementRowNo",size:20,header:M,enableColumnActions:!1,enableSorting:!1},{accessorKey:"retirementStatementNo",size:20,header:z},{accessorKey:"retirementStatementSerial",size:20,header:O},{accessorKey:"retirementStatementTypeName",size:20,header:K},{accessorKey:"retirementStatementIssueDate",header:P,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"retirementStatementRunDate",header:B,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"observeRetirementStatement",header:G,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx(I,{to:`${k}document/rstatement?statementID=${t.original.id}&personID=${t.original.personID}&personDeathDate=${t.original.personDeathDate}`,children:e.jsx(F,{color:"primary"})})})}];return r&&n.push({accessorKey:"deleteRetirementStatement",header:_,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:t.original.retirementStatementIssueConfirmDate?$:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx("span",{children:e.jsx(g,{disabled:!!t.original.retirementStatementIssueConfirmDate,color:"error",onClick:()=>a(t.original.id),sx:{padding:"0"},children:e.jsx(ee,{})})})})}),n},ae=(a,r,n,t)=>e.jsx(U,{children:r||a?e.jsx(g,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(q,{size:20,value:100})}):e.jsx(l,{title:Q,children:e.jsx(I,{to:`${V}?personID=${n}&requestID=${t}`,children:e.jsx(te,{fontSize:"small",color:"success"})})})}),le=({columns:a,hasDeleteAction:r=!0})=>{const[n,t]=m.useState([]),[T,i]=W(!1),[R,f]=m.useState(""),[c]=Y(),d=c.get("personID"),x=c.get("requestID"),{data:S,isSuccess:u,isLoading:D,isFetching:E,refetch:j}=X({personID:d}),[A,{isLoading:C}]=Z();m.useEffect(()=>{if(u){const o=S.map((s,v)=>({id:s.retirementStatementID,retirementStatementRowNo:v+1,retirementStatementSerial:s.retirementStatementSerial,retirementStatementTypeName:s.retirementStatementTypeName,retirementStatementNo:s.retirementStatementNo||"-",retirementStatementIssueDate:s.retirementStatementIssueDate,retirementStatementRunDate:s.retirementStatementRunDate,retirementStatementIssueConfirmDate:s.retirementStatementIssueConfirmDate,personID:s.personID,personDeathDate:s.personDeathDate}));t(o)}},[u,S]);const N=o=>{f(o),i()},y=async()=>{const o=await A({rsID:R}).unwrap();J.success(o.message),j(),i()},b=se(N,r),L=ae(D,E,d,x);return e.jsxs(e.Fragment,{children:[e.jsx(w,{open:T,onClose:i,isLoading:C,handleRemove:y}),e.jsx(H,{data:n,columns:a||b,scroll:!0,topBarActions:L,isLoading:D,isFetching:E,sorting:[{id:"retirementStatementIssueDate",desc:!0}]})]})};export{le as R};
