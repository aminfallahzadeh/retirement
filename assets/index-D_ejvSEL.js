import{r,j as e,i as E,E as R,T as F,L as O,I as P}from"./index-W68cpnsO.js";import{u as v}from"./index.esm-CWoQLPon.js";import{u as _}from"./personApi-CLidky5_.js";import{S as w}from"./SearchOutlined-BxeYRJ7L.js";import{I as i}from"./Input-t2ijJi9M.js";import{G as z}from"./Grid-D1IlHv2N.js";import{R as T,F as N,b as h,N as f,_ as j,$ as G,O as K}from"./const-BA1H7vj5.js";import{N as $}from"./messages-BB_7oADB.js";import{o as u,a as x}from"./rules-EYJip5Lp.js";import{E as q}from"./VisibilityOutlined-DSjVU1GN.js";import"./index.esm-Ck86Uiz9.js";import"./index-DRM-yeOy.js";const B=(s=[])=>[{accessorKey:"personnelRowNo",header:T,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"personnelFirstName",header:N,size:20},{accessorKey:"personnelLastName",header:h,size:20},{accessorKey:"personnelNationalCode",header:f,size:20},{accessorKey:"personnelID",header:j,size:20},...s],b=r.createContext([]),M=()=>{const s=r.useContext(b);if(!s)throw new Error("useActions must be used within an ActionsProvider");return s},U=r.memo(({data:s,isLoading:t,isFetching:n})=>{const l=M(),c=B(l);return e.jsx(z,{columns:c,scroll:!1,data:s,isLoading:t,isFetching:n})}),V=()=>{const[s,t]=r.useState([]),{control:n,handleSubmit:l,watch:c,reset:y}=v(),a=c(),[D,{isLoading:m,isFetching:p}]=_(),S=r.useMemo(()=>!a.personNationalCode&&!a.personnelID&&!a.personFirstName&&!a.personLastName,[a]),L=async C=>{const d=await D(C).unwrap();if(d.itemList.length===0){R.warning($),y();return}const I=d.itemList.map((o,A)=>({id:o.personID,personnelRowNum:A+1,personnelDeathDate:o.personDeathDate,personnelID:o.personnelID,personnelNationalCode:o.personNationalCode,personnelFirstName:o.personFirstName,personnelLastName:o.personLastName}));t(I)},g=r.useMemo(()=>s,[s]);return e.jsxs("section",{className:"flex-col formContainer",children:[e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:l(L),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(i,{name:"personNationalCode",label:f,rules:u,control:n,required:!1,type:"text"}),e.jsx(i,{name:"personnelID",label:j,rules:u,control:n,required:!1,type:"text"}),e.jsx(i,{name:"personFirstName",label:N,rules:x,control:n,required:!1,type:"text"}),e.jsx(i,{name:"personLastName",label:h,rules:x,control:n,required:!1,type:"text"})]}),e.jsx("div",{className:"flex-row mr-auto",children:e.jsx(E,{dir:"ltr",endIcon:e.jsx(w,{}),loading:m||p,disabled:S,variant:"contained",color:"primary",type:"submit",children:e.jsx("span",{children:G})})})]}),e.jsx(U,{data:g,isLoading:m,isFetching:p})]})},k=({children:s,actions:t})=>e.jsx(b.Provider,{value:t||[],children:s}),H=({actions:s=[]})=>e.jsx(k,{actions:s,children:e.jsx(V,{})}),Q=[{accessorKey:"observePersonnel",header:K,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(F,{title:`${s.original.personFirstName} ${s.original.personLastName}`,children:e.jsx(O,{to:`/retirement/personnel-statements/info?personID=${s.id}&personDeathDate=${s.original.personDeathDate}`,children:e.jsx(P,{color:"primary",sx:{padding:"0"},children:e.jsx(q,{})})})})}],le=()=>e.jsxs("section",{className:"flex-col u-margin-bottom-md",children:[e.jsx("div",{className:"title-primary--container flex-row flex-center",children:e.jsxs("h4",{className:"title-primary",children:[e.jsx("span",{className:"title-primary--underline"}),"احکام و تعرفه"]})}),e.jsx(H,{actions:Q})]});export{le as PersonnelStatements};
