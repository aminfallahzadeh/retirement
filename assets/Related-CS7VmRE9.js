import{A as xe,n as Ie,h as De,r,j as e,ep as B,N as u,K as a,M as H,X as o,P as w,Q as be,S as fe,U as je,V as n,W as Se,Z as y,_ as he,eq as Ne,$ as ge,er as Ce,aI as Te,aq as Ue,ah as ke,es as Ee,et as Le,eu as qe,aa as b,a9 as V,al as Ae,am as Re,ai as Pe,aj as ve,ak as Me,an as Oe,ao as _e,ev as Fe,as as G,at as K,ew as Be,aH as He,ex as we,ey as Ve,ez as Ge,v as Ke,au as We,av as Ye,ax as Qe,az as es,B as ss,C as as,eA as ts,k as os,eB as rs,eC as ns}from"./index-N58BBWKb.js";import{u as ls,a as is,b as ps}from"./relatedApi-B9eHtjJv.js";import{i as ze,b as Xe,u as m}from"./useFetchLookUpData-K_qkNkw8.js";import{T as x}from"./TextArea-C6sgpjfn.js";import{c as l,S as i}from"./SelectInput-CzQj549f.js";import{a as Ze,p as us}from"./convertFormData-CJYHF86N.js";import{S as ms}from"./StatusHistoryGrid-B2Q4j7sS.js";import"./sharedApi-BlfukM_H.js";import"./requestApi-CvbzcBqY.js";import"./personnelApi-C-Wgm4HA.js";import"./fractionApi-JSGtCmaz.js";import"./react-select-animated.esm-DO7WXjOE.js";import"./defineProperty-DJACW-dl.js";import"./typeof-QjJsDpFa.js";const cs=["relationshipWithParentID","personFirstName","personLastName","personNationalCode","personFatherName","personBirthDate","personMaritalDate","personBirthPlace","pensionaryStatusID","pensionaryStartDate","maritalStatusID","educationTypeID","educationTypeCaption","universityID","universityCaption","personCellPhone","personCellPhone2","personPhone","personRegion","personArea","personCountryID","personStateID","personCityID","personPostalCode","personSpecialDisease","personAddress","personDescription","selfEmployeeTypeName","selfEmployeeStartDate","selfEmployeeEndDate","selfEmployeeDesc","backupFirstName","backupLastName","backupRelation","backupPhone","backupCellphone","backupAddress"],$e=["personRegion","personArea","relatedID"],ds=()=>{const[f]=xe(),I=Ie(),g=f.get("id"),W=["personBirthDate","personMaritalDate","selfEmployeeStartDate","selfEmployeeEndDate","pensionaryStartDate"],Y=["relationshipWithParentID","pensionaryStatusID","maritalStatusID","educationTypeID","universityID","personCountryID","personStateID","personCityID"],{control:t,handleSubmit:j,formState:{errors:D},setValue:s}=De(),[Q,{isLoading:C}]=ls(),{relationships:p,relationshipIsLoading:T}=ze(),{pensionaryStatus:S,pensionaryStatusIsLoading:z}=Xe({pensionaryStatusCategory:"L",pensionaryStatusIsDead:null}),{lookUpItems:U,lookUpItemsIsLoading:X}=m({lookUpType:"MaritialStatus"}),{lookUpItems:h,lookUpItemsIsLoading:k}=m({lookUpType:"EducationType"}),{lookUpItems:E,lookUpItemsIsLoading:Z}=m({lookUpType:"UniversityType"}),{lookUpItems:L,lookUpItemsIsLoading:$}=m({lookUpType:"Country"}),{lookUpItems:q,lookUpItemsIsLoading:A}=m({lookUpType:"State"}),{lookUpItems:R,lookUpItemsIsLoading:P}=m({lookUpType:"City"}),J=r.useMemo(()=>l(U,"lookUpID","lookUpName"),[U]),v=r.useMemo(()=>l(p,"relationshipID","relationshipName"),[p]),ee=r.useMemo(()=>l(S,"pensionaryStatusID","pensionaryStatusName"),[S]),M=r.useMemo(()=>l(h,"lookUpID","lookUpName"),[h]),se=r.useMemo(()=>l(E,"lookUpID","lookUpName"),[E]),O=r.useMemo(()=>l(L,"lookUpID","lookUpName"),[L]),ae=r.useMemo(()=>l(q,"lookUpID","lookUpName"),[q]),_=r.useMemo(()=>l(R,"lookUpID","lookUpName"),[R]),te=async re=>{const F=Ze(re,Y,W,$e,[]),ne=await Q({...F,parentPersonID:g}).unwrap();Qe.success(ne.message),I(-1)};return e.jsx("section",{className:"flex-col mb-20",children:e.jsxs("form",{method:"POST",className:"flex-col formContainer",onSubmit:j(te),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(i,{name:"relationshipWithParentID",control:t,label:B,required:!0,isClearable:!0,options:v,isLoading:T,rules:u,errors:D}),e.jsx(a,{name:"personFirstName",label:H,rules:{...u,...o},required:!0,control:t,type:"text"}),e.jsx(a,{name:"personLastName",label:w,rules:{...u,...o},required:!0,control:t,type:"text"}),e.jsx(a,{name:"personNationalCode",label:be,rules:{...u,...fe},required:!0,control:t,type:"text"}),e.jsx(a,{name:"personCertificateNo",label:je,rules:{...u,...n},required:!0,control:t,type:"text"}),e.jsx(a,{name:"personFatherName",label:Se,rules:o,required:!1,control:t,type:"text"}),e.jsx(y,{name:"personBirthDate",label:he,control:t,required:!1,setValue:s}),e.jsx(y,{name:"personMaritalDate",label:Ne,control:t,required:!1,setValue:s}),e.jsx(a,{name:"personBirthPlace",label:ge,rules:o,required:!1,control:t,type:"text"}),e.jsx(i,{name:"pensionaryStatusID",control:t,label:Ce,required:!0,isClearable:!0,options:ee,isLoading:z,rules:u,errors:D}),e.jsx(y,{name:"pensionaryStartDate",label:Te,control:t,required:!1,setValue:s}),e.jsx(i,{name:"maritalStatusID",control:t,label:Ue,required:!1,isClearable:!0,options:J,isLoading:X}),e.jsx(i,{name:"educationTypeID",control:t,label:ke,required:!1,isClearable:!0,options:M,isLoading:k}),e.jsx(a,{name:"educationTypeCaption",label:Ee,rules:o,required:!1,control:t,type:"text"}),e.jsx(i,{name:"universityID",control:t,label:Le,required:!1,isClearable:!0,options:se,isLoading:Z}),e.jsx(a,{name:"universityCaption",label:qe,rules:o,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personCellPhone",label:b+" ۱",rules:n,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personCellPhone2",label:b+" ۲",rules:n,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personPhone",label:V,rules:n,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personRegion",label:Ae,rules:n,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personArea",label:Re,rules:n,required:!1,control:t,type:"text"}),e.jsx(i,{name:"personCountryID",control:t,label:Pe,required:!1,isClearable:!0,options:O,isLoading:$}),e.jsx(i,{name:"personStateID",control:t,label:ve,required:!1,isClearable:!0,options:ae,isLoading:A}),e.jsx(i,{name:"personCityID",control:t,label:Me,required:!1,isClearable:!0,options:_,isLoading:P}),e.jsx(a,{name:"personPostalCode",label:Oe,rules:_e,required:!1,control:t,type:"text"}),e.jsx(a,{name:"personSpecialDisease",label:Fe,rules:o,required:!1,control:t,type:"text"}),e.jsx(x,{name:"personAddress",label:G,control:t,containerClassNames:"col-span-4"}),e.jsx(x,{name:"personDescription",label:K,control:t,containerClassNames:"col-span-4 row-span-2"})]}),e.jsx("div",{className:"Modal__header flex justify-center items-center",children:e.jsx("h4",{className:"title-secondary",children:Be})}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(a,{name:"selfEmployeeTypeName",label:He,rules:o,required:!1,control:t,type:"text"}),e.jsx(y,{name:"selfEmployeeStartDate",label:we,control:t,required:!1,setValue:s}),e.jsx(y,{name:"selfEmployeeEndDate",label:Ve,control:t,required:!1,setValue:s}),e.jsx(x,{name:"selfEmployeeDesc",label:K,control:t,containerClassNames:"col-span-4"})]}),e.jsx("div",{className:"Modal__header flex justify-center items-center",children:e.jsx("h4",{className:"title-secondary",children:Ge})}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(a,{name:"backupFirstName",label:H,rules:o,required:!1,control:t,type:"text"}),e.jsx(a,{name:"backupLastName",label:w,rules:o,required:!1,control:t,type:"text"}),e.jsx(a,{name:"backupRelation",label:B,rules:o,required:!1,control:t,type:"text"}),e.jsx(a,{name:"backupPhone",label:V,rules:n,required:!1,control:t,type:"text"}),e.jsx(a,{name:"backupCellphone",label:b,rules:n,required:!1,control:t,type:"text"}),e.jsx(x,{name:"backupAddress",label:G,control:t,containerClassNames:"col-span-3"})]}),e.jsx("div",{className:"flex-row mr-auto",children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(We,{}),variant:"contained",type:"submit",loading:C,color:"success",children:e.jsx("span",{children:Ye})})})]})})},ys=()=>{const[f,I]=r.useState([]),[g]=xe(),W=Ie(),Y=g.get("id"),t=g.get("personID"),j=r.useMemo(()=>["personBirthDate","personMaritalDate","selfEmployeeStartDate","selfEmployeeEndDate","pensionaryStartDate"],[]),D=r.useMemo(()=>["relationshipWithParentID","pensionaryStatusID","maritalStatusID","educationTypeID","universityID","personCountryID","personStateID","personCityID"],[]),{control:s,handleSubmit:Q,formState:{errors:C},setValue:p}=De(),{data:T,isSuccess:S,isFetching:z,isLoading:U,refetch:X}=is(t),{data:h,isSuccess:k,isLoading:E,isFetching:Z,refetch:L}=es(t),[$,{isLoading:q}]=ps(),{relationships:A,relationshipIsLoading:R}=ze(),{pensionaryStatus:P,pensionaryStatusIsLoading:J}=Xe({pensionaryStatusCategory:"L",pensionaryStatusIsDead:null}),{lookUpItems:v,lookUpItemsIsLoading:ee}=m({lookUpType:"MaritialStatus"}),{lookUpItems:M,lookUpItemsIsLoading:se}=m({lookUpType:"EducationType"}),{lookUpItems:O,lookUpItemsIsLoading:ae}=m({lookUpType:"UniversityType"}),{lookUpItems:_,lookUpItemsIsLoading:te}=m({lookUpType:"Country"}),{lookUpItems:oe,lookUpItemsIsLoading:re}=m({lookUpType:"State"}),{lookUpItems:F,lookUpItemsIsLoading:ne}=m({lookUpType:"City"}),le=r.useMemo(()=>l(v,"lookUpID","lookUpName"),[v]),ie=r.useMemo(()=>l(A,"relationshipID","relationshipName"),[A]),pe=r.useMemo(()=>l(P,"pensionaryStatusID","pensionaryStatusName"),[P]),ue=r.useMemo(()=>l(M,"lookUpID","lookUpName"),[M]),me=r.useMemo(()=>l(O,"lookUpID","lookUpName"),[O]),ce=r.useMemo(()=>l(_,"lookUpID","lookUpName"),[_]),de=r.useMemo(()=>l(oe,"lookUpID","lookUpName"),[oe]),ye=r.useMemo(()=>l(F,"lookUpID","lookUpName"),[F]),Je=async N=>{const c=Ze(N,D,j,$e,[]),d=await $({...c,parentPersonID:Y}).unwrap();Qe.success(d.message),X(),L(),W(-1)};return r.useEffect(()=>{if(S){const N={...T},c=us(N,D,j,{relationshipWithParentID:ie,pensionaryStatusID:pe,maritalStatusID:le,educationTypeID:ue,universityID:me,personCountryID:ce,personStateID:de,personCityID:ye});Object.keys(c).forEach(d=>{cs.includes(d)&&c[d]===null?p(d,""):p(d,c[d])})}},[S,T,ie,pe,le,ue,me,ce,de,ye,j,D,p]),r.useEffect(()=>{if(k){const N=h.itemList.map((c,d)=>({id:c.pensionaryID,pensionaryStatusRowNum:d+1,isActive:c.pensionaryIsActive,pensionaryStatusName:c.pensionaryStatusName||"-",pensionaryStartdate:c.pensionaryStartdate||"-"}));I(N)}},[k,h]),e.jsx(e.Fragment,{children:U||z?e.jsx(ss,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(as,{color:"primary"})}):e.jsx("section",{className:"flex-col mb-20",children:e.jsxs("form",{method:"POST",className:"flex-col formContainer",onSubmit:Q(Je),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(i,{name:"relationshipWithParentID",control:s,label:B,required:!0,isClearable:!0,options:ie,isLoading:R,rules:u,errors:C}),e.jsx(a,{name:"personFirstName",label:H,rules:{...u,...o},required:!0,control:s,type:"text"}),e.jsx(a,{name:"personLastName",label:w,rules:{...u,...o},required:!0,control:s,type:"text"}),e.jsx(a,{name:"personNationalCode",label:be,rules:{...u,...fe},required:!0,control:s,type:"text"}),e.jsx(a,{name:"personCertificateNo",label:je,rules:{...u,...n},required:!0,control:s,type:"text"}),e.jsx(a,{name:"personFatherName",label:Se,rules:o,required:!1,control:s,type:"text"}),e.jsx(y,{name:"personBirthDate",label:he,control:s,required:!1,setValue:p}),e.jsx(y,{name:"personMaritalDate",label:Ne,control:s,required:!1,setValue:p}),e.jsx(a,{name:"personBirthPlace",label:ge,rules:o,required:!1,control:s,type:"text"}),e.jsx(i,{name:"pensionaryStatusID",control:s,label:Ce,required:!0,isClearable:!0,options:pe,isLoading:J,rules:u,errors:C}),e.jsx(y,{name:"pensionaryStartDate",label:Te,control:s,required:!1,setValue:p}),e.jsx(i,{name:"maritalStatusID",control:s,label:Ue,required:!1,isClearable:!0,options:le,isLoading:ee}),e.jsx(i,{name:"educationTypeID",control:s,label:ke,required:!1,isClearable:!0,options:ue,isLoading:se}),e.jsx(a,{name:"educationTypeCaption",label:Ee,rules:o,required:!1,control:s,type:"text"}),e.jsx(i,{name:"universityID",control:s,label:Le,required:!1,isClearable:!0,options:me,isLoading:ae}),e.jsx(a,{name:"universityCaption",label:qe,rules:o,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personCellPhone",label:b+" ۱",rules:n,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personCellPhone2",label:b+" ۲",rules:n,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personPhone",label:V,rules:n,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personRegion",label:Ae,rules:n,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personArea",label:Re,rules:n,required:!1,control:s,type:"text"}),e.jsx(i,{name:"personCountryID",control:s,label:Pe,required:!1,isClearable:!0,options:ce,isLoading:te}),e.jsx(i,{name:"personStateID",control:s,label:ve,required:!1,isClearable:!0,options:de,isLoading:re}),e.jsx(i,{name:"personCityID",control:s,label:Me,required:!1,isClearable:!0,options:ye,isLoading:ne}),e.jsx(a,{name:"personPostalCode",label:Oe,rules:_e,required:!1,control:s,type:"text"}),e.jsx(a,{name:"personSpecialDisease",label:Fe,rules:o,required:!1,control:s,type:"text"}),e.jsx(x,{name:"personAddress",label:G,control:s,containerClassNames:"col-span-4"}),e.jsx(x,{name:"personDescription",label:K,control:s,containerClassNames:"col-span-4 row-span-2"})]}),e.jsx("div",{className:"Modal__header flex justify-center items-center",children:e.jsx("h4",{className:"title-secondary",children:ts})}),e.jsx(ms,{data:f,isLoading:E,isFetching:Z}),e.jsx("div",{className:"Modal__header flex justify-center items-center",children:e.jsx("h4",{className:"title-secondary",children:Be})}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(a,{name:"selfEmployeeTypeName",label:He,rules:o,required:!1,control:s,type:"text"}),e.jsx(y,{name:"selfEmployeeStartDate",label:we,control:s,required:!1,setValue:p}),e.jsx(y,{name:"selfEmployeeEndDate",label:Ve,control:s,required:!1,setValue:p}),e.jsx(x,{name:"selfEmployeeDesc",label:K,control:s,containerClassNames:"col-span-4"})]}),e.jsx("div",{className:"Modal__header flex justify-center items-center",children:e.jsx("h4",{className:"title-secondary",children:Ge})}),e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(a,{name:"backupFirstName",label:H,rules:o,required:!1,control:s,type:"text"}),e.jsx(a,{name:"backupLastName",label:w,rules:o,required:!1,control:s,type:"text"}),e.jsx(a,{name:"backupRelation",label:B,rules:o,required:!1,control:s,type:"text"}),e.jsx(a,{name:"backupPhone",label:V,rules:n,required:!1,control:s,type:"text"}),e.jsx(a,{name:"backupCellphone",label:b,rules:n,required:!1,control:s,type:"text"}),e.jsx(x,{name:"backupAddress",label:G,control:s,containerClassNames:"col-span-3"})]}),e.jsx("div",{className:"flex-row mr-auto",children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(We,{}),variant:"contained",type:"submit",loading:q,color:"success",children:e.jsx("span",{children:Ye})})})]})})})},Ls=()=>{const[f]=xe(),I=f.get("mode");return e.jsxs("section",{className:"flex-col",children:[e.jsx(os,{title:I==="update"?rs:ns,back:!0}),I==="create"?e.jsx(ds,{}):I==="update"?e.jsx(ys,{}):null]})};export{Ls as default};
