import{r as l,A as W,cs as je,x as $,j as e,D as n,F as A,B as U,C as G,ct as K,cu as ge,S as h,bC as H,T,I as F,E as be,H as J,P as X,J as Z,K as ee,M as se,N as ne,Q as te,h as ye,cv as Ne,cw as ve,t as de,bs as pe,y as ce,i as _e,cx as Ce,c1 as ze,bJ as me,q as Pe,cy as Te,bl as ie,cz as Re}from"./index-BLUnRbnP.js";import{a as xe}from"./sharedApi-BsZa4CyX.js";import{f as Ie,g as Oe,h as Ae,i as we,d as Be}from"./useFetchLookUpData-XCzB5w1t.js";/* empty css                 */import{M as E}from"./Modal-9byRYG4r.js";import{D as he,$ as fe,s as De}from"./module-BgA5exZB.js";import{d as re}from"./table-options-DUfywDkC.js";import{S as ae}from"./index-B-J8NS7n.js";import{R as le}from"./Refresh-Bg9tv-0i.js";import{g as Fe,h as $e,i as ke,j as Le,k as Me,u as Ke}from"./statementApi-BPmw7zDc.js";import{u as Ee,m as Ge,C as Ue}from"./useCloseCalender-BtErBMpJ.js";import{i as Ye,S as We}from"./react-select-animated.esm-CKU__dhn.js";import{o as Qe,s as ue}from"./reactSelect-BGq5yAQc.js";import{d as Ve,a as qe}from"./datePicker-XXmtGBIB.js";import{D as He}from"./DeleteOutline-Cw8JH0bo.js";import{A as Je}from"./Add-BWPMDa6d.js";import{T as Xe,a as Ze,b as oe}from"./TabPanel-DPFDG3Kg.js";import{T as es}from"./Title-Bf582CR7.js";import"./requestApi-I57nflrb.js";function ss(){const[i,z]=l.useState({}),[R,s]=l.useState(""),[r,o]=l.useState(""),m=W(),g=new URLSearchParams(m.search),N=g.get("personID"),S=g.get("personDeathDate"),{data:b,isSuccess:P,error:j}=je({personID:N});l.useEffect(()=>{P&&z(b==null?void 0:b.itemList[0])},[P,b==null?void 0:b.itemList]),l.useEffect(()=>{var t;j&&(console.log(j),$.error(((t=j==null?void 0:j.data)==null?void 0:t.message)||j.error,{autoClose:2e3}))},[j]);const{data:d,isSuccess:v}=xe({lookUpType:"Gender",lookUpID:i==null?void 0:i.genderID}),{data:y,isSuccess:p}=xe({lookUpType:"MaritialStatus",lookUpID:i==null?void 0:i.maritalStatusID});return l.useEffect(()=>{var t;p&&(((t=y==null?void 0:y.itemList)==null?void 0:t.length)>1?s(null):s(y.itemList[0].lookUpName))},[p,y==null?void 0:y.itemList]),l.useEffect(()=>{var t;v&&(((t=d==null?void 0:d.itemList)==null?void 0:t.length)>1?o(null):o(d.itemList[0].lookUpName))},[v,d==null?void 0:d.itemList]),e.jsx("section",{className:"formContainer",children:e.jsxs("form",{method:"POST",className:"grid grid--col-4",children:[e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"کد ملی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n(i==null?void 0:i.personNationalCode)})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره کارمندی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n((i==null?void 0:i.personnelID)||"-")})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:i==null?void 0:i.personFirstName})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام خانوادگی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:i==null?void 0:i.personLastName})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره شناسنامه"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:n((i==null?void 0:i.personCertificateNo)||"-")})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"نام پدر"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(i==null?void 0:i.personFatherName)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:A(i==null?void 0:i.personBirthDate)})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"محل تولد"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(i==null?void 0:i.personBirthPlace)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"جنسیت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:r||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"وضعیت تاهل"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:R||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"مدرک تحصیلی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:(i==null?void 0:i.educationTypeCaption)||"-"})]})}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"ورود به خدمت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:A(i==null?void 0:i.employmentDate)||"-"})]})}),S!=="null"&&e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ فوت"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:A(S)})]})})]})})}function ns({statementID:i}){const z=l.useRef(),s=new URLSearchParams(location.search).get("personID"),[r,o]=l.useState(null),[m,g]=l.useState(null),[N,S]=l.useState([]),[b,P]=l.useState([]),[j,d]=l.useState([]),{data:v,isSuccess:y,isLoading:p,isFetching:a}=Ie({personnelStatementID:i}),{data:t,isSuccess:k,isLoading:L,isFetching:w}=je({personID:s});return l.useEffect(()=>{var _;if(y){const D=((_=v==null?void 0:v.itemList[0])==null?void 0:_.retiredRecorded1.trim()).match(/.{1,2}/g);d(D),o(v.itemList[0]),S(v.itemList[0].personnelStatementItems)}},[y,v]),l.useEffect(()=>{if(k){g(t.itemList[0]);const _=A(t.itemList[0].personBirthDate).split("/");P(_)}},[k,t]),e.jsx(e.Fragment,{children:p||a||L||w||r===null||m===null?e.jsx(E,{title:"در حال بارگذاری...",children:e.jsx(U,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(G,{color:"primary"})})}):e.jsxs("div",{className:"slip-container",children:[e.jsxs("div",{className:"slip-container",ref:z,children:[e.jsxs("div",{className:"slip-container__personnel-statement-header",children:[e.jsx("p",{className:"slip-container__logo--sub",children:"شهرداری تهران"}),e.jsx("h5",{children:"حکم کارگزینی"}),e.jsxs("p",{className:"slip-container__qr--serial",children:["شماره سریال :",e.jsx("span",{children:n(r==null?void 0:r.personnelStatementSerial)||"-"})]})]}),e.jsxs("table",{className:"slip-container__personnel-statement-table form-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"no-border-left",children:"۱- شماره مستخدم : "}),e.jsx("th",{className:"no-border-right",children:n(r==null?void 0:r.personnelID)}),e.jsx("th",{className:"no-border-left",children:"۲- شماره ملی : "}),e.jsx("th",{className:"no-border-right",children:n(m==null?void 0:m.personNationalCode)||"-"}),e.jsx("th",{className:"no-border-left",children:"۳- کد پستی :"}),e.jsx("th",{className:"no-border-right",children:n(m==null?void 0:m.personPostalCode)||"-"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۴- نام :"}),e.jsx("td",{className:"no-border-right",children:m==null?void 0:m.personFirstName}),e.jsx("td",{className:"no-border-left",children:"۵- نام خانوادگی :"}),e.jsx("td",{className:"no-border-right",children:m==null?void 0:m.personLastName}),e.jsx("td",{className:"no-border-left",children:"۶- نام پدر :"}),e.jsx("td",{className:"no-border-right",children:m==null?void 0:m.personFatherName})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۷- شماره شناسنامه :"}),e.jsx("td",{className:"no-border-right",children:n(m==null?void 0:m.personCertificateNo)||"-"}),e.jsx("td",{className:"no-border-left",children:"۸- محل صدور :‌"}),e.jsx("td",{className:"no-border-right"}),e.jsx("td",{className:"no-border-left",children:"۹- استان :"}),e.jsx("td",{className:"no-border-right"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left no-border-bottom",colSpan:2,children:"۱۰- تاریخ و محل تولد :"}),e.jsx("td",{className:"no-border-right no-border-bottom",children:r==null?void 0:r.personBirthPlace}),e.jsx("td",{className:"no-border-bottom",colSpan:3,children:"۱۱- بالاترین مدرک و رشته تحصیلی‌ :"})]}),e.jsxs("tr",{children:[e.jsxs("td",{className:"no-border-top no-border-left",children:["روز : ",b[2]]}),e.jsxs("td",{className:"no-border-top no-border-right no-border-left",children:["ماه : ",b[1]]}),e.jsxs("td",{className:"no-border-top no-border-right",children:["سال : ",b[0]]}),e.jsxs("td",{className:"no-border-top no-border-left",children:["مقطع تحصیلی : ",(r==null?void 0:r.educationLicence)||"-"]}),e.jsxs("td",{className:"no-border-top no-border-right no-border-left",children:["رشته : ",(r==null?void 0:r.eduBranch)||"-"]}),e.jsxs("td",{className:"no-border-top no-border-right",children:["گرایش : ",(r==null?void 0:r.eduBranchArea)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:"no-border-left",children:"۱۲- عنوان پست سازمانی :"}),e.jsx("td",{className:"no-border-right no-border-left",children:(r==null?void 0:r.positionName)||"-"}),e.jsx("td",{className:"no-border-right"}),e.jsx("td",{className:"no-border-left",children:"شماره پست :"}),e.jsxs("td",{className:"no-border-right",children:[n(r==null?void 0:r.positionCode)||"-"," "]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",colSpan:2,children:"۱۳- رسته :"}),e.jsxs("td",{className:"no-border-left",colSpan:2,children:["رشته و طبفه شغلی : ",r==null?void 0:r.jobName]}),e.jsxs("td",{children:["کد شغل : ",(r==null?void 0:r.jobCode)||"-"]}),e.jsxs("td",{children:["مرتبه : ",(r==null?void 0:r.jobDegree1)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"۱۴- گروه :"}),e.jsxs("td",{colSpan:3,className:"no-border-left",children:["۱۵- سنوات فابل قبول از نظر بازنشستگی : ",e.jsx("br",{}),e.jsxs("div",{className:"w-full flex justify-between items-center px-10 mt-1",children:[e.jsxs("span",{children:["روز : ",n(j[2])]}),e.jsxs("span",{children:["ماه : ",n(j[1])]}),e.jsxs("span",{children:["سال : ",n(j[0])]})]})]}),e.jsxs("td",{colSpan:2,children:["صندوق بازنشستگی : ",r==null?void 0:r.payLocation]})]}),e.jsx("tr",{children:e.jsx("td",{colSpan:6,children:e.jsxs("div",{className:"slip-container__person-info-table--checkbox",children:[e.jsx("span",{children:"۱۶- وضعیت ایثارگری :"}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",name:"personIsSacrificedFamily",id:"personIsSacrificedFamily",disabled:!0,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificedFamily",children:"خانواده شهید"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",name:"personIsValiant",id:"personIsValiant",disabled:!0,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsValiant",children:"جانباز"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",name:"personIsCaptive",disabled:!0,checked:m==null?void 0:m.isCaptivity,id:"personIsCaptive",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsCaptive",children:"آزاده"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",disabled:!0,name:"personIsWarrior",id:"personIsWarrior",checked:m==null?void 0:m.isWar,sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsWarrior",children:"رزمنده"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",name:"personIsSacrificed",disabled:!0,checked:m==null?void 0:m.isMartyrs,id:"personIsSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificed",children:"سایر"})]})]})})}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:3,children:["۱۷- واحد سازمانی : ",r==null?void 0:r.organizationUnit]}),e.jsxs("td",{colSpan:3,children:["۱۸- محل خدمت : ",(r==null?void 0:r.workPlace)||"-"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"no-border-left",children:"۱۹- وضعیت تاهل :"}),e.jsx("td",{className:"no-border-right",children:r==null?void 0:r.maritalStatusIDName}),e.jsxs("td",{children:["تعداد فرزندان :"," ",n(r==null?void 0:r.childCount)]}),e.jsx("td",{colSpan:3,children:"۲۰- ضریب افزایش سنواتی :"})]}),e.jsxs("tr",{children:[e.jsxs("th",{colSpan:3,children:["۲۱- نوع حکم : ",(r==null?void 0:r.orderType)||"-"]}),e.jsx("th",{colSpan:3,children:"حقوق و فوق العاده ها به ریال :"})]})]})]}),e.jsxs("div",{className:"flex justify-center items-start w-full gap-x-1",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("td",{style:{verticalAlign:"top"},children:"۲۲- شرح حکم :"})}),e.jsx("tr",{children:e.jsx("td",{children:(r==null?void 0:r.description)||"-"})})]})}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsxs("td",{children:["۲۳ - تاریخ اجرای حکم :"," ",A(r==null?void 0:r.personnelStatementRunDate)]})}),e.jsx("tr",{children:e.jsxs("td",{children:["ﺷﻤﺎﺭﻩ ﺣﮑﻢ :"," ",n(r==null?void 0:r.code)]})}),e.jsx("tr",{children:e.jsxs("td",{children:["۲۴- ﺗﺎﺭﯾﺦ ﺻﺪﻭﺭ ﺣﮑﻢ :"," ",A(r==null?void 0:r.registerDate)||"-"]})})]})})]}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[N==null?void 0:N.map((_,M)=>{const B=new ge(_.personnelStatementItemAmount.toString()).toSeparated();return e.jsxs("tr",{children:[e.jsx("td",{style:{verticalAlign:"top"},children:_.personnelStatementItemTypeName}),e.jsx("td",{className:"text-center",children:B})]},M)}),e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{children:"جمع مشمول کسور"}),e.jsx("td",{className:"text-center",children:h(n(r==null?void 0:r.fractionBaseAmount))})]})]})})]}),e.jsx("table",{className:"slip-container__personnel-statement-table form-table",children:e.jsxs("tbody",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:6,children:"۲۵- ﺟﻤﻊ ﺣﻘﻮﻕ ﻭ ﻣﺰﺍﯾﺎ ﺑﻪ ﺣﺮﻭﻑ :"})}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"no-border-bottom",children:"۲۶- ﻧﺎﻡ ﻭ ﻧﺎﻡ ﺧﺎﻧﻮﺍﺩﮔﯽ ﻣﻘﺎﻡ ﻣﺴﺌﻮﻝ :"}),e.jsx("td",{colSpan:3,className:"no-border-bottom",children:"ﻧﺴﺨﻪ ﻣﺮﺑﻮﻁ ﺑﻪ :"})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"no-border-top",children:"ﻋﻨﻮﺍﻥ ﭘﺴﺖ ﺛﺎﺑﺖ ﺳﺎﺯﻣﺎﻧﯽ :"}),e.jsx("td",{colSpan:3,style:{justifyContent:"center",textAlign:"center"},className:"no-border-top"})]})]})}),e.jsx("p",{style:{textAlign:"right",fontSize:"12px",justifyContent:"right",width:"100%"},children:"ﮐﺎﺭﺑﺮ :"})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(H,{dir:"ltr",endIcon:e.jsx(he,{}),onClick:()=>fe(z,{filename:"حکم کارمندی.pdf"}),variant:"contained",color:"primary",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"دانلود حکم"})})})]})})}function ts(){const[i,z]=l.useState(null),[R,s]=l.useState(!1),[r,o]=l.useState({}),[m,g]=l.useState([]),N=W(),b=new URLSearchParams(N.search).get("personID"),{data:P,isSuccess:j,isLoading:d,isFetching:v,refetch:y,error:p}=Oe({personID:b}),a=()=>{y()};l.useEffect(()=>{if(j){const u=P.itemList.map((_,M)=>({id:_.personnelStatementID,personnelStatementRowNum:M+1,orderTypePersonnel:_.orderType,personnelStatementSerial:_.personnelStatementSerial,personnelStatementNumber:_.personnelStatementID,personnelStatementTypeName:_.personnelStatementTypeName,personnelStatementIssueDate:_.insertTime,personnelStatementRunDate:_.personnelStatementRunDate}));g(u)}},[j,P]),l.useEffect(()=>{var u;p&&(console.log(p),$.error(((u=p==null?void 0:p.data)==null?void 0:u.message)||p.error,{autoClose:2e3}))},[p]);const t=()=>{s(!0)},k=l.useMemo(()=>[{accessorKey:"personnelStatementRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:u})=>e.jsx("div",{children:n(u)})},{accessorKey:"personnelStatementSerial",header:"سریال حکم",size:20,Cell:({renderedCellValue:u})=>e.jsx("div",{children:n(u)})},{accessorKey:"orderTypePersonnel",header:"نوع حکم",size:20},{accessorKey:"personnelStatementNumber",header:"شماره حکم",size:20,Cell:({renderedCellValue:u})=>e.jsx("div",{children:n(u)||"-"})},{accessorKey:"personnelStatementIssueDate",header:"تاریخ صدور",size:20,Cell:({renderedCellValue:u})=>e.jsx("div",{children:A(u)})},{accessorKey:"personnelStatementRunDate",header:"تاریخ اجرا",size:20,Cell:({renderedCellValue:u})=>e.jsx("div",{children:A(u)})},{accessorKey:"downloadStatement",header:"مشاهده",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:u})=>e.jsx(T,{title:`سریال ${n(u.original.personnelStatementSerial)}`,children:e.jsx(F,{color:"primary",sx:{padding:"0"},onClick:t,children:e.jsx(be,{})})})}],[]),L=J({...re,columns:k,data:m,muiTableBodyRowProps:({row:u})=>({onClick:()=>o(()=>({[u.id]:!0})),selected:r[u.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(U,{children:v?e.jsx(F,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(G,{size:20,value:100})}):e.jsx(T,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(F,{"aria-label":"refresh",color:"info",onClick:a,children:e.jsx(le,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:u=>e.jsx(X,{...u,page:n(u.page),slots:{previous:Z,next:ee,first:se,last:ne}})},getRowId:u=>u.id,onRowSelectionChange:o,state:{rowSelection:r}});return l.useEffect(()=>{const u=Object.keys(L.getState().rowSelection)[0];u&&z(u)},[L,r]),e.jsx(e.Fragment,{children:d?e.jsx("div",{className:"skeleton-lg",children:e.jsx(ae,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R&&i?e.jsx(E,{closeModal:()=>s(!1),children:e.jsx(ns,{statementID:i})}):null,e.jsx(te,{table:L})]})})}const rs=()=>{const[i,z]=l.useState({}),[R,s]=l.useState([]),r=W(),m=new URLSearchParams(r.search).get("personID"),{data:g,isSuccess:N,isLoading:S,isFetching:b,refetch:P,error:j}=Ae({personID:m}),d=()=>{P()};l.useEffect(()=>{if(N){const a=g.itemList.map(t=>({fractionYear:t.years??"-",chestName:t.chestName??"-",fractiontypeName:t.fractiontypeName??"-",fractionOrganization:t.organizationName??"-",farv:t.fractionTotalAmount1??"-",farvPersonnel:t.fractionPersonnelTotalAmount1??"-",farvOrganization:t.fractionOrganizationTotalAmount1??"-",ordib:t.fractionTotalAmount2??"-",ordibPersonnel:t.fractionPersonnelTotalAmount2??"-",ordibOrganization:t.fractionOrganizationTotalAmount2??"-",khord:t.fractionTotalAmount3??"-",khordPersonnel:t.fractionPersonnelTotalAmount3??"-",khordOrganization:t.fractionOrganizationTotalAmount3??"-",tir:t.fractionTotalAmount4??"-",tirPersonnel:t.fractionPersonnelTotalAmount4??"-",tirOrganization:t.fractionOrganizationTotalAmount4??"-",mordad:t.fractionTotalAmount5??"-",mordadPersonnel:t.fractionPersonnelTotalAmount5??"-",mordadOrganization:t.fractionOrganizationTotalAmount5??"-",shah:t.fractionTotalAmount6??"-",shahPersonnel:t.fractionPersonnelTotalAmount6??"-",shahOrganization:t.fractionOrganizationTotalAmount6??"-",mehr:t.fractionTotalAmount7??"-",mehrPersonnel:t.fractionPersonnelTotalAmount7??"-",mehrOrganization:t.fractionOrganizationTotalAmount7??"-",aban:t.fractionTotalAmount8??"-",abanPersonnel:t.fractionPersonnelTotalAmount8??"-",abanOrganization:t.fractionOrganizationTotalAmount8??"-",azar:t.fractionTotalAmount9??"-",azarPersonnel:t.fractionPersonnelTotalAmount9??"-",azarOrganization:t.fractionOrganizationTotalAmount9??"-",dey:t.fractionTotalAmount10??"-",deyPersonnel:t.fractionPersonnelTotalAmount10??"-",deyOrganization:t.fractionOrganizationTotalAmount10??"-",bahman:t.fractionTotalAmount11??"-",bahmanPersonnel:t.fractionPersonnelTotalAmount11??"-",bahmanOrganization:t.fractionOrganizationTotalAmount11??"-",esfand:t.fractionTotalAmount12??"-",esfandPersonnel:t.fractionPersonnelTotalAmount12??"-",esfandOrganization:t.fractionOrganizationTotalAmount12??"-"}));s(a)}},[N,g]),l.useEffect(()=>{var a;j&&(console.log(j),$.error(((a=j==null?void 0:j.data)==null?void 0:a.message)||j.error,{autoClose:2e3}))},[j]);const v=l.useMemo(()=>[{accessorKey:"fractionYear",header:"سال",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"fractiontypeName",header:"نوع سابقه",size:20},{accessorKey:"chestName",header:"نام صندوق",size:20},{accessorKey:"fractionOrganization",header:"سازمان",size:20},{accessorKey:"farv",header:"فروردین",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.farvOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.farvPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"ordib",header:"اردیبهشت",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.ordibOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.ordibPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"khord",header:"خرداد",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.khordOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.khordPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"tir",header:"تیر",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.tirOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.tirPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"mordad",header:"مرداد",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.mordadOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.mordadPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"shah",header:"شهریور",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.shahOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.shahPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"mehr",header:"مهر",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.mehrOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.mehrPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"aban",header:"آبان",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.abanOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.abanPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"azar",header:"آذر",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.azarOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.azarPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"dey",header:"دی",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.deyOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.deyPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"bahman",header:"بهمن",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.bahmanOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.bahmanPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})},{accessorKey:"esfand",header:"اسفند",size:20,Cell:({renderedCellValue:a,row:t})=>e.jsx(T,{title:e.jsxs("div",{style:{fontFamily:"sahel",fontSize:"1rem"},children:[`سهم کارفرما : ${h(n(t.original.esfandOrganization))}`,e.jsx("br",{}),`سهم کارمند : ${h(n(t.original.esfandPersonnel))}`]}),children:e.jsx("div",{children:h(n(a))})})}],[]),y=J({...re,columns:v,data:R,muiTableBodyRowProps:({row:a})=>({onClick:()=>z(()=>({[a.id]:!0})),selected:i[a.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(U,{children:b?e.jsx(F,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(G,{size:20,value:100})}):e.jsx(T,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(F,{"aria-label":"refresh",color:"info",onClick:d,children:e.jsx(le,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:a=>e.jsx(X,{...a,page:n(a.page),slots:{previous:Z,next:ee,first:se,last:ne}})},getRowId:a=>a.id,onRowSelectionChange:z,state:{rowSelection:i}});return e.jsx(e.Fragment,{children:S?e.jsx("div",{className:"skeleton-lg",children:e.jsx(ae,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(te,{table:y})})};function as(){const[i,z]=l.useState({}),[R,s]=l.useState([]),r=W(),m=new URLSearchParams(r.search).get("personID"),{data:g,isSuccess:N,isLoading:S,isFetching:b,refetch:P,error:j}=we({personID:m}),d=()=>{P()};l.useEffect(()=>{if(N){const a=g.itemList.map((t,k)=>({rowNum:k+1,personnelStatementOffTypeName:t.personnelStatementOffTypeName,personnelStatementOffYear:t.personnelStatementOffYear,personnelStatementOffMonth:t.personnelStatementOffMonth,personnelStatementOffDay:t.personnelStatementOffDay}));s(a)}},[N,g]),l.useEffect(()=>{var a;j&&(console.log(j),$.error(((a=j==null?void 0:j.data)==null?void 0:a.message)||j.error,{autoClose:2e3}))},[j]);const v=l.useMemo(()=>[{accessorKey:"rowNum",header:"ردیف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"personnelStatementOffTypeName",header:"نوع خدمت",size:20},{accessorKey:"personnelStatementOffYear",header:"سال",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"personnelStatementOffMonth",header:"ماه",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"personnelStatementOffDay",header:"روز",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"reaclTotal",header:"جمع واقعی",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})},{accessorKey:"total",header:"جمع",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:n(a)})}],[]),y=J({...re,columns:v,data:R,muiTableBodyRowProps:({row:a})=>({onClick:()=>z(()=>({[a.id]:!0})),selected:i[a.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(U,{children:b?e.jsx(F,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(G,{size:20,value:100})}):e.jsx(T,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(F,{"aria-label":"refresh",color:"info",onClick:d,children:e.jsx(le,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:a=>e.jsx(X,{...a,page:n(a.page),slots:{previous:Z,next:ee,first:se,last:ne}})},getRowId:a=>a.id,onRowSelectionChange:z,state:{rowSelection:i}});return e.jsx(e.Fragment,{children:S?e.jsx("div",{className:"skeleton-lg",children:e.jsx(ae,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(te,{table:y})})}const ls=["100","11","14","16","36","37","38","39","69","5","57","6","65","96","97","98"];function is({setShowGenerateStatementModal:i,setStatMessage:z,setShowStatModal:R}){const s=l.useRef(null),[r,o]=l.useState(null),[m,g]=l.useState(!1),{handleSubmit:N,formState:{errors:S},control:b,register:P,watch:j}=ye(),d=j(),v=W(),y=Ye(),p=new URLSearchParams(v.search),a=p.get("personID"),t=p.get("requestID"),[k,{isLoading:L}]=Fe(),{data:w,isSuccess:u,error:_}=$e(a),{statementTypes:M,statementTypesIsFetching:D,statementTypesIsLoading:B}=Be(),Y=Qe(M,"retirementStatementTypeID","retirementStatementTypeName"),Q=O=>{g(O)},V=O=>{o(O),g(!1)};l.useEffect(()=>{u&&o(Ne(w))},[u,w]);const c=async()=>{var O;try{const x=new Date(r);x.setMinutes(x.getMinutes()-x.getTimezoneOffset());const q=await k({...d,retirementStatementRunDate:x,personID:a,requestID:t,newAmount:ce(d==null?void 0:d.newAmount)||0,newSup:ce(d==null?void 0:d.newSup)||0}).unwrap();i(!1),$.success(q.message,{autoClose:2e3}),q.error&&q.error.length>0&&(z(n(q.error)),R(!0))}catch(x){console.log(x),$.error(((O=x==null?void 0:x.data)==null?void 0:O.message)||x.error,{autoClose:2e3})}};return Ee([s],[g]),e.jsx("section",{className:"formContainer-transparent flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:N(c),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-2",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(Ge.InputDatePicker,{value:r,format:"jYYYY/jMM/jDD",onChange:V,onOpenChange:Q,suffixIcon:e.jsx(Ue,{color:"action"}),open:m,style:Ve,wrapperStyle:qe,pickerProps:{ref:s}}),e.jsxs("div",{className:"inputBox__form--readOnly-label",children:[e.jsx("span",{children:"*"})," تاریخ اجرا"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ve,{name:"retirementStatementTypeID",control:b,rules:{required:!0},render:({field:{onChange:O}})=>e.jsx(We,{closeMenuOnSelect:!0,components:y,options:Y,onChange:x=>O(x?x.value:null),value:Y.find(x=>x.value===(d==null?void 0:d.retirementStatementTypeID)),name:"retirementStatementTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع حکم"]}),noOptionsMessage:ue.noOptionsMessage,loadingMessage:ue.loadingMessage,styles:{container:x=>({...x,position:"relative",height:"100%"}),control:x=>({...x,fontFamily:"IranYekan",cursor:"pointer",fontSize:"12px",height:"100%",maxWidth:"100%",maxHeight:"100%",overflow:"auto",textOverflow:"ellipsis",position:"relative"}),menu:x=>({...x,fontFamily:"IranYekan",zIndex:"5",height:"200px"}),option:x=>({...x,cursor:"pointer"}),menuList:x=>({...x,fontFamily:"IranYekan",zIndex:"5",height:"200px"})},isLoading:D||B})}),e.jsxs("label",{className:d!=null&&d.retirementStatementTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع حکم"]}),S.retirementStatementTypeID&&e.jsx("span",{className:"error-form",children:"نوع حکم اجباری است"})]}),ls.includes(d==null?void 0:d.retirementStatementTypeID)&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"inputBox__form",children:[S.newAmount&&e.jsx("span",{className:"error-form",children:S.newAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"newAmount",value:n(d==null?void 0:d.newAmount)||"",id:"newAmount",...P("newAmount",{pattern:{value:/^[۰-۹0-9]+$/,message:"از اعداد استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"newAmount",children:"میزان افزایش حقوق مبنا"})]}),e.jsxs("div",{className:"inputBox__form",children:[S.newSup&&e.jsx("span",{className:"error-form",children:S.newSup.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"newSup",value:n(d==null?void 0:d.newSup)||"",id:"newSup",...P("newSup",{pattern:{value:/^[۰-۹0-9]+$/,message:"از اعداد استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"newSup",children:"میزان افزایش حقوق تکمیلی"})]})]}),e.jsxs("div",{className:"inputBox__form col-span-2 row-span-2",children:[S.retirementStatementDesc&&e.jsx("span",{className:"error-form",children:S.retirementStatementDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:n(d==null?void 0:d.retirementStatementDesc),name:"retirementStatementDesc",id:"retirementStatementDesc",required:!0,...P("retirementStatementDesc",{pattern:{value:/^[آ-ی\s۰-۹.,;!؟@#$%^&*×،()_+=-]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"retirementStatementDesc",children:"شرح حکم"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(de,{dir:"ltr",endIcon:e.jsx(pe,{}),onClick:N,type:"submit",loading:L,variant:"contained",disabled:!r,color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function os({statementID:i,setShowStatementModal:z}){const R=l.useRef(),[s,r]=l.useState(null),[o,m]=l.useState(null),[g,N]=l.useState(null),[S,b]=l.useState([]),j=new URLSearchParams(location.search).get("personID"),{personDeathDate:d}=_e(c=>c.person),[v,{isLoading:y}]=ke(),{data:p,isSuccess:a,isLoading:t,isFetching:k,refetch:L,error:w}=Le({RetirementStatementID:i}),{data:u,isSuccess:_,isLoading:M,isFetching:D,error:B}=Ce(j);l.useEffect(()=>{var c;if(L(),a){m(p),N(p==null?void 0:p.documentSignature);const O=((c=p==null?void 0:p.retirementStatementAmountList)==null?void 0:c.filter(x=>["1001","1002","2001","2002"].includes(x.retirementStatementItemID))).map(x=>({retirementStatementItemID:x.retirementStatementItemID,retirementStatementItemAmount:x.retirementStatementItemAmount}));b(O)}},[a,p,L]),l.useEffect(()=>{_&&r(u.itemList[0])},[_,u]),l.useEffect(()=>{console.log(S)},[S]),l.useEffect(()=>{var c;w&&(console.log(w),$.error(((c=w==null?void 0:w.data)==null?void 0:c.message)||w.error,{autoClose:2e3}))},[w]),l.useEffect(()=>{var c;B&&(console.log(B),$.error(((c=B==null?void 0:B.data)==null?void 0:c.message)||B.error,{autoClose:2e3}))},[B]);const Y=(c,I)=>{b(O=>O.map(x=>x.retirementStatementItemID===I?{...x,retirementStatementItemAmount:Number(ce(ze(c.target.value)))}:x))},Q=async()=>{var c;try{const I=await v({retirementStatementID:i,data:S}).unwrap();$.success(I.message,{autoClose:2e3}),z(!1)}catch(I){$.error(((c=I==null?void 0:I.data)==null?void 0:c.message)||I.error,{autoClose:2e3})}};return l.useEffect(()=>{console.log("THIS IS THE SIGNATURE",g)},[g]),e.jsx(e.Fragment,{children:t||k||M||D||s===null||o===null?e.jsx(E,{title:"در حال بارگذاری...",children:e.jsx(U,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(G,{color:"primary"})})}):e.jsxs("div",{className:"slip-container",children:[e.jsxs("div",{className:"slip-container",ref:R,children:[e.jsxs("div",{className:"slip-container__logo",children:[e.jsx("img",{src:De,className:"slip-container__logo--img"}),e.jsx("p",{className:"slip-container__logo--sub",children:"سازمان بازنشستگی شهرداری تهران"})]}),e.jsxs("div",{className:"slip-container__qr",children:[e.jsx("div",{className:"slip-container__qr--box",children:"QR CODE"}),e.jsxs("p",{className:"slip-container__qr--serial",children:["سریال حکم :"," ",e.jsx("span",{children:n(o==null?void 0:o.retirementStatementSerial)})]})]}),e.jsxs("div",{className:"slip-container__header",children:[e.jsx("h5",{children:"بسمه تعالی"}),e.jsx("h5",{children:"حکم بازنشستگی"})]}),e.jsx("table",{className:"slip-container__person-info-table form-table",children:e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:4,children:"مشخصات فردی"})}),e.jsxs("tr",{children:[e.jsx("th",{children:`کد ملی : ${n(s==null?void 0:s.personNationalCode)||"-"}`}),e.jsx("th",{children:`نام : ${(s==null?void 0:s.personFirstName)||"-"}`}),e.jsx("th",{children:`نام خانوادگی : ${(s==null?void 0:s.personLastName)||"-"}`}),e.jsx("th",{children:`شماره بازنشستگی : ${n(s==null?void 0:s.retiredID)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`شماره شناسنامه : ${n(s==null?void 0:s.personCertificateNo)||"-"}`}),e.jsx("th",{children:`نام پدر : ${(s==null?void 0:s.personFatherName)||"-"}`}),e.jsx("th",{children:`تاریخ تولد : ${A(s==null?void 0:s.personBirthDate)||"-"}`}),e.jsx("th",{children:`محل تولد : ${(s==null?void 0:s.personBirthPlace)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`جنسیت : ${(s==null?void 0:s.genderName)||"-"}`}),e.jsx("th",{children:`تعداد فرزندان : ${n(o==null?void 0:o.retirementStatementChildrenCount)??"-"}`}),e.jsx("th",{children:`تعداد افراد تحت تکفل : ${n(o==null?void 0:o.retirementStatementChildrenCount)??"-"}`}),e.jsx("th",{children:`کد درمانی : ${n(s==null?void 0:s.insuranceCode)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`وضعیت تاهل : ${(s==null?void 0:s.maritalStatusName)||"-"}`}),e.jsx("th",{colSpan:3,children:`کد پستی : ${n(s==null?void 0:s.personPostalCode)||"-"}`})]}),e.jsx("tr",{children:e.jsx("th",{colSpan:4,children:e.jsxs("div",{className:"slip-container__person-info-table--checkbox",children:[e.jsx("span",{children:"وضعیت ایثارگری :"}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsSacrificedFamily,name:"personIsSacrificedFamily",id:"personIsSacrificedFamily",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificedFamily",children:"خانواده شهید"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsValiant,name:"personIsValiant",id:"personIsValiant",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsValiant",children:"جانباز"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsCaptive,name:"personIsCaptive",id:"personIsCaptive",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsCaptive",children:"آزاده"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsWarrior,name:"personIsWarrior",id:"personIsWarrior",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsWarrior",children:"رزمنده"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsSacrificed,name:"personIsSacrificed",id:"personIsSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificed",children:"شهید"})]}),e.jsxs("div",{children:[e.jsx(K,{size:"small",color:"success",checked:s==null?void 0:s.personIsChildOfSacrificed,name:"personIsChildOfSacrificed",id:"personIsChildOfSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsChildOfSacrificed",children:"فرزند شهید"})]})]})})})]})}),e.jsx("table",{className:"slip-container__personnel-info-table form-table",children:e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:3,children:"مشخصات پرسنلی"})}),e.jsxs("tr",{children:[e.jsx("th",{children:`تاریخ بازنشستگی : ${A(s==null?void 0:s.retirementDate)||"-"}`}),e.jsx("th",{children:`آخرین پست سازمانی : ${(s==null?void 0:s.retiredLastPosition)||"-"}`}),e.jsxs("th",{children:["آخرین محل خدمت :",e.jsx("br",{}),`${(s==null?void 0:s.retiredOrganizationName)||"-"}`]})]}),e.jsxs("tr",{children:[e.jsxs("th",{children:["سنوات خدمت واقعی : ",e.jsx("br",{}),`روز : ${n(s==null?void 0:s.retiredRealDurationDAY)||"-"}`,"   ",`ماه : ${n(s==null?void 0:s.retiredRealDurationMONTH)||"-"}`,"   ",`سال : ${n(s==null?void 0:s.retiredRealDurationYEAR)||"-"}`]}),e.jsx("th",{children:`سنوات ارفاقی : ${n(s==null?void 0:s.retiredGrantDuration)||"-"}`}),e.jsx("th",{children:"سنوات بازنشسنگی : -"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`گروه : ${n(o==null?void 0:o.retiredGroup)||"-"}`}),e.jsx("th",{children:`مرتبه : ${n(s==null?void 0:s.retiredJobDegree)||"-"}`}),e.jsx("th",{children:`مدرک تحصیلی : ${(s==null?void 0:s.educationTypeName)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`نوع حکم : ${(o==null?void 0:o.retirementStatementTypeName)||"-"}`}),e.jsx("th",{children:"عنوان شغل : -"}),e.jsx("th",{children:`تاریخ فوت : ${A(s==null?void 0:s.personDeathDate)||"-"}`})]})]})}),d?e.jsxs("table",{className:"slip-container__related-table form-table",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:11,children:"مشخصات افراد تحت تکفل"})}),e.jsxs("tr",{children:[e.jsx("th",{children:"ردیف"}),e.jsx("th",{children:"کد ملی"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"نام پدر"}),e.jsx("th",{children:"نسبت"}),e.jsx("th",{children:"تاریخ تولد"}),e.jsx("th",{children:"حقوق وظیفه"}),e.jsx("th",{children:"بازنشستگی تکمیلی"}),e.jsx("th",{children:"حق تاهل"}),e.jsx("th",{children:"حق اولاد"})]})]}),e.jsx("tbody",{children:o==null?void 0:o.retirementStatementRelatedList.map((c,I)=>e.jsxs("tr",{children:[e.jsx("td",{children:n(I+1)}),e.jsx("td",{children:n(c.personNationalCode)||"-"}),e.jsx("td",{children:c.personFirstName||"-"}),e.jsx("td",{children:c.personLastName||"-"}),e.jsx("td",{children:c.personFatherName||"-"}),e.jsx("td",{children:c.relationshipWithParentName||"-"}),e.jsx("td",{children:A(c.personBirthDate)}),e.jsx("td",{children:n(h(c.heirRight))||"-"}),e.jsx("td",{children:n(h(c.supplementaryRight))||"-"}),e.jsxs("td",{children:[" ",n(h(c.maritalRight))||"-"]}),e.jsx("td",{children:n(h(c.childRight))||"-"})]},c.retirementStatementRelatedID))})]}):e.jsxs("table",{className:"slip-container__related-table form-table",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:7,children:"مشخصات افراد تحت تکفل"})}),e.jsxs("tr",{children:[e.jsx("th",{width:"100",children:"ردیف"}),e.jsx("th",{children:"کد ملی"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"نام پدر"}),e.jsx("th",{children:"نسبت"}),e.jsx("th",{children:"تاریخ تولد"})]})]}),e.jsx("tbody",{children:o==null?void 0:o.retirementStatementRelatedList.map((c,I)=>e.jsxs("tr",{children:[e.jsx("td",{children:n(I+1)}),e.jsx("td",{children:n(c.personNationalCode)||"-"}),e.jsx("td",{children:c.personFirstName||"-"}),e.jsx("td",{children:c.personLastName||"-"}),e.jsx("td",{children:c.personFatherName||"-"}),e.jsx("td",{children:c.relationshipWithParentName||"-"}),e.jsx("td",{children:A(c.personBirthDate)})]},c.retirementStatementRelatedID))})]}),e.jsxs("div",{className:"slip-container__statement-items-table-container",children:[e.jsxs("table",{className:"slip-container__statement-items-desc-table form-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"شرح حکم :"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{verticalAlign:"top"},children:n(o==null?void 0:o.retirementStatementDesc)||"-"})})})]}),e.jsxs("table",{className:"slip-container__statement-items-desc-table form-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:2,children:"آیتم های حکم :"})})}),e.jsx("tbody",{children:o==null?void 0:o.retirementStatementAmountList.map(c=>{var I;return e.jsxs("tr",{style:{textAlign:"center"},children:[e.jsx("td",{children:c.retirementStatementItemName}),c.retirementStatementItemID==="1001"||c.retirementStatementItemID==="1002"||c.retirementStatementItemID==="2001"||c.retirementStatementItemID==="2002"?e.jsx("td",{children:e.jsx("input",{type:"text",disabled:p==null?void 0:p.retirementStatementIssueConfirmDate,value:n(h(((I=S.find(O=>O.retirementStatementItemID===c.retirementStatementItemID))==null?void 0:I.retirementStatementItemAmount)||"")),style:{textAlign:"center",border:"none",outline:"none",width:"100%"},onChange:O=>Y(O,c.retirementStatementItemID)})}):e.jsx("td",{children:n(h(c.retirementStatementItemAmount))})]},c.retirementStatementItemID)})}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsxs("td",{colSpan:2,children:[" ","جمع کل به ریال : ","      ",n(h(o==null?void 0:o.sumRetirementStatementAmount))??"-"]})})})]})]}),e.jsxs("table",{className:"slip-container__statement-footer-table form-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:`ناریخ اجرا : ${A(o==null?void 0:o.retirementStatementRunDate)||"-"}`}),e.jsx("th",{children:`تاریخ صدور : ${A(o==null?void 0:o.retirementStatementIssueDate)||"-"}`}),e.jsx("th",{children:`شماره صدور : ${n(o==null?void 0:o.retirementStatementNo)||"-"}`})]})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("th",{colSpan:3,style:{textAlign:"left",padding:"20px"},children:[e.jsx("img",{src:g,alt:"امضا",className:"w-[120px] mr-auto"}),"عضو هیات مدیره و مدیرعامل"]})})})]}),e.jsxs("div",{className:"slip-container__ending",children:[e.jsx("span",{children:"- - - - - - - - - - - - - - - - - - - - - - - - - - - -"}),e.jsx("p",{children:"۱. فرزندان اناث بعد از سن ۲۰ سالگی میبایست هر سال با در دست داشتن اصل شناسنامه خود به اداره بازنشستگی مراجعه نمایند."}),e.jsx("p",{children:"۲. فرزندان ذکور بعد از سن ۲۰ سالگی و تا پایان ۲۵ سالگی در صورت اشتغال به تحصیل میبایست در هر ترم گواهی دانشجویی معتبر ارائه نمایند."}),e.jsx("p",{children:"۳. تک وظیفه بگیران لازم است هر سال یکبار با در دست داشتن اصل شناسنامه خود به اداره بازنشستگی مراجعه نمایند."})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(H,{dir:"ltr",endIcon:e.jsx(he,{}),onClick:()=>fe(R,{filename:"حکم کارمندی.pdf"}),variant:"contained",color:"primary",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"چاپ حکم"})}),e.jsx(de,{dir:"ltr",endIcon:e.jsx(pe,{}),variant:"contained",onClick:Q,loading:y,color:"success",children:e.jsx("span",{children:"ذخیره"})})]})]})})}function cs(){const[i,z]=l.useState([]),[R,s]=l.useState(null),[r,o]=l.useState({}),[m,g]=l.useState(!1),[N,S]=l.useState(!1),[b,P]=l.useState(!1),[j,d]=l.useState(!1),[v,y]=l.useState(""),p=W(),t=new URLSearchParams(p.search).get("personID"),[k,{isLoading:L}]=Me(),{data:w,isSuccess:u,isLoading:_,isFetching:M,error:D,refetch:B}=Ke({personID:t});l.useEffect(()=>{if(B(),u){const C=w.map((f,Se)=>({id:f.retirementStatementID,statementRowNum:Se+1,retirementStatementSerial:f.retirementStatementSerial,retirementStatementTypeName:f.retirementStatementTypeName,retirementStatementNo:f.retirementStatementNo||"-",retirementStatementIssueDate:f.retirementStatementIssueDate,retirementStatementRunDate:f.retirementStatementRunDate,retirementStatementIssueConfirmDate:f.retirementStatementIssueConfirmDate}));z(C)}},[u,B,w,m,N]),l.useEffect(()=>{var C;D&&(console.log(D),$.error(((C=D==null?void 0:D.data)==null?void 0:C.message)||D.error,{autoClose:2e3}))},[D]);const Y=()=>{B()},Q=()=>{g(!0)},V=l.useCallback(()=>{S(!0)},[]),c=()=>{P(!0)},I=async()=>{var C;try{const f=await k({rsID:R}).unwrap();B(),S(!1),$.success(f.message,{autoClose:2e3})}catch(f){console.log(f),$.error(((C=f==null?void 0:f.data)==null?void 0:C.message)||f.error,{autoClose:2e3})}},O=l.useMemo(()=>{const C=[{accessorKey:"statementRowNum",size:20,header:"دریف",enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:f})=>e.jsx("div",{children:n(f)})},{accessorKey:"retirementStatementNo",size:20,header:"شماره حکم",Cell:({renderedCellValue:f})=>e.jsx("div",{children:n(f)})},{accessorKey:"retirementStatementSerial",size:20,header:"سریال حکم",Cell:({renderedCellValue:f})=>e.jsx("div",{children:n(f)})},{accessorKey:"retirementStatementTypeName",header:"نوع حکم"},{accessorKey:"retirementStatementIssueDate",header:"تاریخ صدور",Cell:({renderedCellValue:f})=>e.jsx("div",{children:n(A(f))})},{accessorKey:"retirementStatementRunDate",header:"تاریخ اجرا",Cell:({renderedCellValue:f})=>e.jsx("div",{children:n(A(f))})},{accessorKey:"downloadRetiredStatement",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:f})=>e.jsx(T,{title:`سریال ${n(f.original.retirementStatementSerial)}`,children:e.jsx(F,{color:"primary",onClick:c,sx:{padding:"0"},children:e.jsx(he,{})})})}];return p.pathname!=="/retirement/personnel-statements/info"&&C.push({accessorKey:"removeStatement",header:"حذف حکم",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:f})=>e.jsx(T,{title:f.original.retirementStatementIssueConfirmDate?"حکم تایید شده":"حذف حکم",children:e.jsx("span",{children:e.jsx(F,{color:"error",disabled:!!f.original.retirementStatementIssueConfirmDate,onClick:V,sx:{padding:"0"},children:e.jsx(He,{})})})})}),C},[V,p.pathname]),x=J({...re,columns:O,data:i,muiTableBodyRowProps:({row:C})=>({onClick:()=>o(()=>({[C.id]:!0})),selected:r[C.id],sx:{cursor:"pointer"}}),initialState:{density:"compact",showGlobalFilter:!0,sorting:[{id:"retirementStatementIssueDate",desc:!0}]},enablePagination:!1,enableBottomToolbar:!1,muiTableContainerProps:{sx:{height:"300px"}},renderTopToolbarCustomActions:()=>e.jsxs(U,{children:[M?e.jsx(F,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(G,{size:20,value:100})}):e.jsx(T,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(F,{"aria-label":"refresh",color:"info",onClick:Y,children:e.jsx(le,{fontSize:"small"})})})}),M?e.jsx(F,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(G,{size:20,value:100,color:"success"})}):e.jsx(T,{title:"صدور حکم",children:e.jsx("span",{children:e.jsx(F,{"aria-label":"refresh",color:"success",onClick:Q,children:e.jsx(Je,{fontSize:"small"})})})})]}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:C=>e.jsx(X,{...C,page:n(C.page),slots:{previous:Z,next:ee,first:se,last:ne}})},getRowId:C=>C.id,onRowSelectionChange:o,state:{rowSelection:r}});return l.useEffect(()=>{const C=Object.keys(x.getState().rowSelection)[0];C&&s(C)},[x,r,i]),e.jsx(e.Fragment,{children:_?e.jsx("div",{className:"skeleton-lg",children:e.jsx(ae,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[N?e.jsxs(E,{title:"حذف حکم",closeModal:()=>S(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این حکم اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(de,{dir:"ltr",endIcon:e.jsx(me,{}),variant:"contained",onClick:I,loading:L,color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(H,{dir:"ltr",endIcon:e.jsx(Pe,{}),onClick:()=>S(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):m?e.jsx(E,{title:"ایجاد حکم بازنشسته",closeModal:()=>g(!1),children:e.jsx(is,{setShowGenerateStatementModal:g,setShowStatModal:d,setStatMessage:y})}):b&&R?e.jsx(E,{closeModal:()=>P(!1),children:e.jsx(os,{statementID:R,setShowStatementModal:P})}):j?e.jsxs(E,{children:[e.jsxs("div",{className:"paragraph-primary",style:{width:"60ch",textAlign:"center",display:"flex",justifyContent:"center"},children:[e.jsx(Te,{color:"info",fontSize:"large"}),e.jsx("span",{style:{marginRight:"5px"},children:v})]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(H,{dir:"ltr",endIcon:e.jsx(me,{}),onClick:()=>d(!1),variant:"contained",color:"success",children:e.jsx("span",{children:"تایید"})})})]}):null,e.jsx(te,{table:x})]})})}function ds(){const[i,z]=l.useState("1"),R=(r,o)=>{z(o)};return e.jsx("section",{className:"u-margin-top-lg",children:e.jsxs(Xe,{value:i,children:[e.jsx(U,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(Ze,{onChange:R,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(ie,{label:"احکام کارمندی",value:"1"}),e.jsx(ie,{label:"تعرفه",value:"2"}),e.jsx(ie,{label:"احکام بازنشستگی",value:"3"})]})}),e.jsx(oe,{value:"1",sx:{padding:"0"},children:e.jsx(ts,{})}),e.jsx(oe,{value:"2",sx:{padding:"0"},children:e.jsxs("div",{className:"flex-col",children:[e.jsx(as,{}),e.jsx(rs,{})]})}),e.jsx(oe,{value:"3",sx:{padding:"0"},children:e.jsx(cs,{})})]})})}function Is(){return e.jsxs("section",{className:"flex-col u-margin-bottom-md",children:[e.jsx(es,{title:Re,back:!0}),e.jsx(ss,{}),e.jsx(ds,{})]})}export{Is as default};
