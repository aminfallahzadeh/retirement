import{D as se,p as K,h as ne,bu as te,N as le,r as x,cT as J,j as e,a as r,Q as Y,S as R,U as F,V as k,w as E,cU as pe,A as q,z as D,ar as S,_ as A,u as $,Y as G,P as V,C as Q,b as W,L as H,F as U,d as X,ag as de,cV as w,cW as ie,cX as xe,cY as he,T as O,I as L,E as re,an as z,B as oe,k as ce,ac as me,bi as ue,cZ as ye,W as Ie,aj as ge,al as fe,ao as je,X as be,v as ve}from"./index-BmsaxOuK.js";import{a as Ne}from"./reportApi-CPxxWU6Z.js";const Pe=[{value:"1",label:"گروهی"},{value:"2",label:"انفرادی"}],we=[{value:"M",label:"شهرداری"},{value:"C",label:"کشوری"},{value:"E",label:"مزایا"}],Re=[{value:"1403",label:"۱۴۰۳"},{value:"1402",label:"۱۴۰۲"},{value:"1401",label:"۱۴۰۱"},{value:"1400",label:"۱۴۰۰"},{value:"1399",label:"۱۳۹۹"},{value:"1398",label:"۱۳۹۸"},{value:"1397",label:"۱۳۹۷"},{value:"1396",label:"۱۳۹۶"},{value:"1395",label:"۱۳۹۵"},{value:"1394",label:"۱۳۹۴"},{value:"1393",label:"۱۳۹۳"},{value:"1392",label:"۱۳۹۲"},{value:"1391",label:"۱۳۰۱"},{value:"1390",label:"۱۳۹۰"}],ee=[{value:"1",label:"فروردین"},{value:"2",label:"اردیبهشت"},{value:"3",label:"خرداد"},{value:"4",label:"تیر"},{value:"5",label:"مرداد"},{value:"6",label:"شهریور"},{value:"7",label:"مهر"},{value:"8",label:"آبان"},{value:"9",label:"آذر"},{value:"10",label:"دی"},{value:"11",label:"بهمن"},{value:"12",label:"اسفند"}],ae=[{value:"1",label:"بازنشسته"},{value:"0",label:"وظیفه بگیر"},{value:"-1",label:"هر دو"}];function Oe(){const m=se(),a=K(),[i,{isLoading:p,isFetching:I}]=Ne(),{handleSubmit:y,formState:{errors:o},control:t,watch:h,register:g}=ne(),s=h(),C=async()=>{var j;try{const c=await i({CurrentYear:q(s.currentYear),CurrentMonth:q(s.currentMonth),PayItemTypeID:s.payItemID,pensionaryIsRetired:s.pensionaryIsRetired}).unwrap();if(c.itemList.length===0){D.error("نتیجه ای یافت نشد",{autoClose:2e3});return}const M=c.itemList.map((b,P)=>({id:b.personnelID,compareRowNum:r(P+1),payNationalCode:r(b.personNationalCode)||"-",payPersonID:r(b.personnelID)||"-",payFirstName:b.personFirstName||"-",payLastName:b.personLastName||"-",payCurrentMonth:S(r(b.currentpayItemAmount))||"-",payLastMonth:S(r(b.prepayItemAmount))||"-",payDiff:S(r(b.diffpay))||"-",payStatus:b.pensionaryStatusName||"-"}));a(J(M))}catch(c){console.log(c),D.error(((j=c==null?void 0:c.data)==null?void 0:j.message)||c.error,{autoClose:2e3})}},{payItemTypes:f,payItemTypesIsLoading:_,payItemTypesIsFetching:B}=te(),u=le(f,"payItemTypeID","payItemTypeName");return x.useEffect(()=>()=>{a(J([]))},[a]),e.jsx("section",{className:"formContainer flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,onSubmit:y(C),children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[o.currentYear&&e.jsx("span",{className:"error-form",children:o.currentYear.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"currentYear",value:r(s==null?void 0:s.currentYear)||"",id:"currentYear",required:!0,...g("currentYear",{required:"سال جاری اجباری است",minLength:{value:4,message:"ماه باید چهار رقمی باشد"},maxLength:{value:4,message:"ماه باید چهار رقمی باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"از اعداد استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"currentYear",children:[e.jsx("span",{children:"*"})," سال جاری"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(Y,{name:"currentMonth",control:t,rules:{required:!0},render:({field:{onChange:j}})=>e.jsx(R,{closeMenuOnSelect:!0,components:m,options:ee,onChange:c=>j(c?c.value:null),value:ee.find(c=>c.value===(s==null?void 0:s.currentMonth)),isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," ماه جاری"]}),noOptionsMessage:F.noOptionsMessage,loadingMessage:F.loadingMessage,styles:k})}),e.jsxs("label",{className:s!=null&&s.currentMonth?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," ماه جاری"]}),o.currentMonth&&e.jsx("span",{className:"error-form",children:"ماه اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(Y,{name:"payItemID",control:t,rules:{required:!0},render:({field:{onChange:j}})=>e.jsx(R,{closeMenuOnSelect:!0,components:m,options:u,onChange:c=>j(c?c.value:null),value:u.find(c=>c.value===(s==null?void 0:s.payItemID)),isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," آیتم حقوق"]}),noOptionsMessage:F.noOptionsMessage,loadingMessage:F.loadingMessage,styles:k,isLoading:_||B})}),e.jsxs("label",{className:s!=null&&s.payItemID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," آیتم حقوق"]}),o.payItemID&&e.jsx("span",{className:"error-form",children:" آیتم حقوق اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(Y,{name:"pensionaryIsRetired",control:t,rules:{required:!0},render:({field:{onChange:j}})=>e.jsx(R,{closeMenuOnSelect:!0,components:m,options:ae,onChange:c=>j(c?c.value:null),value:ae.find(c=>c.value===(s==null?void 0:s.pensionaryIsRetired)),isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع بازنشسته"]}),noOptionsMessage:F.noOptionsMessage,loadingMessage:F.loadingMessage,styles:k})}),e.jsxs("label",{className:s!=null&&s.pensionaryIsRetired?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع بازنشسته"]}),o.pensionaryIsRetired&&e.jsx("span",{className:"error-form",children:" نوع بازنشسته اجباری است"})]})]}),e.jsx("div",{style:{marginRight:"auto"},className:"flex-row",children:e.jsx(E,{dir:"ltr",type:"submit",endIcon:e.jsx(pe,{}),loading:p||I,onClick:y,variant:"contained",color:"success",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"جست و جو"})})})]})})}function Le(){const[m,a]=x.useState({}),{payCompareTableData:i}=A(o=>o.payCompareData),p=x.useMemo(()=>[{accessorKey:"compareRowNum",header:"ردیف",enableSorting:!1,enableColumnActions:!1,size:20},{accessorKey:"payNationalCode",header:"شماره ملی",size:20},{accessorKey:"payPersonID",header:"شماره کارمندی",size:20},{accessorKey:"payFirstName",header:"نام",size:20},{accessorKey:"payLastName",header:"نام خانوادگی",size:20},{accessorKey:"payCurrentMonth",header:"ماه جاری",size:20},{accessorKey:"payLastMonth",header:"ماه قیل",size:20},{accessorKey:"payDiff",header:"تفاوت",size:20},{accessorKey:"payStatus",header:"وضعیت",size:20}],[]),I=$({...G,columns:p,data:i,muiTableBodyRowProps:({row:o})=>({onClick:()=>a(()=>({[o.id]:!0})),selected:m[o.id],sx:{cursor:"pointer"}}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:o=>e.jsx(V,{...o,page:r(o.page),slots:{previous:Q,next:W,first:H,last:U}})},getRowId:o=>o.id,onRowSelectionChange:a,state:{rowSelection:m}});return e.jsx(X,{table:I})}const Ce=de.injectEndpoints({endpoints:m=>({getFinancialItems:m.query({query:a=>({url:`${w}/GetFinancialItems?personID=${a}`})}),getFinancialItem:m.query({query:a=>({url:`${w}/GetFinancialItem?FinancialItemID=${a}`})}),insertFinancialItem:m.mutation({query:a=>({url:`${w}/InsertFinancialItem`,method:"POST",body:a})}),removeFinancialItem:m.mutation({query:a=>({url:`${w}/RemoveFinancialItem?ID=${a}`,method:"POST"})})})}),{useLazyGetFinancialItemsQuery:_e,useLazyGetFinancialItemQuery:ze,useGetFinancialItemQuery:Te,useInsertFinancialItemMutation:Fe,useRemoveFinancialItemMutation:Se}=Ce;function Z(){const m=K(),[a,{isLoading:i,isFetching:p}]=_e();return{getFinancialItems:async y=>{try{const t=(await a(y).unwrap()).itemList.map((h,g)=>({id:h.financialItemID,personID:h.personID,financialItemRowNum:g+1,payItemTypeID:h.payItemTypeID||"-",payItemTypeName:h.payItemTypeName||"-",payItemAmount:h.financialItemAmount||"-"}));m(ie(t)),m(xe(y)),m(he(!0))}catch(o){console.log(o)}},isLoading:i,isFetching:p}}function qe(){const[m,a]=x.useState({}),{personTableData:i}=A(s=>s.personData),p=K(),{getFinancialItems:I,isLoading:y,isFetching:o}=Z();x.useEffect(()=>()=>{p(ie([]))},[p]);const t=x.useMemo(()=>[{accessorKey:"personRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:s})=>e.jsx("span",{children:r(s)})},{accessorKey:"personFirstName",header:"نام",size:20},{accessorKey:"personLastName",header:"نام خانوادگی",size:20},{accessorKey:"personNationalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:s})=>e.jsx("span",{children:r(s)})},{accessorKey:"personnelID",header:"شماره کارمندی",size:20,Cell:({renderedCellValue:s})=>e.jsx("span",{children:r(s)})},{accessorKey:"observeStaff",header:"مشاهده",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(O,{title:"مشاهده آیتمها",children:e.jsx(L,{color:"primary",sx:{padding:"0"},onClick:()=>I(s.original.id),children:e.jsx(re,{})})})}],[I]),h=$({...G,columns:t,data:i,muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:s=>e.jsx(V,{...s,page:r(s.page),slots:{previous:Q,next:W,first:H,last:U}})},muiTableBodyRowProps:({row:s})=>({onClick:()=>a(()=>({[s.id]:!0})),selected:m[s.id],sx:{cursor:"pointer"}}),getRowId:s=>s.id,onRowSelectionChange:a,state:{rowSelection:m}});return e.jsxs(e.Fragment,{children:[y||o?e.jsxs(z,{title:"در حال بارگیری",children:[e.jsx("p",{className:"paragraph-primary",style:{textAlign:"center"},children:"لطفا منتظر بمانید..."}),e.jsx(oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ce,{color:"primary"})})]}):null,e.jsx(X,{table:h})]})}function De({id:m}){const{handleSubmit:a,formState:{errors:i},register:p,watch:I,setValue:y}=ne(),o=u=>{console.log(u)},t=I(),{data:h,isLoading:g,isFetching:s,isSuccess:C,error:f}=Te(m);x.useEffect(()=>{if(C){const u=h==null?void 0:h.itemList[0];Object.keys(u).forEach(N=>{y(N,u[N]),(u.instalementAmount||u.instalementAmount)&&y("isInstallment",!0)})}},[C,h==null?void 0:h.itemList,y]),x.useEffect(()=>{var u;f&&f.status!=="FETCH_ERROR"&&D.error(((u=f==null?void 0:f.data)==null?void 0:u.message)||f.error,{autoClose:2e3})},[f]);const _=u=>{let N=q(ue(u.target.value));y(u.target.name,N)};return e.jsx(e.Fragment,{children:g||s?e.jsx(oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ce,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsx("form",{method:"POST",className:"flex-col",onSubmit:a(o),noValidate:!0,children:e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[i.payItemTypeID&&e.jsx("span",{className:"error-form",children:i.payItemTypeID.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(t==null?void 0:t.payItemTypeID)||"",name:"payItemTypeID",id:"payItemTypeID",required:!0,disabled:!0,...p("payItemTypeID",{required:"شناسه آیتم اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"شناسه فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"payItemTypeID",children:"شناسه آیتم"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.payItemTypeName&&e.jsx("span",{className:"error-form",children:i.payItemTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.payItemTypeName)||"",name:"payItemTypeName",id:"payItemTypeName",required:!0,disabled:!0,...p("payItemTypeName",{required:"شرح آیتم اجباری است",pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"payItemTypeName",children:"شرح آیتم"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.financialItemAmount&&e.jsx("span",{className:"error-form",children:i.financialItemAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:S(r(t.financialItemAmount))||"",name:"financialItemAmount",id:"financialItemAmount",required:!0,...p("financialItemAmount",{onChange:_,required:"مبلغ اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"مبلغ فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"financialItemAmount",children:"مبلغ کل"})]}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ شروع محاسبه فیش :"}),e.jsxs("div",{className:"inputBox__form",children:[i.executeYear&&e.jsx("span",{className:"error-form",children:i.executeYear.message}),e.jsx("input",{type:"text",disabled:!0,className:"inputBox__form--input",value:r(t==null?void 0:t.executeYear)||"",name:"executeYear",id:"executeYear",required:!0,...p("executeYear",{required:"سال اجباری است",minLength:{value:4,message:"سال باید ۴ رقمی باشد"},maxLength:{value:4,message:"سال باید ۴ رقمی باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"سال شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"executeYear",children:"سال"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.executeYear&&e.jsx("span",{className:"error-form",children:i.executeYear.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(t==null?void 0:t.executeMonth)||"",name:"executeMonth",id:"executeMonth",required:!0,disabled:!0,...p("executeMonth",{required:"ماه اجباری است",minLength:{value:2,message:"ماه باید ۲ رقمی باشد"},maxLength:{value:2,message:"ماه باید ۲ رقمی باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"ماه شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"executeYear",children:"ماه"})]}),e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(me,{size:"small",color:"success",checked:!!(t!=null&&t.isInstallment),name:"isInstallment",id:"isInstallment",disabled:!0,sx:{padding:.5},...p("isInstallment")}),e.jsx("label",{htmlFor:"isInstallment",className:"checkboxContainer__label",children:"قسطی"})]}),t.isInstallment&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[i.instalementCount&&e.jsx("span",{className:"error-form",children:i.instalementCount.message}),e.jsx("input",{type:"text",disabled:!0,className:"inputBox__form--input",value:r(t==null?void 0:t.instalementCount)||"",name:"instalementCount",id:"instalementCount",required:!0,...p("instalementCount",{required:"تعداد قسط اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"تعداد قسط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"instalementCount",children:"تعداد قسط"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.instalementAmount&&e.jsx("span",{className:"error-form",children:i.instalementAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(t==null?void 0:t.instalementAmount)||"",name:"instalementAmount",id:"instalementAmount",required:!0,disabled:!0,...p("instalementAmount",{required:"مبلغ قسط اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"مبلغ قسط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"instalementAmount",children:"مبلغ قسط"})]})]})]})})})})}function Be({setIsInsertItemModalOpen:m}){const[a,i]=x.useState({}),[p,I]=x.useState(""),y=se(),o=A(l=>l.financialData.payPersonID),{getFinancialItems:t}=Z(),[h,{isLoading:g}]=Fe();x.useEffect(()=>{console.log(a)},[a]);const{payItemTypes:s,payItemTypesIsLoading:C,payItemTypesIsFetching:f}=te(),_=le(s,"payItemTypeID","payItemTypeName"),B=async()=>{var l;try{const{isInstallment:d,...v}=a,n=await h({...v,financialItemID:null,expireData:null,payItemTypeName:null,personID:o}).unwrap();console.log(n),m(!1),D.success(n.message,{autoClose:2e3}),t(o)}catch(d){console.log(d),D.error(((l=d==null?void 0:d.data)==null?void 0:l.message)||d.error,{autoClose:2e3})}},u=l=>{const{name:d,value:v}=l.target;i({...a,[d]:q(ue(v))})},N=(l,d)=>{const{name:v}=d;if(l){const{value:n}=l;i({...a,[v]:n})}else i({...a,[v]:null})},[j,{isLoading:c}]=ye(),M=x.useCallback(async l=>{try{const d=await j(l).unwrap();I(d.itemList[0].payItemTypeName),console.log(d)}catch(d){console.log(d)}},[j]);x.useEffect(()=>{a.payItemTypeID?M(a.payItemTypeID):I("")},[a.payItemTypeID,M]);const b=l=>{const{name:d,checked:v}=l.target;i({...a,[d]:v})};return x.useEffect(()=>{if(a.instalementCount&&a.financialItemAmount){const l=parseInt(a.instalementCount),d=parseFloat(a.financialItemAmount);if(l>0){const v=d/l;i(n=>({...n,instalementAmount:v.toFixed()}))}}else(a.instalementCount===""||a.financialItemAmount==="")&&i(l=>({...l,instalementAmount:""}))},[a.instalementCount,a.financialItemAmount]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(R,{closeMenuOnSelect:!0,components:y,options:_,onChange:N,value:_.find(l=>l.value===(a==null?void 0:a.payItemTypeID)),name:"payItemTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," شرح آیتم"]}),noOptionsMessage:F.noOptionsMessage,loadingMessage:F.loadingMessage,styles:{container:l=>({...l,position:"relative",height:"100%"}),control:l=>({...l,fontFamily:"IranYekan",cursor:"pointer",fontSize:"12px",height:"100%",maxWidth:"100%",maxHeight:"100%",overflow:"auto",textOverflow:"ellipsis",position:"relative"}),menu:l=>({...l,fontFamily:"IranYekan",zIndex:"5",height:"200px"}),option:l=>({...l,cursor:"pointer"}),menuList:l=>({...l,fontFamily:"IranYekan",zIndex:"5",height:"200px"})},isLoading:C||f}),e.jsxs("label",{className:a!=null&&a.payItemTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," شرح آیتم"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(a.payItemTypeID)||"",name:"payItemTypeName",id:"payItemTypeName",disabled:!0,onChange:u,required:!0}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"payItemTypeName",children:[e.jsx("span",{children:"*"})," شناسه آیتم"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:u,value:r(S(a.financialItemAmount))||"",name:"financialItemAmount",id:"financialItemAmount",required:!0}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"financialItemAmount",children:[e.jsx("span",{children:"*"})," مبلغ کل"]})]}),e.jsx("h4",{className:"title-quaternary",style:{justifySelf:"start",alignSelf:"center"},children:"تاریخ شروع محاسبه فیش :"}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(a==null?void 0:a.executeYear)||"",name:"executeYear",id:"executeYear",required:!0,onChange:u}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"executeYear",children:[e.jsx("span",{children:"*"})," سال"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(a==null?void 0:a.executeMonth)||"",name:"executeMonth",id:"executeMonth",onChange:u,required:!0}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"executeYear",children:[e.jsx("span",{children:"*"})," ماه"]})]}),e.jsxs("div",{className:"checkboxContainer__item",style:{justifySelf:"start",alignSelf:"center"},children:[e.jsx(me,{size:"small",color:"success",checked:!!(a!=null&&a.isInstallment),onChange:b,name:"isInstallment",id:"isInstallment",sx:{padding:.5}}),e.jsx("label",{htmlFor:"isInstallment",className:"checkboxContainer__label",children:"قسطی"})]}),a.isInstallment&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",value:r(a==null?void 0:a.instalementCount)||"",name:"instalementCount",id:"instalementCount",required:!0,onChange:u}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"instalementCount",children:[e.jsx("span",{children:"*"})," تعداد قسط"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",onChange:u,value:S(r(a==null?void 0:a.instalementAmount))||"",name:"instalementAmount",id:"instalementAmount",required:!0,disabled:!0}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"instalementAmount",children:[e.jsx("span",{children:"*"})," مبلغ قسط"]})]})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(E,{dir:"ltr",endIcon:e.jsx(Ie,{}),variant:"contained",onClick:B,type:"submit",loading:g,color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})})})]})})}function Ye(){const[m,a]=x.useState({}),[i,p]=x.useState(!1),[I,y]=x.useState(null),[o,t]=x.useState(!1),[h,g]=x.useState(!1),[s,C]=x.useState(null),{canAddNewItem:f}=A(n=>n.financialData),{financialTableData:_}=A(n=>n.financialData),B=A(n=>n.financialData.payPersonID),[u,{isLoading:N}]=Se(),{getFinancialItems:j}=Z(),c=n=>{y(n),p(!0)},M=()=>{t(!0)},b=n=>{C(n),g(!0)},P=async()=>{var n;try{const T=await u(s).unwrap();console.log(T),j(B),g(!1),D.success(T.message,{autoClose:2e3})}catch(T){console.log(T),D.error(((n=T==null?void 0:T.data)==null?void 0:n.message)||T.error,{autoClose:2e3})}},l=x.useMemo(()=>[{accessorKey:"financialItemRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:n})=>e.jsx("span",{children:r(n)})},{accessorKey:"payItemTypeID",header:"شناسه آیتم",size:20,Cell:({renderedCellValue:n})=>e.jsx("span",{children:r(n)})},{accessorKey:"payItemTypeName",header:"نام آیتم",size:20},{accessorKey:"payItemAmount",header:"مبلغ",size:20,Cell:({renderedCellValue:n})=>e.jsx("span",{children:S(r(n))})},{accessorKey:"editPayItem",header:"مشاهده",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:n})=>e.jsx(O,{title:`مشاهده "${n.original.payItemTypeName}"`,children:e.jsx(L,{color:"primary",sx:{padding:"0"},onClick:()=>c(n.original.id),children:e.jsx(re,{})})})},{accessorKey:"removePayItem",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:n})=>e.jsx(O,{title:`حذف "${n.original.payItemTypeName}"`,children:e.jsx(L,{color:"error",sx:{padding:"0"},onClick:()=>b(n.original.id),children:e.jsx(ge,{})})})}],[]),d=$({...G,columns:l,data:_,muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:n=>e.jsx(V,{...n,page:r(n.page),slots:{previous:Q,next:W,first:H,last:U}})},renderTopToolbarCustomActions:()=>e.jsx(O,{title:"افزودن آیتم",children:e.jsx("span",{children:e.jsx(L,{"aria-label":"refresh",color:"success",onClick:M,disabled:!f,children:e.jsx(fe,{fontSize:"small"})})})}),muiTableBodyRowProps:({row:n})=>({onClick:()=>a(()=>({[n.id]:!0})),selected:m[n.id],sx:{cursor:"pointer"}}),getRowId:n=>n.id,onRowSelectionChange:a,state:{rowSelection:m}});return e.jsxs(e.Fragment,{children:[i&&e.jsx(z,{title:"مشاهده آیتم",closeModal:()=>p(!1),children:e.jsx(De,{id:I})}),o&&e.jsx(z,{title:"افزودن آیتم",closeModal:()=>t(!1),children:e.jsx(Be,{setIsInsertItemModalOpen:t})}),h&&e.jsxs(z,{title:"حذف آیتم",closeModal:()=>g(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این آیتم اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(E,{dir:"ltr",endIcon:e.jsx(je,{}),onClick:P,loading:N,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"بله"})}),e.jsx(be,{dir:"ltr",endIcon:e.jsx(ve,{}),onClick:()=>g(!1),variant:"contained",color:"error",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"خیر"})})]})]}),e.jsx(X,{table:d})]})}export{Oe as C,qe as P,ee as a,Ye as b,Re as c,Le as d,Pe as i,we as p};
