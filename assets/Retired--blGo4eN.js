import{c as Nn,j as e,r as l,n as os,l as ne,B as Oe,C as ve,o as x,i as we,p as Hs,m as c,a as fs,I as pe,T as Ie,b as an,q as De,t as tn,v as ln,w as Ds,x as rn,D as on,h as cn,H as gs,L as fn,y as Ws,u as yn,z as Zs,A as In}from"./index-CRgz4MxH.js";import{u as is,C as $}from"./index.esm-CUc0Hu80.js";import{u as Vs}from"./sharedApi-BLYfQrAr.js";import{u as bn,a as Cn,b as Dn,c as Qs,d as vn,e as Sn,f as Bn,R as _n}from"./RetiredStatementsGrid-jIxgtxmM.js";import{u as X,a as kn,b as Bs,c as Ys}from"./useFetchLookUpData-CnuACE1u.js";import{i as ys,S as H}from"./react-select-animated.esm-CR0smAGq.js";import{o as Y,s as h,a as G}from"./reactSelect-BGq5yAQc.js";import{S as Is,C as On}from"./index-BrJsqITE.js";import{E as _s}from"./EditOutlined-DKaWt1aU.js";import{u as bs,m as ue,C as de,d as ge,a as me}from"./datePicker-DCgZZHg3.js";import{u as ks,P as Os,C as Ps,a as Ms,L as Fs,F as Ls,M as Rs,T as As}from"./index.esm-BNuEpM3d.js";/* empty css                 */import{d as Ts}from"./table-options-DzerBP80.js";import{R as Us}from"./Refresh-CX8XWzrR.js";import{u as Pn,a as Mn,c as Fn,F as Ln}from"./createTree-DwYqC982.js";import{T as Rn}from"./Title-C2jgOG6Y.js";import{F as Tn,b as Un,N as An,c as En,d as qn,G as wn,B as $n,e as zn,P as Hn,S as Yn,W as Gn,f as Kn,V as Wn,g as Vn,h as Qn,i as Jn,j as Xn,M as Zn,k as ea,l as sa,m as na,E as aa,n as ta,o as la,p as ra,q as oa,r as ia,A as ca,s as pa,H as ua,t as da,D as ma,u as ha,v as xa,w as ga,x as ja,y as Na,z as fa,I as ya,J as Ia,K as ba,Q as Ca,T as Da,U as va,X as Sa,Y as Ba}from"./const-SWWyHmd9.js";import{M as rs}from"./Modal-CRttOeWn.js";import{S as Gs}from"./index-_hrzCeir.js";import{D as pn}from"./DeleteOutline-Dgaxnjq4.js";import{A as un}from"./Add-BTRTqv1c.js";import{b as _a}from"./requestApi-eN4miC3_.js";import{E as dn}from"./VisibilityOutlined-D3FY8dNs.js";import{u as ka,S as Oa,c as en}from"./dateConverter-Dkao3i1B.js";import{I as xe}from"./Input-DB9yLEzt.js";import{c as ts,S as ls}from"./SelectInput-C8K8gJhV.js";import{T as sn}from"./TextArea-B_5n7KCj.js";import{r as js,n as Pa,o as vs,a as Ss,m as Ma,e as Fa,p as La}from"./rules-CsNbLTDl.js";import{A as Es,a as qs,b as ws,c as $s}from"./ArrowDropDown-CBKQkKsg.js";import{T as Ra,a as Ta,b as zs}from"./TabPanel-DUSZrBQ-.js";import"./statementApi-BoO4cqvC.js";import"./module-DLOxzZ7f.js";import"./InfoOutlined-CzSLBTR7.js";import"./index-CmwJ1t4d.js";import"./excel-icon-Dq0N6FeV.js";import"./numberConverter-DebZ6KrJ.js";import"./messages-C1aWCoMO.js";const Ua=Nn(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"DoneOutlined");function Aa(){const[o,N]=l.useState(!1),C=ys(),[F,R]=l.useState([]),{handleSubmit:p,formState:{errors:B},control:_,register:T,watch:y,setValue:z}=is(),g=y(),W=os(),V=new URLSearchParams(W.search).get("personID"),[Q,{isLoading:A}]=bn(),[ae,{isLoading:i,isFetching:P}]=Vs(),{lookUpItems:M,lookUpItemsIsLoading:te,lookUpItemsIsFetching:s}=X({lookUpType:"Bank"}),d=Y(M,"lookUpID","lookUpName"),L=Y(F,"lookUpID","lookUpName"),{data:E,isSuccess:re,isLoading:oe,isFetching:n,error:J}=Cn(V),v=l.useCallback(async m=>{try{const U=await ae({lookUpType:"BankBranch",lookUpParentID:m}).unwrap();R(U.itemList)}catch(U){console.log(U)}},[ae,R]);l.useEffect(()=>{re&&Object.keys(E).forEach(m=>{z(m,E[m])})},[re,E,z]),l.useEffect(()=>{var m;J&&ne.error(((m=J==null?void 0:J.data)==null?void 0:m.message)||J.error,{autoClose:2e3})},[J]),l.useEffect(()=>{g.bankID&&v(g.bankID)},[g.bankID,v]);const u=()=>{N(!0)},t=async()=>{var m;try{const U=await Q({...g,ledgerCode:parseInt(c(g.ledgerCode))||null,insuranceAmount:parseFloat(c(g.insuranceAmount))||null,insuranceCoef:parseFloat(c(g.insuranceCoef))||null,accountNo:c(g.accountNo),personID:V}).unwrap();N(!1),ne.success(U.message,{autoClose:2e3})}catch(U){console.log(U),ne.error(((m=U==null?void 0:U.data)==null?void 0:m.message)||U.error,{autoClose:2e3})}};return l.useEffect(()=>{console.log(g)},[g]),e.jsx(e.Fragment,{children:oe||n?e.jsx(Oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ve,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:p(t),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:_,render:({field:{onChange:m}})=>e.jsx(H,{closeMenuOnSelect:!0,components:C,options:d,onChange:U=>m(U?U.value:null),isDisabled:!o,value:d.find(U=>U.value===(g==null?void 0:g.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:te||s})}),e.jsx("label",{htmlFor:"bankID",className:g!=null&&g.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:_,render:({field:{onChange:m}})=>e.jsx(H,{closeMenuOnSelect:!0,components:C,options:L,onChange:U=>m(U?U.value:null),isDisabled:!o||i||P||!g.bankID,value:L.find(U=>U.value===(g==null?void 0:g.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:i||P})}),e.jsx("label",{htmlFor:"bankBranchID",className:g!=null&&g.bankBranchID&&L.some(m=>m.value===g.bankBranchID)?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.accountNo&&e.jsx("span",{className:"error-form",children:B.accountNo.message}),e.jsx("input",{disabled:!o||oe,type:"text",id:"accountNo",name:"accountNo",value:x(g==null?void 0:g.accountNo)??"",className:"inputBox__form--input",required:!0,...T("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"accountNo",className:"inputBox__form--label",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.ledgerCode&&e.jsx("span",{className:"error-form",children:B.ledgerCode.message}),e.jsx("input",{disabled:!o,type:"text",id:"ledgerCode",name:"ledgerCode",value:x(g==null?void 0:g.ledgerCode)??"",className:"inputBox__form--input",required:!0,...T("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"دفتر کل باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"ledgerCode",className:"inputBox__form--label",children:"دفتر کل"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.insuranceCoef&&e.jsx("span",{className:"error-form",children:B.insuranceCoef.message}),e.jsx("input",{disabled:!o,type:"text",id:"insuranceCoef",name:"insuranceCoef",value:x(g==null?void 0:g.insuranceCoef)??"",className:"inputBox__form--input",required:!0,...T("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,٫][۰-۹0-9]+)?$/,message:"ضریب بیمه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceCoef",className:"inputBox__form--label",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.insuranceAmount&&e.jsx("span",{className:"error-form",children:B.insuranceAmount.message}),e.jsx("input",{disabled:!o,type:"text",id:"insuranceAmount",name:"insuranceAmount",value:x(g==null?void 0:g.insuranceAmount)??"",className:"inputBox__form--input",required:!0,...T("insuranceAmount",{pattern:{value:/^[۰-۹0-9]+$/,message:"بیمه تبعی باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceAmount",className:"inputBox__form--label",children:"بیمه تبعی"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),loading:A,disabled:!o,onClick:p,type:"submit",variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})}),e.jsx(Hs,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:u,disabled:o,variant:"contained",color:"primary",children:e.jsx("span",{children:"ویرایش"})})]})]})})})}function Js({statusHistoryTableData:o,isLoading:N,isFetching:C,handleRefresh:F}){const[R,p]=l.useState({pageIndex:0,pageSize:3}),B=l.useMemo(()=>[{accessorKey:"pensionaryStatusRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:y})=>e.jsx("div",{children:x(y)})},{accessorKey:"pensionaryStatusName",header:"وضعیت",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:x(y)})},{accessorKey:"pensionaryStartdate",header:"تاریخ شروع",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:fs(y)})},{accessorKey:"isActive",header:"وضعیت",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:y===!0?"فعال":"غیرفعال"})}],[]),_=ks({...Ts,columns:B,data:o,muiTopToolbarProps:{sx:{overflow:"none"}},muiTableBodyRowProps:({row:y})=>({sx:{backgroundColor:y.original.isActive?"#00FF00":""}}),muiTableHeadProps:{sx:{zIndex:0}},renderTopToolbarCustomActions:()=>e.jsx(Oe,{children:N||C?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"info",onClick:F,children:e.jsx(Us,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:y=>e.jsx(Os,{...y,page:x(y.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},initialState:{density:"compact",sorting:[{id:"isActive",desc:!0}]},onPaginationChange:p,state:{pagination:R}});return e.jsx(Rs,{table:_})}function Ea(){const o=l.useRef(null),N=l.useRef(null),[C,F]=l.useState(!1),[R,p]=l.useState(null),[B,_]=l.useState(null),[T,y]=l.useState(!1),[z,g]=l.useState(!1),[W,K]=l.useState([]),V=ys(),{handleSubmit:Q,formState:{errors:A},control:ae,register:i,watch:P,setValue:M,reset:te}=is(),s=P(),[d,{isLoading:L}]=Dn(),re=new URLSearchParams(location.search).get("personID"),{personDeathDate:oe}=an(q=>q.person),{data:n,isSuccess:J,isLoading:v,isFetching:u,refetch:t,error:r}=Qs(re),{data:m,isSuccess:U,isLoading:a,isFetching:Ne,error:le,refetch:ee}=vn(re);l.useEffect(()=>{if(t(),J){const q=n==null?void 0:n.itemList.map((k,he)=>({id:k.pensionaryID,isActive:k.pensionaryIsActive,pensionaryStatusRowNum:he+1,pensionaryStatusName:k.pensionaryStatusName||"-",pensionaryStartdate:De(k.pensionaryStartdate)||"-"}));K(q)}return()=>{K([])}},[t,J,n]),l.useEffect(()=>{if(ee(),U){const q=m==null?void 0:m.itemList[0];q&&Object.keys(q).forEach(k=>{M(k,q[k])})}return()=>{te()}},[U,m,M,te,ee]),l.useEffect(()=>{var q;le&&(console.log(le),ne.error(((q=le==null?void 0:le.data)==null?void 0:q.message)||le.error,{autoClose:2e3}))},[le]),l.useEffect(()=>{var q;r&&(console.log(r),ne.error(((q=r==null?void 0:r.data)==null?void 0:q.message)||r.error,{autoClose:2e3}))},[r]);const{organizations:se,organizationIsLoading:Z,organizationIsFetching:ce}=kn({}),{lookUpItems:be,lookUpItemsIsLoading:Pe,lookUpItemsIsFetching:$e}=X({lookUpType:"EmploymentType"}),{pensionaryStatus:Se,pensionaryStatusIsLoading:ie,pensionaryStatusIsFetching:Ce}=Bs({pensionaryStatusCategory:"R",pensionaryStatusIsDead:oe}),Be=Y(se,"organizationID","organizationName"),Me=Y(be,"lookUpID","lookUpName"),Fe=Y(Se,"pensionaryStatusID","pensionaryStatusName");l.useEffect(()=>{p(De(s==null?void 0:s.retirementDate))},[s==null?void 0:s.retirementDate]),l.useEffect(()=>{_(De(s==null?void 0:s.pensionaryStartDate))},[s==null?void 0:s.pensionaryStartDate]);const Le=()=>{F(!0)},je=()=>{t()},ze=q=>{g(q)},Re=q=>{y(q)},Te=q=>{p(q),g(!1)},Ue=q=>{_(q),y(!1)},Ae=async()=>{var q;try{let k,he;R?(k=new Date(R),k.setMinutes(k.getMinutes()-k.getTimezoneOffset())):k=null,B?(he=new Date(B),he.setMinutes(he.getMinutes()-he.getTimezoneOffset())):he=null;const _e=await d({...s,retiredGroup:parseInt(c(s.retiredGroup)),retiredOrganizationID:c(s.retiredOrganizationID),retiredJobDegreeCoef:parseInt(c(s.retiredJobDegreeCoef)),retiredRealDuration:parseInt(c(s.retiredRealDuration)),retiredGrantDuration:parseInt(c(s.retiredGrantDuration)),retirementDate:k,pensionaryStartDate:he,personID:re}).unwrap();ee(),F(!1),t(),ne.success(_e.message,{autoClose:2e3})}catch(k){console.log(k),ne.error(((q=k==null?void 0:k.data)==null?void 0:q.message)||k.error,{autoClose:2e3})}};return bs([o,N],[g,y]),e.jsx(e.Fragment,{children:a||Ne?e.jsx(Oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ve,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:Q(Ae),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[A.retiredGroup&&e.jsx("span",{className:"error-form",children:A.retiredGroup.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredGroup",name:"retiredGroup",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredGroup)??"",required:!0,...i("retiredGroup",{required:"گروه اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"گروه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{htmlFor:"retiredGroup",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," گروه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"retiredOrganizationID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:Be,onChange:k=>q(k?k.value:null),isDisabled:!C,value:Be.find(k=>k.value===(s==null?void 0:s.retiredOrganizationID)),name:"retiredOrganizationID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Z||ce})}),e.jsxs("label",{className:s!=null&&s.retiredOrganizationID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),A.retiredOrganizationID&&e.jsx("span",{className:"error-form",children:" محل خدمت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[A.retiredLastPosition&&e.jsx("span",{className:"error-form",children:A.retiredLastPosition.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredLastPosition",name:"retiredLastPosition",value:(s==null?void 0:s.retiredLastPosition)||"",className:"inputBox__form--input",required:!0,...i("retiredLastPosition",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"retiredLastPosition",className:"inputBox__form--label",children:"سمت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"employmentTypeID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:Me,onChange:k=>q(k?k.value:null),isDisabled:!C,value:Me.find(k=>k.value===(s==null?void 0:s.employmentTypeID)),name:"employmentTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Pe||$e})}),e.jsxs("label",{className:s!=null&&s.employmentTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),A.employmentTypeID&&e.jsx("span",{className:"error-form",children:"نوع استخدام اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!C,value:R,defaultValue:null,onChange:Te,onOpenChange:ze,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:z,style:ge,wrapperStyle:me,pickerProps:{ref:o}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ بازنشستگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:Fe,onChange:k=>q(k?k.value:null),isDisabled:!C,value:Fe.find(k=>k.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:ie||Ce})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت"]}),A.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!C,value:B,defaultValue:null,onChange:Ue,onOpenChange:Re,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:T,style:ge,wrapperStyle:me,pickerProps:{ref:N}}),e.jsxs("div",{className:"inputBox__form--readOnly-label",children:[e.jsx("span",{children:"*"})," تاریخ تغییر وضعیت"]})]}),e.jsxs("div",{className:"inputBox__form",children:[A.retiredJobDegreeCoef&&e.jsx("span",{className:"error-form",children:A.retiredJobDegreeCoef.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredJobDegreeCoef",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredJobDegreeCoef)??"",name:"retiredJobDegreeCoef",required:!0,...i("retiredJobDegreeCoef",{pattern:{value:/^[۰-۹0-9]+$/,message:"ضریب مدیریتی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredJobDegreeCoef",className:"inputBox__form--label",children:"ضریب مدیریتی"})]}),e.jsxs("div",{className:"inputBox__form",children:[A.retiredRealDuration&&e.jsx("span",{className:"error-form",children:A.retiredRealDuration.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredRealDuration",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredRealDuration)??"",name:"retiredRealDuration",required:!0,...i("retiredRealDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابفه حقیقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredRealDuration",className:"inputBox__form--label",children:"سابقه حقیقی بازنشسته"})]}),e.jsxs("div",{className:"inputBox__form",children:[A.retiredGrantDuration&&e.jsx("span",{className:"error-form",children:A.retiredGrantDuration.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredGrantDuration",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredGrantDuration)??"",name:"retiredGrantDuration",required:!0,...i("retiredGrantDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابقه ارفاقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredGrantDuration",className:"inputBox__form--label",children:"سابقه ارفاقی بازنشسته"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Js,{statusHistoryTableData:W,isLoading:v,isFetching:u,handleRefresh:je}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),loading:L,disabled:!C,type:"submit",onClick:Q,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})}),e.jsx(Hs,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:Le,disabled:C,variant:"contained",color:"primary",children:e.jsx("span",{children:"ویرایش"})})]})]})})})}const qa=()=>{const[o]=tn(),[N,C]=l.useState([]),[F,R]=l.useState([]),p=o.get("personID"),{data:B,isLoading:_,isSuccess:T,refetch:y}=Pn(),{data:z,isLoading:g,isSuccess:W,refetch:K}=Mn(p);l.useEffect(()=>{W&&R(z.itemList)},[W,z]),l.useEffect(()=>{if(T){const Q=Fn(B.itemList);C(Q)}},[T,B]);const V=l.useCallback(()=>{y(),K()},[y,K]);return e.jsx(Ln,{structure:N,files:F,isLoading:_||g,refetch:V,access:"files"})},wa=ln.injectEndpoints({endpoints:o=>({getRelatedListByParentPersonID:o.query({query:N=>({url:`${Ds}/GetRelatedListByParentPersonID?parentPersonID=${N}`})}),getRelated:o.query({query:N=>({url:`${Ds}/GetRelated?personID=${N}`})}),insertRelated:o.mutation({query:N=>({url:`${Ds}/InsertRelated`,method:"POST",body:N})}),updateRelated:o.mutation({query:N=>({url:`${Ds}/UpdateRelated`,method:"POST",body:N})}),removeRelated:o.mutation({query:({pensionaryID:N})=>({url:`${Ds}/RemoveRelated?pensionaryID=${N}`,method:"POST"})})})}),{useGetRelatedListByParentPersonIDQuery:$a,useGetRelatedQuery:za,useInsertRelatedMutation:Ha,useUpdateRelatedMutation:Ya,useRemoveRelatedMutation:Ga}=wa;function Ka({setShowCreateRelatedModal:o,refetch:N}){const C=l.useRef(null),F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),B=l.useRef(null),[_,T]=l.useState(null),[y,z]=l.useState(null),[g,W]=l.useState(null),[K,V]=l.useState(null),[Q,A]=l.useState(null),[ae,i]=l.useState(!1),[P,M]=l.useState(!1),[te,s]=l.useState(!1),[d,L]=l.useState(!1),[E,re]=l.useState(!1),{handleSubmit:oe,formState:{errors:n},control:J,register:v,watch:u}=is(),t=u(),[r,{isLoading:m}]=Ha(),U=os(),Ne=new URLSearchParams(U.search).get("personID"),le=ys(),{relationships:ee,relationshipIsLoading:se,relationshipIsFetching:Z}=Ys(),{pensionaryStatus:ce,pensionaryStatusIsLoading:be,pensionaryStatusIsFetching:Pe}=Bs({pensionaryStatusCategory:"L"}),{lookUpItems:$e,lookUpItemsIsLoading:Se,lookUpItemsIsFetching:ie}=X({lookUpType:"MaritialStatus"}),{lookUpItems:Ce,lookUpItemsIsLoading:Be,lookUpItemsIsFetching:Me}=X({lookUpType:"EducationType"}),{lookUpItems:Fe,lookUpItemsIsLoading:Le,lookUpItemsIsFetching:je}=X({lookUpType:"UniversityType"}),{lookUpItems:ze,lookUpItemsIsLoading:Re,lookUpItemsIsFetching:Te}=X({lookUpType:"Country"}),{lookUpItems:Ue,lookUpItemsIsLoading:Ae,lookUpItemsIsFetching:He}=X({lookUpType:"State"}),{lookUpItems:q,lookUpItemsIsLoading:k,lookUpItemsIsFetching:he}=X({lookUpType:"City"}),_e=Y(ee,"relationshipID","relationshipName"),We=Y(ce,"pensionaryStatusID","pensionaryStatusName"),Ve=Y($e,"lookUpID","lookUpName"),Qe=Y(Ce,"lookUpID","lookUpName"),Je=Y(Fe,"lookUpID","lookUpName"),Xe=Y(ze,"lookUpID","lookUpName"),Ze=Y(Ue,"lookUpID","lookUpName"),Ye=Y(q,"lookUpID","lookUpName"),as=O=>{T(O),M(!1)},w=O=>{z(O),s(!1)},f=O=>{W(O),L(!1)},fe=O=>{V(O),re(!1)},ye=O=>{A(O),i(!1)},es=O=>{M(O)},cs=O=>{s(O)},Ge=O=>{i(O)},ps=O=>{L(O)},us=O=>{re(O)},ds=async()=>{var O;try{let I,ke,Ee,Ke,D;_?(I=new Date(_),I.setMinutes(I.getMinutes()-I.getTimezoneOffset())):I=null,Q?(D=new Date(Q),D.setMinutes(D.getMinutes()-D.getTimezoneOffset())):D=null,y?(ke=new Date(y),ke.setMinutes(ke.getMinutes()-ke.getTimezoneOffset())):ke=null,g?(Ee=new Date(g),Ee.setMinutes(Ee.getMinutes()-Ee.getTimezoneOffset())):Ee=null,K?(Ke=new Date(K),Ke.setMinutes(Ke.getMinutes()-Ke.getTimezoneOffset())):Ke=null;const j=await r({...t,parentPersonID:Ne,relationshipWithParentID:c(t.relationshipWithParentID),personCertificateNo:c(t.personCertificateNo),personNationalCode:c(t.personNationalCode),pensionaryStatusID:c(t.pensionaryStatusID),maritalStatusID:c(t.maritalStatusID),educationTypeID:c(t.educationTypeID),universityID:c(t.universityID),personPhone:c(t.personPhone),personCellPhone:c(t.personCellPhone),personCellPhone2:c(t.personCellPhone2),personRegion:parseInt(c(t.personRegion))||null,personArea:parseInt(c(t.personArea))||null,personCountryID:c(t.personCountryID),personCityID:c(t.personCityID),personStateID:c(t.personStateID),personPostalCode:c(t.personPostalCode),backupPhone:c(t.backupPhone),backupCellphone:c(t.backupCellphone),personBirthDate:I,personMaritalDate:ke,selfEmployeeStartDate:Ee,selfEmployeeEndDate:Ke,pensionaryStartDate:D}).unwrap();o(!1),N(),ne.success(j.message,{autoClose:2e3})}catch(I){console.log(I),ne.error(((O=I==null?void 0:I.data)==null?void 0:O.message)||I.error,{autoClose:2e3})}};return bs([C,F,R,p,B],[M,s,L,re,i]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:oe(ds),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:J,rules:{required:!0},render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:_e,onChange:I=>O(I?I.value:null),value:_e.find(I=>I.value===(t==null?void 0:t.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:se||Z})}),e.jsxs("label",{className:t!=null&&t.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),n.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFirstName&&e.jsx("span",{className:"error-form",children:n.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...v("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personLastName&&e.jsx("span",{className:"error-form",children:n.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...v("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personNationalCode&&e.jsx("span",{className:"error-form",children:n.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(t==null?void 0:t.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...v("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCertificateNo&&e.jsx("span",{className:"error-form",children:n.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(t==null?void 0:t.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...v("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFatherName&&e.jsx("span",{className:"error-form",children:n.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...v("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:_,onChange:as,format:"jYYYY/jMM/jDD",onOpenChange:es,suffixIcon:e.jsx(de,{color:"action"}),open:P,style:ge,wrapperStyle:me,pickerProps:{ref:C}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:y,onChange:w,format:"jYYYY/jMM/jDD",onOpenChange:cs,suffixIcon:e.jsx(de,{color:"action"}),open:te,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personBirthPlace&&e.jsx("span",{className:"error-form",children:n.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...v("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:J,rules:{required:!0},render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:We,onChange:I=>O(I?I.value:null),value:We.find(I=>I.value===(t==null?void 0:t.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:be||Pe})}),e.jsxs("label",{className:t!=null&&t.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),n.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:Q,defaultValue:null,onChange:ye,onOpenChange:Ge,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:ae,style:ge,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ve,onChange:I=>O(I?I.value:null),value:Ve.find(I=>I.value===(t==null?void 0:t.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Se||ie})}),e.jsx("label",{className:t!=null&&t.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"educationTypeID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Qe,onChange:I=>O(I?I.value:null),value:Qe.find(I=>I.value===(t==null?void 0:t.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Be||Me})}),e.jsx("label",{className:t!=null&&t.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.educationTypeCaption&&e.jsx("span",{className:"error-form",children:n.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...v("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"universityID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Je,onChange:I=>O(I?I.value:null),value:Je.find(I=>I.value===(t==null?void 0:t.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Le||je})}),e.jsx("label",{className:t!=null&&t.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.universityCaption&&e.jsx("span",{className:"error-form",children:n.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...v("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone&&e.jsx("span",{className:"error-form",children:n.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:(t==null?void 0:t.personCellPhone)||"",id:"personCellPhone1",required:!0,...v("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone2&&e.jsx("span",{className:"error-form",children:n.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:(t==null?void 0:t.personCellPhone2)||"",id:"personCellPhone22",required:!0,...v("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPhone&&e.jsx("span",{className:"error-form",children:n.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:(t==null?void 0:t.personPhone)||"",id:"personPhone1",required:!0,...v("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personRegion&&e.jsx("span",{className:"error-form",children:n.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:(t==null?void 0:t.personRegion)||"",id:"personRegion1",required:!0,...v("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personArea&&e.jsx("span",{className:"error-form",children:n.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:(t==null?void 0:t.personArea)||"",id:"personArea1",required:!0,...v("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Xe,onChange:I=>O(I?I.value:null),value:Xe.find(I=>I.value===(t==null?void 0:t.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Re||Te})}),e.jsx("label",{className:t!=null&&t.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ze,onChange:I=>O(I?I.value:null),value:Ze.find(I=>I.value===(t==null?void 0:t.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ae||He})}),e.jsx("label",{className:t!=null&&t.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ye,onChange:I=>O(I?I.value:null),value:Ye.find(I=>I.value===(t==null?void 0:t.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:k||he})}),e.jsx("label",{className:t!=null&&t.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPostalCode&&e.jsx("span",{className:"error-form",children:n.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:(t==null?void 0:t.personPostalCode)??"",id:"personPostalCode1",required:!0,...v("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personSpecialDisease&&e.jsx("span",{className:"error-form",children:n.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(t==null?void 0:t.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...v("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.personAddress&&e.jsx("span",{className:"error-form",children:n.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(t==null?void 0:t.personAddress)||"",id:"personAddress1",required:!0,...v("personAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[n.personDescription&&e.jsx("span",{className:"error-form",children:n.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",required:!0,name:"personDescription",value:(t==null?void 0:t.personDescription)||"",id:"personDescription1",...v("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[n.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:n.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(t==null?void 0:t.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...v("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:f,format:"jYYYY/jMM/jDD",onOpenChange:ps,suffixIcon:e.jsx(de,{color:"action"}),open:d,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:K,onChange:fe,format:"jYYYY/jMM/jDD",onOpenChange:us,suffixIcon:e.jsx(de,{color:"action"}),open:E,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[n.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:n.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(t==null?void 0:t.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...v("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[n.backupFirstName&&e.jsx("span",{className:"error-form",children:n.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(t==null?void 0:t.backupFirstName)||"",id:"backupFirstName1",required:!0,...v("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupLastName&&e.jsx("span",{className:"error-form",children:n.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(t==null?void 0:t.backupLastName)||"",id:"backupLastName1",required:!0,...v("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupRelation&&e.jsx("span",{className:"error-form",children:n.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(t==null?void 0:t.backupRelation)||"",id:"backupRelation",required:!0,...v("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupPhone&&e.jsx("span",{className:"error-form",children:n.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:(t==null?void 0:t.backupPhone)||"",id:"backupPhone",required:!0,...v("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupCellphone&&e.jsx("span",{className:"error-form",children:n.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:(t==null?void 0:t.backupCellphone)||"",id:"backupCellphone",required:!0,...v("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.backupAddress&&e.jsx("span",{className:"error-form",children:n.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(t==null?void 0:t.backupAddress)||"",id:"backupAddress",required:!0,...v("backupAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:oe,loading:m,type:"submit",variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function Wa({setShowEditRelatedModal:o,personID:N,refetch:C}){const F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),B=l.useRef(null),_=l.useRef(null),[T,y]=l.useState(null),[z,g]=l.useState(null),[W,K]=l.useState(null),[V,Q]=l.useState(null),[A,ae]=l.useState(null),[i,P]=l.useState(!1),[M,te]=l.useState(!1),[s,d]=l.useState(!1),[L,E]=l.useState(!1),[re,oe]=l.useState(!1),[n,J]=l.useState([]),{handleSubmit:v,formState:{errors:u},control:t,register:r,watch:m,setValue:U}=is(),a=m(),[Ne,{isLoading:le}]=Ya(),ee=ys(),Z=new URLSearchParams(location.search).get("personID"),{data:ce,isSuccess:be,isLoading:Pe,isFetching:$e,refetch:Se,error:ie}=Qs(N),{data:Ce,isSuccess:Be,isFetching:Me,isLoading:Fe,refetch:Le,error:je}=za(N);l.useEffect(()=>{if(Se(),be){const S=ce==null?void 0:ce.itemList.map((b,ns)=>({id:b.pensionaryID,pensionaryStatusRowNum:ns+1,isActive:b.pensionaryIsActive,pensionaryStatusName:b.pensionaryStatusName||"-",pensionaryStartdate:De(b.pensionaryStartdate)||"-"}));J(S)}return()=>{J([])}},[Se,be,ce]),l.useEffect(()=>{Le(),Be&&Object.keys(Ce).forEach(S=>{U(S,Ce[S])})},[Be,Ce,Le,U]),l.useEffect(()=>{var S;je&&je.status!=="FETCH_ERROR"&&ne.error(((S=je==null?void 0:je.data)==null?void 0:S.message)||je.error,{autoClose:2e3})},[je]),l.useEffect(()=>{var S;ie&&(console.log(ie),ne.error(((S=ie==null?void 0:ie.data)==null?void 0:S.message)||ie.error,{autoClose:2e3}))},[ie]);const{relationships:ze,relationshipIsLoading:Re,relationshipIsFetching:Te}=Ys(),{pensionaryStatus:Ue,pensionaryStatusIsLoading:Ae,pensionaryStatusIsFetching:He}=Bs({pensionaryStatusCategory:"L"}),{lookUpItems:q,lookUpItemsIsLoading:k,lookUpItemsIsFetching:he}=X({lookUpType:"MaritialStatus"}),{lookUpItems:_e,lookUpItemsIsLoading:We,lookUpItemsIsFetching:Ve}=X({lookUpType:"EducationType"}),{lookUpItems:Qe,lookUpItemsIsLoading:Je,lookUpItemsIsFetching:Xe}=X({lookUpType:"UniversityType"}),{lookUpItems:Ze,lookUpItemsIsLoading:Ye,lookUpItemsIsFetching:as}=X({lookUpType:"Country"}),{lookUpItems:w,lookUpItemsIsLoading:f,lookUpItemsIsFetching:fe}=X({lookUpType:"State"}),{lookUpItems:ye,lookUpItemsIsLoading:es,lookUpItemsIsFetching:cs}=X({lookUpType:"City"}),Ge=Y(ze,"relationshipID","relationshipName"),ps=Y(Ue,"pensionaryStatusID","pensionaryStatusName"),us=Y(q,"lookUpID","lookUpName"),ds=Y(_e,"lookUpID","lookUpName"),Cs=Y(Qe,"lookUpID","lookUpName"),O=Y(Ze,"lookUpID","lookUpName"),I=Y(w,"lookUpID","lookUpName"),ke=Y(ye,"lookUpID","lookUpName"),Ee=S=>{y(S),P(!1)},Ke=S=>{g(S),te(!1)},D=S=>{K(S),d(!1)},j=S=>{Q(S),E(!1)},qe=S=>{ae(S),oe(!1)},ss=S=>{oe(S)},Ks=S=>{P(S)},mn=S=>{te(S)},hn=S=>{d(S)},xn=S=>{E(S)};l.useEffect(()=>{y(De(a==null?void 0:a.personBirthDate))},[a==null?void 0:a.personBirthDate]),l.useEffect(()=>{g(De(a==null?void 0:a.personMaritalDate))},[a==null?void 0:a.personMaritalDate]),l.useEffect(()=>{K(De(a==null?void 0:a.selfEmployeeStartDate))},[a==null?void 0:a.selfEmployeeStartDate]),l.useEffect(()=>{Q(De(a==null?void 0:a.selfEmployeeEndDate))},[a==null?void 0:a.selfEmployeeEndDate]);const gn=()=>{Se()},jn=async()=>{var S;try{let b,ns,ms,hs,xs;T?(b=new Date(T),b.setMinutes(b.getMinutes()-b.getTimezoneOffset())):b=null,A?(xs=new Date(A),xs.setMinutes(xs.getMinutes()-xs.getTimezoneOffset())):xs=null,z?(ns=new Date(z),ns.setMinutes(ns.getMinutes()-ns.getTimezoneOffset())):ns=null,W?(ms=new Date(W),ms.setMinutes(ms.getMinutes()-ms.getTimezoneOffset())):ms=null,V?(hs=new Date(V),hs.setMinutes(hs.getMinutes()-hs.getTimezoneOffset())):hs=null;const Xs=await Ne({...a,parentPersonID:Z,relationshipWithParentID:c(a.relationshipWithParentID),personCertificateNo:c(a.personCertificateNo),personNationalCode:c(a.personNationalCode),pensionaryStatusID:c(a.pensionaryStatusID),maritalStatusID:c(a.maritalStatusID),educationTypeID:c(a.educationTypeID),universityID:c(a.universityID),personPhone:c(a.personPhone),personCellPhone:c(a.personCellPhone),personCellPhone2:c(a.personCellPhone2),personRegion:parseInt(c(a.personRegion))||null,personArea:parseInt(c(a.personArea))||null,personCountryID:c(a.personCountryID),personCityID:c(a.personCityID),personStateID:c(a.personStateID),personPostalCode:c(a.personPostalCode),backupPhone:c(a.backupPhone),backupCellphone:c(a.backupCellphone),personBirthDate:b,personMaritalDate:ns,selfEmployeeStartDate:ms,selfEmployeeEndDate:hs,pensionaryStartDate:xs}).unwrap();console.log(Xs),o(!1),C(),ne.success(Xs.message,{autoClose:2e3})}catch(b){console.log(b),ne.error(((S=b==null?void 0:b.data)==null?void 0:S.message)||b.error,{autoClose:2e3})}};return bs([F,R,p,B,_],[P,te,d,E,oe]),e.jsx(e.Fragment,{children:Fe||Me?e.jsx(Oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ve,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:v(jn),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:t,rules:{required:!0},render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:Ge,onChange:b=>S(b?b.value:null),value:Ge.find(b=>b.value===(a==null?void 0:a.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Re||Te})}),e.jsxs("label",{className:a!=null&&a.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),u.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFirstName&&e.jsx("span",{className:"error-form",children:u.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFirstName)||"",name:"personFirstName",id:"personFirstName2",required:!0,...r("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName2",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personLastName&&e.jsx("span",{className:"error-form",children:u.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...r("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personNationalCode&&e.jsx("span",{className:"error-form",children:u.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(a==null?void 0:a.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...r("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCertificateNo&&e.jsx("span",{className:"error-form",children:u.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(a==null?void 0:a.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...r("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFatherName&&e.jsx("span",{className:"error-form",children:u.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...r("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:De(T),onChange:Ee,format:"jYYYY/jMM/jDD",onOpenChange:Ks,suffixIcon:e.jsx(de,{color:"action"}),open:i,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:z,onChange:Ke,format:"jYYYY/jMM/jDD",onOpenChange:mn,suffixIcon:e.jsx(de,{color:"action"}),open:M,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personBirthPlace&&e.jsx("span",{className:"error-form",children:u.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...r("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:t,rules:{required:!0},render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:ps,onChange:b=>S(b?b.value:null),value:ps.find(b=>b.value===(a==null?void 0:a.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ae||He})}),e.jsxs("label",{className:a!=null&&a.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),u.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:A,defaultValue:null,onChange:qe,onOpenChange:ss,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:re,style:ge,wrapperStyle:me,pickerProps:{ref:_}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:us,onChange:b=>S(b?b.value:null),value:us.find(b=>b.value===(a==null?void 0:a.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:k||he})}),e.jsx("label",{className:a!=null&&a.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"educationTypeID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:ds,onChange:b=>S(b?b.value:null),value:ds.find(b=>b.value===(a==null?void 0:a.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:We||Ve})}),e.jsx("label",{className:a!=null&&a.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.educationTypeCaption&&e.jsx("span",{className:"error-form",children:u.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...r("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"universityID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:Cs,onChange:b=>S(b?b.value:null),value:Cs.find(b=>b.value===(a==null?void 0:a.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Je||Xe})}),e.jsx("label",{className:a!=null&&a.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.universityCaption&&e.jsx("span",{className:"error-form",children:u.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...r("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCellPhone&&e.jsx("span",{className:"error-form",children:u.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:x(a==null?void 0:a.personCellPhone)??"",id:"personCellPhone1",required:!0,...r("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCellPhone2&&e.jsx("span",{className:"error-form",children:u.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:x(a==null?void 0:a.personCellPhone2)??"",id:"personCellPhone22",required:!0,...r("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPhone&&e.jsx("span",{className:"error-form",children:u.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:x(a==null?void 0:a.personPhone)||"",id:"personPhone1",required:!0,...r("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personRegion&&e.jsx("span",{className:"error-form",children:u.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:x(a==null?void 0:a.personRegion)??"",id:"personRegion1",required:!0,...r("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personArea&&e.jsx("span",{className:"error-form",children:u.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:x(a==null?void 0:a.personArea)??"",id:"personArea1",required:!0,...r("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:O,onChange:b=>S(b?b.value:null),value:O.find(b=>b.value===(a==null?void 0:a.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ye||as})}),e.jsx("label",{className:a!=null&&a.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:I,onChange:b=>S(b?b.value:null),value:I.find(b=>b.value===(a==null?void 0:a.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:f||fe})}),e.jsx("label",{className:a!=null&&a.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:ke,onChange:b=>S(b?b.value:null),value:ke.find(b=>b.value===(a==null?void 0:a.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:es||cs})}),e.jsx("label",{className:a!=null&&a.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPostalCode&&e.jsx("span",{className:"error-form",children:u.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:x(a==null?void 0:a.personPostalCode)??"",id:"personPostalCode1",required:!0,...r("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personSpecialDisease&&e.jsx("span",{className:"error-form",children:u.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(a==null?void 0:a.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...r("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[u.personAddress&&e.jsx("span",{className:"error-form",children:u.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(a==null?void 0:a.personAddress)||"",id:"personAddress1",required:!0,...r("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[u.personDescription&&e.jsx("span",{className:"error-form",children:u.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"personDescription",value:(a==null?void 0:a.personDescription)||"",id:"personDescription1",required:!0,...r("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Js,{statusHistoryTableData:n,isLoading:Pe,isFetching:$e,handleRefresh:gn}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[u.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:u.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(a==null?void 0:a.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...r("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:W,onChange:D,format:"jYYYY/jMM/jDD",onOpenChange:hn,suffixIcon:e.jsx(de,{color:"action"}),open:s,style:ge,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:V,onChange:j,format:"jYYYY/jMM/jDD",onOpenChange:xn,suffixIcon:e.jsx(de,{color:"action"}),open:L,style:ge,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[u.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:u.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(a==null?void 0:a.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...r("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[u.backupFirstName&&e.jsx("span",{className:"error-form",children:u.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(a==null?void 0:a.backupFirstName)||"",id:"backupFirstName1",required:!0,...r("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupLastName&&e.jsx("span",{className:"error-form",children:u.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(a==null?void 0:a.backupLastName)||"",id:"backupLastName1",required:!0,...r("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupRelation&&e.jsx("span",{className:"error-form",children:u.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(a==null?void 0:a.backupRelation)||"",id:"backupRelation",required:!0,...r("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupPhone&&e.jsx("span",{className:"error-form",children:u.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:x(a==null?void 0:a.backupPhone)??"",id:"backupPhone",required:!0,...r("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupCellphone&&e.jsx("span",{className:"error-form",children:u.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:x(a==null?void 0:a.backupCellphone)??"",id:"backupCellphone",required:!0,...r("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[u.backupAddress&&e.jsx("span",{className:"error-form",children:u.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(a==null?void 0:a.backupAddress)||"",id:"backupAddress",required:!0,...r("backupAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),variant:"contained",onClick:v,type:"submit",loading:le,color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function Va(){const[o,N]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(!1),[B,_]=l.useState(!1),[T,y]=l.useState(!1),[z,g]=l.useState(""),[W,K]=l.useState(""),[V,{isLoading:Q}]=Ga(),A=os(),i=new URLSearchParams(A.search).get("personID"),{data:P,isSuccess:M,isLoading:te,isFetching:s,refetch:d,error:L}=$a(i);l.useEffect(()=>{if(d(),M){const r=P.itemList.map((m,U)=>({id:m.personID,relatedRowNum:U+1,pensionaryID:m.pensionaryID,relatedBirthDate:m.personBirthDate,relatedNtionalCode:m.personNationalCode,relatedFirstName:m.personFirstName,relatedLastName:m.personLastName,relatedStatus:m.pensionaryIsUnderGauranteeText,relation:m.relationshipWithParentName}));F(r)}},[M,P,d]),l.useEffect(()=>{var r;L&&(console.log(L),ne.error(((r=L==null?void 0:L.data)==null?void 0:r.message)||L.error,{autoClose:2e3}))},[L]);const E=()=>{d()},re=()=>{p(!0)},oe=()=>{_(!0)},n=()=>{y(!0)},J=async()=>{var r;try{const m=await V({pensionaryID:W}).unwrap();d(),y(!1),ne.success(m.message,{autoClose:2e3})}catch(m){console.log(m),ne.error(((r=m==null?void 0:m.data)==null?void 0:r.message)||m.error,{autoClose:2e3})}},v=l.useMemo(()=>[{accessorKey:"relatedRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"relatedNtionalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"relatedFirstName",header:"نام",size:20},{accessorKey:"relatedLastName",header:"نام خانوادگی",size:20},{accessorKey:"relatedStatus",header:"وضعیت",size:20},{accessorKey:"relatedBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(fs(r))})},{accessorKey:"relation",header:"نسبت",size:20},{accessorKey:"editRelatedAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(Ie,{title:`ویرایش "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(pe,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(_s,{})})})},{accessorKey:"deleteRelatedAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(Ie,{title:`حذف "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(pe,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(pn,{})})})}],[]),u=ks({...Ts,columns:v,data:C,muiTableBodyRowProps:({row:r})=>({onClick:()=>N(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Oe,{children:[s?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"info",onClick:E,children:e.jsx(Us,{fontSize:"small"})})})}),s?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد وابسته"}),children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"success",onClick:re,children:e.jsx(un,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(Os,{...r,page:x(r.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:r=>r.id,onRowSelectionChange:N,state:{rowSelection:o}});return l.useEffect(()=>{const r=Object.keys(u.getState().rowSelection)[0];if(r){const m=rn(C,r);g(r),K(m==null?void 0:m.pensionaryID)}},[u,o,C]),e.jsx(e.Fragment,{children:te||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R?e.jsx(rs,{title:"ایجاد وابسته",closeModal:()=>p(!1),children:e.jsx(Ka,{setShowCreateRelatedModal:p,refetch:d})}):B&&z?e.jsx(rs,{title:"ویرایش اطلاعات وابسته",closeModal:()=>_(!1),children:e.jsx(Wa,{setShowEditRelatedModal:_,personID:z,refetch:d})}):T?e.jsxs(rs,{title:"حذف وابسته",closeModal:()=>y(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این وابسته اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(we,{dir:"ltr",endIcon:e.jsx(on,{}),onClick:J,loading:Q,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(Hs,{dir:"ltr",endIcon:e.jsx(cn,{}),onClick:()=>y(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):null,e.jsx(Rs,{table:u})]})})}const Qa=ln.injectEndpoints({endpoints:o=>({getHeirListByParentPersonID:o.query({query:N=>({url:`${gs}/GetHeirListByParentPersonID?parentPersonID=${N}`})}),getHeir:o.query({query:N=>({url:`${gs}/GetHeir?personID=${N}`})}),insertHeir:o.mutation({query:N=>({url:`${gs}/InsertHeir`,method:"POST",body:N})}),updateHeir:o.mutation({query:N=>({url:`${gs}/UpdateHeir`,method:"POST",body:N})}),updateHeirAccount:o.mutation({query:({token:N,data:C})=>({url:`${gs}/UpdateHeirAccount`,method:"POST",body:C,headers:{"Content-Type":"application/json",Authorization:`Bearer ${N}`}})}),removeHeir:o.mutation({query:({pensionaryID:N})=>({url:`${gs}/RemoveHeir?pensionaryID=${N}`,method:"POST"})})})}),{useGetHeirListByParentPersonIDQuery:Ja,useLazyGetHeirListByParentPersonIDQuery:Kt,useGetHeirQuery:Xa,useRemoveHeirMutation:Za,useUpdateHeirMutation:et,useInsertHeirMutation:st}=Qa;function nt({setShowEditHeirModal:o,personID:N,refetch:C}){const F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),[B,_]=l.useState([]),[T,y]=l.useState([]),[z,g]=l.useState(null),[W,K]=l.useState(!1);l.useState(null);const[V,Q]=l.useState(null),[A,ae]=l.useState(null),[i,P]=l.useState(!1),[M,te]=l.useState(!1),{handleSubmit:s,formState:{errors:d},control:L,register:E,watch:re,setValue:oe}=is(),n=re(),[J,{isLoading:v}]=et(),u=ys(),r=new URLSearchParams(location.search).get("personID"),[m,{isLoading:U,isFetching:a}]=Vs(),{data:Ne,isSuccess:le,isLoading:ee,isFetching:se,refetch:Z,error:ce}=Qs(N),{data:be,isSuccess:Pe,isLoading:$e,isFetching:Se,error:ie,refetch:Ce}=Xa(N);l.useEffect(()=>{if(Z(),le){const D=Ne==null?void 0:Ne.itemList.map((j,qe)=>({id:j.pensionaryID,isActive:j.pensionaryIsActive,pensionaryStatusRowNum:qe+1,pensionaryStatusName:j.pensionaryStatusName||"-",pensionaryStartdate:De(j.pensionaryStartdate)||"-"}));y(D)}return()=>{y([])}},[Z,le,Ne]),l.useEffect(()=>{Ce(),Pe&&Object.keys(be).forEach(D=>{oe(D,be[D])})},[Pe,be,Ce,oe]),l.useEffect(()=>{var D;ie&&ie.status!=="FETCH_ERROR"&&ne.error(((D=ie==null?void 0:ie.data)==null?void 0:D.message)||ie.error,{autoClose:2e3})},[ie]),l.useEffect(()=>{var D;ce&&(console.log(ce),ne.error(((D=ce==null?void 0:ce.data)==null?void 0:D.message)||ce.error,{autoClose:2e3}))},[ce]);const{relationships:Be,relationshipIsLoading:Me,relationshipIsFetching:Fe}=Ys(),{lookUpItems:Le,lookUpItemsIsLoading:je,lookUpItemsIsFetching:ze}=X({lookUpType:"MaritialStatus"}),{lookUpItems:Re,lookUpItemsIsLoading:Te,lookUpItemsIsFetching:Ue}=X({lookUpType:"Country"}),{lookUpItems:Ae,lookUpItemsIsLoading:He,lookUpItemsIsFetching:q}=X({lookUpType:"State"}),{lookUpItems:k,lookUpItemsIsLoading:he,lookUpItemsIsFetching:_e}=X({lookUpType:"City"}),{pensionaryStatus:We,pensionaryStatusIsLoading:Ve,pensionaryStatusIsFetching:Qe}=Bs({pensionaryStatusCategory:"H"}),{lookUpItems:Je,lookUpItemsIsLoading:Xe,lookUpItemsIsFetching:Ze}=X({lookUpType:"Bank"}),Ye=Y(Be,"relationshipID","relationshipName"),as=Y(Le,"lookUpID","lookUpName"),w=Y(Re,"lookUpID","lookUpName"),f=Y(Ae,"lookUpID","lookUpName"),fe=Y(k,"lookUpID","lookUpName"),ye=Y(We,"pensionaryStatusID","pensionaryStatusName"),es=Y(Je,"lookUpID","lookUpName"),cs=Y(B,"lookUpID","lookUpName"),Ge=l.useCallback(async D=>{try{const j=await m({lookUpType:"BankBranch",lookUpParentID:D}).unwrap();_(j.itemList)}catch(j){console.log(j)}},[m,_]);l.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]),l.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]);const ps=D=>{g(D),K(!1)},us=D=>{ae(D),P(!1)},ds=D=>{Q(D),te(!1)},Cs=D=>{te(D)},O=D=>{K(D)},I=D=>{P(D)};l.useEffect(()=>{g(De(n==null?void 0:n.personBirthDate))},[n==null?void 0:n.personBirthDate]),l.useEffect(()=>{ae(De(n==null?void 0:n.personBaseFinishDate))},[n==null?void 0:n.personBaseFinishDate]);const ke=()=>{Z()},Ee=async()=>{var D;try{let j,qe,ss;z?(j=new Date(z),j.setMinutes(j.getMinutes()-j.getTimezoneOffset())):j=null,V?(qe=new Date(V),qe.setMinutes(qe.getMinutes()-qe.getTimezoneOffset())):qe=null,A?(ss=new Date(A),ss.setMinutes(ss.getMinutes()-ss.getTimezoneOffset())):ss=null;const Ks=await J({...n,relationshipWithParentID:c(n==null?void 0:n.relationshipWithParentID),personNationalCode:c(n==null?void 0:n.personNationalCode),personCertificateNo:c(n==null?void 0:n.personCertificateNo),personBirthDate:j,maritalStatusID:c(n==null?void 0:n.maritalStatusID),personPhone:c(n==null?void 0:n.personPhone),personCellPhone:c(n==null?void 0:n.personCellPhone),personRegion:parseInt(c(n==null?void 0:n.personRegion))||null,personArea:parseInt(c(n==null?void 0:n.personArea))||null,personCountryID:c(n==null?void 0:n.personCountryID),personStateID:c(n==null?void 0:n.personStateID),personCityID:c(n==null?void 0:n.personCityID),personPostalCode:c(n==null?void 0:n.personPostalCode),pensionaryStatusID:c(n==null?void 0:n.pensionaryStatusID),personBaseFinishDate:ss,bankID:c(n==null?void 0:n.bankID),bankBranchID:c(n==null?void 0:n.bankBranchID),accountNo:c(n==null?void 0:n.accountNo),insuranceCoef:parseFloat(c(n==null?void 0:n.insuranceCoef))||0,insuranceAmount:parseFloat(c(n==null?void 0:n.insuranceAmount))||0,ledgerCode:parseInt(c(n.ledgerCode))||0,parentPersonID:r,pensionaryStartDate:qe}).unwrap();o(!1),C(),ne.success(Ks.message,{autoClose:2e3})}catch(j){console.log(j),ne.error(((D=j==null?void 0:j.data)==null?void 0:D.message)||j.error,{auroClose:2e3})}};return bs([F,R,p],[K,P,te]),e.jsx(e.Fragment,{children:$e||Se?e.jsx(Oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ve,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:s(Ee),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:L,rules:{required:!0},render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:Ye,onChange:j=>D(j?j.value:null),value:Ye.find(j=>j.value===(n==null?void 0:n.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Me||Fe})}),e.jsxs("label",{className:n!=null&&n.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),d.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFirstName&&e.jsx("span",{className:"error-form",children:d.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...E("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personLastName&&e.jsx("span",{className:"error-form",children:d.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personLastName",value:(n==null?void 0:n.personLastName)||"",id:"personLastName1",required:!0,...E("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personNationalCode&&e.jsx("span",{className:"error-form",children:d.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...E("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCertificateNo&&e.jsx("span",{className:"error-form",children:d.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...E("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificatetNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFatherName&&e.jsx("span",{className:"error-form",children:d.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...E("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:z,onChange:ps,format:"jYYYY/jMM/jDD",onOpenChange:O,suffixIcon:e.jsx(de,{color:"action"}),open:W,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personBirthPlace&&e.jsx("span",{className:"error-form",children:d.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personBirthPlace",value:(n==null?void 0:n.personBirthPlace)||"",id:"personBirthPlace1",required:!0,...E("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:as,onChange:j=>D(j?j.value:null),value:as.find(j=>j.value===(n==null?void 0:n.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:je||ze})}),e.jsx("label",{className:n!=null&&n.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPhone&&e.jsx("span",{className:"error-form",children:d.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...E("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCellPhone&&e.jsx("span",{className:"error-form",children:d.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personCellPhone)||"",name:"personCellPhone",id:"personCellPhone222",required:!0,...E("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personArea&&e.jsx("span",{className:"error-form",children:d.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personArea)||"",name:"personArea",id:"personArea1",required:!0,...E("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personRegion&&e.jsx("span",{className:"error-form",children:d.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:x(n==null?void 0:n.personRegion)||"",id:"personRegion1",required:!0,...E("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:w,onChange:j=>D(j?j.value:null),value:w.find(j=>j.value===(n==null?void 0:n.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Te||Ue})}),e.jsx("label",{className:n!=null&&n.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:f,onChange:j=>D(j?j.value:null),value:f.find(j=>j.value===(n==null?void 0:n.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:He||q})}),e.jsx("label",{className:n!=null&&n.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:fe,onChange:j=>D(j?j.value:null),value:fe.find(j=>j.value===(n==null?void 0:n.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:he||_e})}),e.jsx("label",{className:n!=null&&n.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPostalCode&&e.jsx("span",{className:"error-form",children:d.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personPostalCode)||"",name:"personPostalCode",id:"personPostalCode1",required:!0,...E("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personSpecialDisease&&e.jsx("span",{className:"error-form",children:d.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personSpecialDisease)||"",name:"personSpecialDisease",id:"personSpecialDisease1",required:!0,...E("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[d.personAddress&&e.jsx("span",{className:"error-form",children:d.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...E("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[d.personDescription&&e.jsx("span",{className:"error-form",children:d.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...E("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:L,rules:{required:!0},render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:ye,onChange:j=>D(j?j.value:null),value:ye.find(j=>j.value===(n==null?void 0:n.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ve||Qe})}),e.jsxs("label",{className:n!=null&&n.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),d.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:V,defaultValue:null,onChange:ds,onOpenChange:Cs,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:M,style:ge,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:A,onChange:us,format:"jYYYY/jMM/jDD",onOpenChange:I,suffixIcon:e.jsx(de,{color:"action"}),open:i,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:x(n==null?void 0:n.heirID)||"-",name:"heirID",id:"heirID",...E("heirID")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"heirID",children:"شماره وظیفه بگیری"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:x(fs(n==null?void 0:n.pensionaryStartDate))||"-",name:"pensionaryStartDate",id:"pensionaryStartDate",...E("pensionaryStartDate")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"pensionaryStartDate",children:"تاریخ وظیفه بگیری"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Js,{statusHistoryTableData:T,isLoading:ee,isFetching:se,handleRefresh:ke}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:es,onChange:j=>D(j?j.value:null),value:es.find(j=>j.value===(n==null?void 0:n.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Xe||Ze})}),e.jsx("label",{htmlFor:"bankID",className:n!=null&&n.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:cs,onChange:j=>D(j?j.value:null),isDisabled:U||a||!n.bankID,value:cs.find(j=>j.value===(n==null?void 0:n.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:U||a})}),e.jsx("label",{htmlFor:"bankBranchID",className:n!=null&&n.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.accountNo&&e.jsx("span",{className:"error-form",children:d.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...E("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.ledgerCode&&e.jsx("span",{className:"error-form",children:d.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...E("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.insuranceCoef&&e.jsx("span",{className:"error-form",children:d.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.insuranceCoef)||"",name:"insuranceCoef",id:"insuranceCoefHeir",required:!0,...E("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.insuranceAmount&&e.jsx("span",{className:"error-form",children:d.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...E("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:s,type:"submit",loading:v,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function at({setShowCreateHeirModal:o,refetch:N}){const C=l.useRef(null),F=l.useRef(null),R=l.useRef(null),[p,B]=l.useState(null),[_,T]=l.useState(!1),[y,z]=l.useState(null),[g,W]=l.useState(null),[K,V]=l.useState(!1),[Q,A]=l.useState(!1),{handleSubmit:ae,formState:{errors:i},control:P,register:M,watch:te}=is(),s=te(),[d,{isLoading:L}]=st(),[E,re]=l.useState([]),oe=os(),J=new URLSearchParams(oe.search).get("personID"),v=ys(),[u,{isLoading:t,isFetching:r}]=Vs(),{relationships:m,relationshipIsLoading:U,relationshipIsFetching:a}=Ys(),{lookUpItems:Ne,lookUpItemsIsLoading:le,lookUpItemsIsFetching:ee}=X({lookUpType:"MaritialStatus"}),{lookUpItems:se,lookUpItemsIsLoading:Z,lookUpItemsIsFetching:ce}=X({lookUpType:"Country"}),{lookUpItems:be,lookUpItemsIsLoading:Pe,lookUpItemsIsFetching:$e}=X({lookUpType:"State"}),{lookUpItems:Se,lookUpItemsIsLoading:ie,lookUpItemsIsFetching:Ce}=X({lookUpType:"City"}),{pensionaryStatus:Be,pensionaryStatusIsLoading:Me,pensionaryStatusIsFetching:Fe}=Bs({pensionaryStatusCategory:"H"}),{lookUpItems:Le,lookUpItemsIsLoading:je,lookUpItemsIsFetching:ze}=X({lookUpType:"Bank"}),Re=Y(m,"relationshipID","relationshipName"),Te=Y(Ne,"lookUpID","lookUpName"),Ue=Y(se,"lookUpID","lookUpName"),Ae=Y(Be,"pensionaryStatusID","pensionaryStatusName"),He=Y(be,"lookUpID","lookUpName"),q=Y(Se,"lookUpID","lookUpName"),k=Y(Le,"lookUpID","lookUpName"),he=Y(E,"lookUpID","lookUpName"),_e=l.useCallback(async w=>{try{const f=await u({lookUpType:"BankBranch",lookUpParentID:c(w)}).unwrap();re(f.itemList)}catch(f){console.log(f)}},[u,re]);l.useEffect(()=>{s.bankID&&_e(s.bankID)},[s.bankID,_e]);const We=w=>{B(w),T(!1)},Ve=w=>{W(w),V(!1)},Qe=w=>{z(w),A(!1)},Je=w=>{A(w)},Xe=w=>{T(w)},Ze=w=>{V(w)},Ye=async()=>{var w;try{let f,fe,ye;p?(f=new Date(p),f.setMinutes(f.getMinutes()-f.getTimezoneOffset())):f=null,y?(ye=new Date(y),ye.setMinutes(ye.getMinutes()-ye.getTimezoneOffset())):ye=null,g?(fe=new Date(g),fe.setMinutes(fe.getMinutes()-fe.getTimezoneOffset())):fe=null;const es=await d({...s,relationshipWithParentID:c(s==null?void 0:s.relationshipWithParentID),personNationalCode:c(s==null?void 0:s.personNationalCode),personCertificateNo:c(s==null?void 0:s.personCertificateNo),personBirthDate:f,maritalStatusID:c(s==null?void 0:s.maritalStatusID),personPhone:c(s==null?void 0:s.personPhone),personCellPhone:c(s==null?void 0:s.personCellPhone),personRegion:parseInt(c(s==null?void 0:s.personRegion))||null,personArea:parseInt(c(s==null?void 0:s.personArea))||null,personCountryID:c(s==null?void 0:s.personCountryID),personStateID:c(s==null?void 0:s.personStateID),personCityID:c(s==null?void 0:s.personCityID),personPostalCode:c(s==null?void 0:s.personPostalCode),pensionaryStatusID:c(s==null?void 0:s.pensionaryStatusID),personBaseFinishDate:fe,bankID:c(s==null?void 0:s.bankID),bankBranchID:c(s==null?void 0:s.bankBranchID),accountNo:c(s==null?void 0:s.accountNo),insuranceCoef:parseFloat(c(s==null?void 0:s.insuranceCoef))||0,insuranceAmount:parseFloat(c(s==null?void 0:s.insuranceAmount))||0,ledgerCode:parseInt(c(s.ledgerCode))||0,parentPersonID:J,pensionaryStartDate:ye}).unwrap();o(!1),N(),ne.success(es.message,{autoClose:2e3})}catch(f){console.log(f),ne.error(((w=f==null?void 0:f.data)==null?void 0:w.message)||f.error,{autoClose:2e3})}};return bs([C,F],[T,V]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:ae(Ye),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:P,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Re,onChange:f=>w(f?f.value:null),value:Re.find(f=>f.value===(s==null?void 0:s.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:U||a})}),e.jsxs("label",{className:s!=null&&s.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),i.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFirstName&&e.jsx("span",{className:"error-form",children:i.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personFirstName",value:(s==null?void 0:s.personFirstName)||"",id:"personFirstName1",required:!0,...M("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personLastName&&e.jsx("span",{className:"error-form",children:i.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...M("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personNationalCode&&e.jsx("span",{className:"error-form",children:i.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personNationalCode",value:x(s==null?void 0:s.personNationalCode)||"",id:"personNationalCode2",required:!0,...M("personNationalCode",{required:"کد ملی را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCertificateNo&&e.jsx("span",{className:"error-form",children:i.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...M("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFatherName&&e.jsx("span",{className:"error-form",children:i.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...M("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:p,onChange:We,format:"jYYYY/jMM/jDD",onOpenChange:Xe,suffixIcon:e.jsx(de,{color:"action"}),open:_,style:ge,wrapperStyle:me,pickerProps:{ref:C}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personBirthPlace&&e.jsx("span",{className:"error-form",children:i.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...M("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Te,onChange:f=>w(f?f.value:null),value:Te.find(f=>f.value===(s==null?void 0:s.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:le||ee})}),e.jsx("label",{className:s!=null&&s.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPhone&&e.jsx("span",{className:"error-form",children:i.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...M("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCellPhone&&e.jsx("span",{className:"error-form",children:i.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:x(s==null?void 0:s.personCellPhone)||"",id:"personCellPhone222",required:!0,...M("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personArea&&e.jsx("span",{className:"error-form",children:i.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personArea),name:"personArea",id:"personArea1",required:!0,...M("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personRegion&&e.jsx("span",{className:"error-form",children:i.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personRegion),name:"personRegion",id:"personRegion1",required:!0,...M("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Ue,onChange:f=>w(f?f.value:null),value:Ue.find(f=>f.value===(s==null?void 0:s.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Z||ce})}),e.jsx("label",{className:s!=null&&s.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:He,onChange:f=>w(f?f.value:null),value:He.find(f=>f.value===(s==null?void 0:s.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Pe||$e})}),e.jsx("label",{className:s!=null&&s.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:q,onChange:f=>w(f?f.value:null),value:q.find(f=>f.value===(s==null?void 0:s.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:ie||Ce})}),e.jsx("label",{className:s!=null&&s.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPostalCode&&e.jsx("span",{className:"error-form",children:i.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:x(s==null?void 0:s.personPostalCode)||"",id:"personPostalCode1",required:!0,...M("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personSpecialDisease&&e.jsx("span",{className:"error-form",children:i.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(s==null?void 0:s.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...M("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[i.personAddress&&e.jsx("span",{className:"error-form",children:i.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...M("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[i.personDescription&&e.jsx("span",{className:"error-form",children:i.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...M("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:P,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Ae,onChange:f=>w(f?f.value:null),value:Ae.find(f=>f.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Me||Fe})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),i.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:y,defaultValue:null,onChange:Qe,onOpenChange:Je,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:Q,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:Ve,format:"jYYYY/jMM/jDD",onOpenChange:Ze,suffixIcon:e.jsx(de,{color:"action"}),open:K,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ مبنای قطع سهم"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:k,onChange:f=>w(f?f.value:null),value:k.find(f=>f.value===(s==null?void 0:s.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:je||ze})}),e.jsx("label",{htmlFor:"bankID",className:s!=null&&s.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:he,onChange:f=>w(f?f.value:null),isDisabled:t||r||!s.bankID,value:he.find(f=>f.value===(s==null?void 0:s.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:t||r})}),e.jsx("label",{htmlFor:"bankBranchID",className:s!=null&&s.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.accountNo&&e.jsx("span",{className:"error-form",children:i.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...M("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.ledgerCode&&e.jsx("span",{className:"error-form",children:i.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...M("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.insuranceCoef&&e.jsx("span",{className:"error-form",children:i.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"insuranceCoef",value:x(s==null?void 0:s.insuranceCoef)||"",id:"insuranceCoefHeir",required:!0,...M("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.insuranceAmount&&e.jsx("span",{className:"error-form",children:i.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...M("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(we,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:ae,type:"submit",loading:L,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function tt(){const[o,N]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(!1),[B,_]=l.useState(!1),[T,y]=l.useState(!1),[z,g]=l.useState(""),[W,K]=l.useState(""),V=os(),A=new URLSearchParams(V.search).get("personID"),[ae,{isLoading:i}]=Za(),{data:P,isLoading:M,isSuccess:te,isFetching:s,error:d,refetch:L}=Ja(A);l.useEffect(()=>{if(L(),te){const r=P.itemList.map((m,U)=>({id:m.personID,heirRowNum:U+1,pensionaryID:m.pensionaryID,personNationalCode:m.personNationalCode,personFirstName:m.personFirstName,personLastName:m.personLastName,pensionaryIsUnderGauranteeText:m.pensionaryIsUnderGauranteeText,personBirthDate:m.personBirthDate,relationshipWithParentName:m.relationshipWithParentName,parentPersonNationalCode:m.parentPersonNationalCode}));F(r)}},[te,P,L]),l.useEffect(()=>{var r;d&&(console.log(d),ne.error(((r=d==null?void 0:d.data)==null?void 0:r.message)||d.error,{autoClose:2e3}))},[d]);const E=()=>{L()},re=()=>{_(!0)},oe=()=>{p(!0)},n=()=>{y(!0)},J=async()=>{var r;try{const m=await ae({pensionaryID:W}).unwrap();y(!1),L(),ne.success(m.message,{autoClose:2e3})}catch(m){console.log(m),ne.error(((r=m==null?void 0:m.data)==null?void 0:r.message)||m.error,{autoClose:2e3})}},v=l.useMemo(()=>[{accessorKey:"heirRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"personNationalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"personFirstName",header:"نام",size:20},{accessorKey:"personLastName",header:"نام خانوادگی",size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:"وضعیت",size:20},{accessorKey:"personBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(fs(r))})},{accessorKey:"relationshipWithParentName",size:20,header:"نسبت"},{accessorKey:"parentPersonNationalCode",header:"شماره پرونده",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"editHeirAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(Ie,{title:`ویرایش "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(pe,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(_s,{})})})},{accessorKey:"deleteHeirAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(Ie,{title:`حذف "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(pe,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(pn,{})})})}],[]),u=ks({...Ts,columns:v,data:C,muiTableBodyRowProps:({row:r})=>({onClick:()=>N(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Oe,{children:[s?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"info",onClick:E,children:e.jsx(Us,{fontSize:"small"})})})}),s?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد موظف"}),children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"success",onClick:re,children:e.jsx(un,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(Os,{...r,page:x(r.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:r=>r.id,onRowSelectionChange:N,state:{rowSelection:o}});return l.useEffect(()=>{const r=Object.keys(u.getState().rowSelection)[0];if(r){const m=rn(C,r);g(r),K(m==null?void 0:m.pensionaryID)}},[u,o,C]),e.jsx(e.Fragment,{children:M||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R&&z?e.jsx(rs,{title:"ویرایش اطلاعات موظف",closeModal:()=>p(!1),children:e.jsx(nt,{setShowEditHeirModal:p,personID:z,refetch:L})}):T?e.jsxs(rs,{title:"حذف موظف",closeModal:()=>y(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این موظف اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(we,{dir:"ltr",endIcon:e.jsx(on,{}),onClick:J,loading:i,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(Hs,{dir:"ltr",endIcon:e.jsx(cn,{}),onClick:()=>y(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):B?e.jsx(rs,{title:"ایجاد موظف",closeModal:()=>_(!1),children:e.jsx(at,{setShowCreateHeirModal:_,refetch:L})}):null,e.jsx(Rs,{table:u})]})})}function lt(){const[o,N]=l.useState({}),[C,F]=l.useState([]),R=os(),p=new URLSearchParams(R.search),B=p.get("Role"),_=p.get("personID"),{data:T,isSuccess:y,isLoading:z,isFetching:g,error:W,refetch:K}=_a({Role:B,personID:_});l.useEffect(()=>{if(K(),y){const i=T.itemList.map(P=>({id:P.requestID,type:P.requestTypeID,requestNO:P.requestNO||"-",personId:P.personID,requestTypeNameFa:P.requestTypeNameFa||"-",personName:P.personName||"-",date:P.requestDate||"-",body:P.requestText||"-"}));F(i),sessionStorage.setItem("requests",JSON.stringify(i))}},[T,y,K]),l.useEffect(()=>{var i;W&&ne.error(((i=W==null?void 0:W.data)==null?void 0:i.message)||W.error,{autoClose:2e3})},[W]);const V=()=>{K()},Q=l.useMemo(()=>[{accessorKey:"id",header:"شماره درخواست",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:x(i)})},{accessorKey:"requestTypeNameFa",header:"نوع درخواست",size:20},{accessorKey:"personName",header:"ارسال کننده",size:20},{accessorKey:"date",header:"تاریخ درخواست",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:x(fs(i))})},{accessorKey:"observeReq",header:"مشاهده درخواست",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:i})=>e.jsx(Ie,{title:x(i.original.requestNO),children:e.jsx(fn,{to:`/retirement/request?requestID=${i.id}&Role=${B}&type=${i.original.type}`,children:e.jsx(pe,{color:"primary",sx:{padding:"0"},children:e.jsx(dn,{})})})})}],[B]),A=ks({...Ts,columns:Q,data:C,muiTableBodyRowProps:({row:i})=>({onClick:()=>N(()=>({[i.id]:!0})),selected:o[i.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(Oe,{children:g?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"info",onClick:V,children:e.jsx(Us,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:i=>e.jsx(Os,{...i,page:x(i.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:i=>i.id,onRowSelectionChange:N,state:{rowSelection:o}});return e.jsx(e.Fragment,{children:z?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Rs,{table:A})})}function rt(){const[o,N]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(null),[B,_]=l.useState(!1),T=os(),z=new URLSearchParams(T.search).get("personID"),{data:g,isLoading:W,isSuccess:K,isFetching:V,error:Q,refetch:A}=ka({personID:z,payType:"M"}),ae=()=>{A()};l.useEffect(()=>{if(K){const s=g.itemList.map((d,L)=>({id:d.payID,payRowNum:L+1,payCreditAmount:d.payCreditAmount,payDebitAmount:d.payDebitAmount,payAmount:d.payAmount,payDate:d.payDate,currentYear:d.currentYear,currentMonth:d.currentMonth}));F(s)}},[K,A,g]),l.useEffect(()=>{var s;Q&&ne.error(((s=Q==null?void 0:Q.data)==null?void 0:s.message)||Q.error,{autoClose:2e3})},[Q]);const i=()=>{_(!0)},P=l.useMemo(()=>[{accessorKey:"payRowNum",header:"ردیف",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"payCreditAmount",header:"مبلغ بستانکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Ws(x(s))," ","ریال"]})},{accessorKey:"payDebitAmount",header:"مبلغ بدهکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Ws(x(s))," ","ریال"]})},{accessorKey:"payAmount",header:"مبلغ کل",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Ws(x(s))," ","ریال"]})},{accessorKey:"payDate",header:"تاریخ پرداخت",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:fs(s)})},{accessorKey:"currentYear",header:"سال مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"currentMonth",header:"ماه مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"downloadRetiredSlip",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:()=>e.jsx(Ie,{title:"دانلود و مشاهده فیش",children:e.jsx(pe,{color:"primary",sx:{padding:"0"},onClick:i,children:e.jsx(dn,{})})})}],[]),M=ks({...Ts,columns:P,data:C,renderTopToolbarCustomActions:()=>e.jsx(Oe,{children:V?e.jsx(pe,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(ve,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(pe,{"aria-label":"refresh",color:"info",onClick:ae,children:e.jsx(Us,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:s=>e.jsx(Os,{...s,page:x(s.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},muiTableBodyRowProps:({row:s})=>({onClick:()=>N(()=>({[s.id]:!0})),selected:o[s.id],sx:{cursor:"pointer"}}),getRowId:s=>s.id,onRowSelectionChange:N,state:{rowSelection:o}});return l.useEffect(()=>{const s=Object.keys(M.getState().rowSelection)[0];p(s||null)},[M,o]),e.jsxs(e.Fragment,{children:[B&&R&&e.jsx(rs,{closeModal:()=>_(!1),children:e.jsx(Oa,{payID:R})},R),W?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Gs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Rs,{table:M})]})}const nn=({name:o,label:N,disabled:C,format:F="jYYYY/jMM/jDD",rules:R,control:p,required:B=!1,errors:_})=>{var W;const T=l.useRef(null),[y,z]=l.useState(!1),g=K=>{z(K)};return bs([T],[z]),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:o,control:p,rules:R,render:({field:{onChange:K,value:V}})=>e.jsx(ue.InputDatePicker,{id:o,"aria-label":o,disabled:C,format:F,value:V,open:y,defaultValue:null,onOpenChange:g,onChange:Q=>{z(!1),K(Q)},pickerProps:{...T&&{ref:T}},style:{border:"none",cursor:"pointer"},wrapperStyle:{border:"1px solid var(--color-input-border)",width:"100%",height:"100%",paddingLeft:"20px",borderRadius:"4px",cursor:"pointer"}})}),e.jsxs("label",{htmlFor:o,className:"inputBox__form--readOnly-label",children:[B&&e.jsx("span",{children:"*"})," ",N]}),_&&e.jsx("span",{className:"error-form",children:(W=_==null?void 0:_[o])==null?void 0:W.message})]})},Ns=({label:o,size:N="small",color:C="primary",disabled:F,control:R,name:p,errors:B,rules:_})=>e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx($,{name:p,control:R,rules:_,render:({field:{onChange:T,value:y}})=>e.jsx(On,{id:p,checked:!!y,onChange:z=>T(z.target.checked),size:N,color:C,disabled:F,sx:{padding:.5}})}),e.jsx("label",{htmlFor:p,className:F?"checkboxContainer__label--disabled":"checkboxContainer__label",children:o})]}),ot=o=>{const[N,C]=l.useState(o),F=l.useCallback(()=>{C(R=>!R)},[]);return[N,F]},it=()=>{const[o,N]=ot(!1),[C]=tn(),F=yn(),R=C.get("personID"),{control:p,handleSubmit:B,formState:{errors:_},setValue:T}=is(),{data:y,isLoading:z,isFetching:g,isSuccess:W,refetch:K}=Sn(R),[V,{isLoading:Q}]=Bn();l.useEffect(()=>{if(W){const ee=y==null?void 0:y.itemList[0];if(ee){const se={...ee};Object.keys(se).forEach(Z=>{Z==="personDeathDate"&&(se[Z]=se[Z]===null?null:en(se[Z])),Z==="personBirthDate"&&(se[Z]=se[Z]===null?null:en(se[Z])),T(Z,se[Z])}),F(Zs((se==null?void 0:se.personDeathDate)!==null))}}return()=>{F(Zs(null))}},[F,W,y==null?void 0:y.itemList,T]);const{lookUpItems:A,lookUpItemsIsLoading:ae}=X({lookUpType:"Gender"}),i=ts(A,"lookUpID","lookUpName"),{lookUpItems:P,lookUpItemsIsLoading:M}=X({lookUpType:"EducationType"}),te=ts(P,"lookUpID","lookUpName"),{lookUpItems:s,lookUpItemsIsLoading:d}=X({lookUpType:"Country"}),L=ts(s,"lookUpID","lookUpName"),{lookUpItems:E,lookUpItemsIsLoading:re}=X({lookUpType:"State"}),oe=ts(E,"lookUpID","lookUpName"),{lookUpItems:n,lookUpItemsIsLoading:J}=X({lookUpType:"City"}),v=ts(n,"lookUpID","lookUpName"),{lookUpItems:u,lookUpItemsIsLoading:t}=X({lookUpType:"HousingType"}),r=ts(u,"lookUpID","lookUpName"),{lookUpItems:m,lookUpItemsIsLoading:U}=X({lookUpType:"MaritialStatus"}),a=ts(m,"lookUpID","lookUpName"),Ne=async ee=>{let se,Z;ee.personDeathDate?(se=new Date(ee.personDeathDate),se.setMinutes(se.getMinutes()-se.getTimezoneOffset())):se=null,ee.personBirthDate?(Z=new Date(ee.personBirthDate),Z.setMinutes(Z.getMinutes()-Z.getTimezoneOffset())):Z=null;const ce=await V({...ee,personBirthDate:Z,personDeathDate:se}).unwrap();K(),N(),In.success(ce.message)};return e.jsx(e.Fragment,{children:z||g?e.jsx(Oe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(ve,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:B(Ne),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(xe,{name:"personFirstName",label:Tn,rules:js,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personLastName",label:Un,rules:js,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personNationalCode",label:An,rules:{...Pa,...js},required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personCertificateNo",label:En,rules:{...vs,...js},required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personFatherName",label:qn,rules:Ss,required:!0,control:p,editable:o,type:"text"}),e.jsx(ls,{name:"genderID",control:p,label:wn,required:!0,isClearable:!0,isDisabled:!o,options:i,isLoading:ae,rules:js,errors:_}),e.jsx(nn,{name:"personBirthDate",label:$n,control:p,disabled:!o,required:!0,errors:_,rules:js}),e.jsx(xe,{name:"personBirthPlace",label:zn,rules:Ss,required:!1,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personPreviousName",label:Hn,rules:Ss,required:!1,control:p,editable:o,type:"text"}),e.jsxs("div",{className:o?"checkboxContainer col-span-3":"checkboxContainer--disabled col-span-3",children:[e.jsx("p",{className:"inputBox__form--readOnly-label",children:"وضعیت ایثارگری:"}),e.jsx(Ns,{disabled:!o,control:p,label:Yn,name:"personIsSacrificedFamily"}),e.jsx(Ns,{disabled:!o,control:p,label:Gn,name:"personIsWarrior"}),e.jsx(Ns,{disabled:!o,control:p,label:Kn,name:"personIsChildOfSacrificed"}),e.jsx(Ns,{disabled:!o,control:p,label:Wn,name:"personIsValiant"}),e.jsx(Ns,{disabled:!o,control:p,label:Vn,name:"personIsSacrificed"}),e.jsx(Ns,{disabled:!o,control:p,label:Qn,name:"personIsCaptive"})]}),e.jsx(xe,{name:"retiredID",label:Jn,required:!1,control:p,editable:!1,type:"text"}),e.jsx(xe,{name:"personPhone",label:Xn,required:!1,rules:vs,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personCellPhone",label:Zn,required:!1,rules:Ma,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupNum",label:ea,required:!1,rules:vs,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupName",label:sa,required:!1,rules:Ss,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupLname",label:na,required:!1,rules:Ss,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personEmail",label:aa,required:!1,rules:Fa,control:p,editable:o,type:"text"}),e.jsx(ls,{name:"educationTypeID",control:p,label:ta,required:!1,isClearable:!0,isDisabled:!o,options:te,isLoading:M}),e.jsx(ls,{name:"personCountryID",control:p,label:la,required:!1,isClearable:!0,isDisabled:!o,options:L,isLoading:d}),e.jsx(ls,{name:"personStateID",control:p,label:ra,required:!1,isClearable:!0,isDisabled:!o,options:oe,isLoading:re}),e.jsx(ls,{name:"personCityID",control:p,label:oa,required:!1,isClearable:!0,isDisabled:!o,options:v,isLoading:J}),e.jsx(xe,{name:"personRegion",label:ia,required:!1,control:p,editable:o,rules:vs,type:"text"}),e.jsx(xe,{name:"personArea",label:ca,required:!1,control:p,editable:o,rules:vs,type:"text"}),e.jsx(xe,{name:"personPostalCode",label:pa,required:!1,control:p,editable:o,rules:La,type:"text"}),e.jsx(ls,{name:"housingTypeID",control:p,label:ua,required:!1,isClearable:!0,isDisabled:!o,options:r,isLoading:t}),e.jsx(ls,{name:"maritalStatusID",control:p,label:da,required:!1,isClearable:!0,isDisabled:!o,options:a,isLoading:U}),e.jsx(nn,{name:"personDeathDate",label:ma,control:p,disabled:!o,required:!1}),e.jsx(sn,{name:"personAddress",label:ha,required:!0,control:p,editable:o,containerClassNames:"col-span-3"}),e.jsx(sn,{name:"personDescription",label:xa,required:!0,control:p,editable:o,containerClassNames:"col-span-4 row-span-2"})]}),e.jsxs("div",{className:"flex-row mr-auto",children:[e.jsx(we,{dir:"ltr",endIcon:e.jsx(Ua,{}),disabled:!o,variant:"contained",type:"submit",loading:Q,color:"success",children:e.jsx("span",{children:ga})}),e.jsx(we,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:N,disabled:o,variant:"contained",color:"primary",children:e.jsx("span",{children:ja})})]})]})})})},Wt=()=>{const[o,N]=l.useState("1"),{personDeathDate:C}=an(p=>p.person),F=(p,B)=>{N(B)};return e.jsxs("section",{className:"flex-col",children:[e.jsx(Rn,{title:Na,back:!0}),e.jsxs("div",{"data-name":"retired-forms",children:[e.jsxs(Es,{children:[e.jsx(qs,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(ws,{}),children:fa}),e.jsx($s,{children:e.jsx(it,{})})]}),e.jsxs(Es,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(qs,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(ws,{}),children:ya}),e.jsx($s,{children:e.jsx(Ea,{})})]}),e.jsxs(Es,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(qs,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(ws,{}),children:Ia}),e.jsx($s,{children:e.jsx(Aa,{})})]}),e.jsxs(Es,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(qs,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(ws,{}),children:ba}),e.jsx($s,{children:e.jsx(qa,{})})]})]}),e.jsx("div",{"data-name":"retired-grids",children:e.jsxs(Ra,{value:o,children:[e.jsx(Oe,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(Ta,{onChange:F,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(As,{label:C?Ca:Da,value:"1"}),e.jsx(As,{label:va,value:"2"}),e.jsx(As,{label:Sa,value:"3"}),e.jsx(As,{label:Ba,value:"4"})]})}),e.jsx(zs,{value:"1",sx:{padding:"0"},children:C?e.jsx(tt,{}):e.jsx(Va,{})}),e.jsx(zs,{value:"2",sx:{padding:"0"},children:e.jsx(_n,{})}),e.jsx(zs,{value:"3",sx:{padding:"0"},children:e.jsx(rt,{})}),e.jsx(zs,{value:"4",sx:{padding:"0"},children:e.jsx(lt,{})})]})})]})};export{Wt as default};
