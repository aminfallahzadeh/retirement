import{R as v,cr as _,cs as $,ct as M,cu as z,j as e,f as p,cv as K,O,T as l,cw as h,L as I,cx as B,E as P,dI as G,fK as k,I as T,B as F,C as U,er as q,fL as J,r as m,A as Q,z as V,dJ as W,G as Y,au as H}from"./index-BXRanfZW.js";import{j as X,k as Z}from"./statementApi-C9CzBuYX.js";import{D as w}from"./DeleteOutline-1qNzJoo8.js";import{A as ee}from"./Add-DGKS2mGq.js";const te=a=>[{accessorKey:"retirementStatementRowNo",size:20,header:v,enableColumnActions:!1,enableSorting:!1},{accessorKey:"retirementStatementNo",size:20,header:_},{accessorKey:"retirementStatementSerial",size:20,header:$},{accessorKey:"retirementStatementTypeName",size:20,header:M},{accessorKey:"retirementStatementIssueDate",header:z,Cell:({renderedCellValue:t})=>e.jsx("div",{children:p(t)})},{accessorKey:"retirementStatementRunDate",header:K,Cell:({renderedCellValue:t})=>e.jsx("div",{children:p(t)})},{accessorKey:"observeRetirementStatement",header:O,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:`${h} ${t.original.retirementStatementSerial}`,children:e.jsx(I,{to:`${B}document/rstatement?statementID=${t.original.id}&personID=${t.original.personID}&personDeathDate=${t.original.personDeathDate}`,children:e.jsx(P,{color:"primary"})})})},{accessorKey:"deleteRetirementStatement",header:G,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:t.original.retirementStatementIssueConfirmDate?k:`${h} ${t.original.retirementStatementSerial}`,children:e.jsx("span",{children:e.jsx(T,{disabled:!!t.original.retirementStatementIssueConfirmDate,color:"error",onClick:()=>a(t.original.id),sx:{padding:"0"},children:e.jsx(w,{})})})})}],se=(a,t,r,o)=>e.jsx(F,{children:t||a?e.jsx(T,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(U,{size:20,value:100})}):e.jsx(l,{title:q,children:e.jsx(I,{to:`${J}?personID=${r}&requestID=${o}`,children:e.jsx(ee,{fontSize:"small",color:"success"})})})}),me=({columns:a})=>{const[t,r]=m.useState([]),[o,i]=Q(!1),[f,g]=m.useState(""),[c]=V(),d=c.get("personID"),R=c.get("requestID"),{data:S,isSuccess:u,isLoading:D,isFetching:E,refetch:x}=X({personID:d}),[j,{isLoading:A}]=Z();m.useEffect(()=>{if(u){const n=S.map((s,b)=>({id:s.retirementStatementID,retirementStatementRowNo:b+1,retirementStatementSerial:s.retirementStatementSerial,retirementStatementTypeName:s.retirementStatementTypeName,retirementStatementNo:s.retirementStatementNo||"-",retirementStatementIssueDate:s.retirementStatementIssueDate,retirementStatementRunDate:s.retirementStatementRunDate,retirementStatementIssueConfirmDate:s.retirementStatementIssueConfirmDate,personID:s.personID,personDeathDate:s.personDeathDate}));r(n)}},[u,S]);const C=n=>{g(n),i()},N=async()=>{const n=await j({rsID:f}).unwrap();H.success(n.message),x(),i()},y=te(C),L=se(D,E,d,R);return e.jsxs(e.Fragment,{children:[e.jsx(W,{open:o,onClose:i,isLoading:A,handleRemove:N}),e.jsx(Y,{data:t,columns:a||y,scroll:!0,topBarActions:L,isLoading:D,isFetching:E,sorting:[{id:"retirementStatementIssueDate",desc:!0}]})]})};export{me as RetiredStatementsGrid,me as default};
