import{R as A,P as E,K as P,N as S,aE as $,Y as K,j as e,f as v,e5 as F,at as j,T as l,L as R,fD as G,dz as D,I as t,B,C as N,fE as H,ei as k,r as d,D as M,A as U,dA as _,G as O,au as W,fF as Z,fG as Q,k as ee}from"./index-CAx8cgCu.js";import{c as se,d as ae}from"./relatedApi-DQ9onMEM.js";import{D as Y}from"./DeleteOutline-CmOl4-2a.js";import{E as q}from"./EditOutlined-CdnRVLWu.js";import{A as w}from"./Add-BaJ3brIj.js";import{R as J}from"./Refresh-62Jw-ki_.js";import{c as re,d as oe}from"./heirApi-DmllsQDi.js";const ne=(r,o)=>[{accessorKey:"relatedRowNo",header:A,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"personNationalCode",header:E,size:20},{accessorKey:"personFirstName",header:P,size:20},{accessorKey:"personLastName",header:S,size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"personBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"relationshipWithParentName",header:F,size:20},{accessorKey:"updateRelated",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${G}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(q,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(Y,{})})})}],te=(r,o,s,i)=>e.jsxs(B,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(J,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:k,children:e.jsx(R,{to:`${G}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(w,{fontSize:"small"})})})})]}),ie=()=>{const[r,o]=d.useState([]),[s,i]=M(!1),[g,h]=d.useState(""),[y]=U(),c=y.get("personID"),{data:p,isSuccess:m,isLoading:u,isFetching:x,refetch:f}=se(c),[C,{isLoading:I}]=ae();d.useEffect(()=>{if(m){const n=p.itemList.map((a,T)=>({id:a.personID,relatedRowNo:T+1,pensionaryID:a.pensionaryID,personBirthDate:a.personBirthDate,personNationalCode:a.personNationalCode,personFirstName:a.personFirstName,personLastName:a.personLastName,pensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,relationshipWithParentName:a.relationshipWithParentName}));o(n)}},[m,p]);const b=async()=>{const n=await C({pensionaryID:g}).unwrap();i(),f(),W.success(n.message)},z=ne(c,n=>{h(n),i()}),L=te(u,x,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(_,{open:s,onClose:i,isLoading:I,handleRemove:b}),e.jsx(O,{data:r,columns:z,scroll:!1,topBarActions:L,isLoading:u,isFetching:x})]})},le=(r,o)=>[{accessorKey:"heirRowNo",header:A,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"heirNationalCode",header:E,size:20},{accessorKey:"heirFirstName",header:P,size:20},{accessorKey:"heirLastName",header:S,size:20},{accessorKey:"heirPensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"heirBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"heirRelationshipWithParentName",header:F,size:20},{accessorKey:"heirParentPersonNationalCode",header:Z,size:20},{accessorKey:"updateHeir",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${Q}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(q,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(Y,{})})})}],ce=(r,o,s,i)=>e.jsxs(B,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(J,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:k,children:e.jsx(R,{to:`${Q}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(w,{fontSize:"small"})})})})]}),de=()=>{const[r,o]=d.useState(""),[s,i]=d.useState([]),[g,h]=M(!1),[y]=U(),c=y.get("personID"),{data:p,isLoading:m,isSuccess:u,isFetching:x,refetch:f}=re(c),[C,{isLoading:I}]=oe();d.useEffect(()=>{if(u){const n=p.itemList.map((a,T)=>({id:a.personID,heirRowNo:T+1,pensionaryID:a.pensionaryID,heirNationalCode:a.personNationalCode,heirFirstName:a.personFirstName,heirLastName:a.personLastName,heirPensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,heirBirthDate:a.personBirthDate,heirRelationshipWithParentName:a.relationshipWithParentName,heirParentPersonNationalCode:a.parentPersonNationalCode}));i(n)}},[u,p]);const b=async()=>{const n=await C({pensionaryID:r}).unwrap();f(),h(),W.success(n.message)},z=le(c,n=>{o(n),h()}),L=ce(m,x,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(_,{open:g,onClose:h,isLoading:I,handleRemove:b}),e.jsx(O,{data:s,columns:z,scroll:!1,topBarActions:L,isLoading:m,isFetching:x})]})},De=()=>{const{personDeathDate:r}=ee(o=>o.person);return r?e.jsx(de,{}):e.jsx(ie,{})};export{De as default};
