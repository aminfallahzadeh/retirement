import{dP as _,j as e,T as l,ge as $,gf as p,I as g,R as M,eV as z,eT as K,eU as O,eW as P,f as h,eX as B,O as G,L as T,fZ as U,E as k,B as F,C as q,eC as Q,gg as V,r as m,D as W,A as X,dQ as Y,G as Z,ax as H}from"./index-N58BBWKb.js";import{j as J,k as w}from"./statementApi-B4hSjTeP.js";import{D as ee}from"./DeleteOutline-Zdzo4dhy.js";import{A as te}from"./Add-DI5jx8dx.js";const se=(a,r)=>{const n=[{accessorKey:"retirementStatementRowNo",size:20,header:M,enableColumnActions:!1,enableSorting:!1},{accessorKey:"retirementStatementNo",size:20,header:z},{accessorKey:"retirementStatementSerial",size:20,header:K},{accessorKey:"retirementStatementTypeName",size:20,header:O},{accessorKey:"retirementStatementIssueDate",header:P,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"retirementStatementRunDate",header:B,Cell:({renderedCellValue:t})=>e.jsx("div",{children:h(t)})},{accessorKey:"observeRetirementStatement",header:G,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx(T,{to:`${U}document/rstatement?statementID=${t.original.id}&personID=${t.original.personID}&personDeathDate=${t.original.personDeathDate}`,children:e.jsx(k,{color:"primary"})})})}];return r&&n.push({accessorKey:"deleteRetirementStatement",header:_,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:t.original.retirementStatementIssueConfirmDate?$:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx("span",{children:e.jsx(g,{disabled:!!t.original.retirementStatementIssueConfirmDate,color:"error",onClick:()=>a(t.original.id),sx:{padding:"0"},children:e.jsx(ee,{})})})})}),n},ae=(a,r,n,t)=>e.jsx(F,{children:r||a?e.jsx(g,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(q,{size:20,value:100})}):e.jsx(l,{title:Q,children:e.jsx(T,{to:`${V}?personID=${n}&requestID=${t}`,children:e.jsx(te,{fontSize:"small",color:"success"})})})}),le=({columns:a,hasDeleteAction:r=!0})=>{const[n,t]=m.useState([]),[I,i]=W(!1),[f,R]=m.useState(""),[c]=X(),d=c.get("personID"),x=c.get("requestID"),{data:S,isSuccess:u,isLoading:D,isFetching:E,refetch:C}=J({personID:d}),[j,{isLoading:A}]=w();m.useEffect(()=>{if(u){const o=S.map((s,v)=>({id:s.retirementStatementID,retirementStatementRowNo:v+1,retirementStatementSerial:s.retirementStatementSerial,retirementStatementTypeName:s.retirementStatementTypeName,retirementStatementNo:s.retirementStatementNo||"-",retirementStatementIssueDate:s.retirementStatementIssueDate,retirementStatementRunDate:s.retirementStatementRunDate,retirementStatementIssueConfirmDate:s.retirementStatementIssueConfirmDate,personID:s.personID,personDeathDate:s.personDeathDate}));t(o)}},[u,S]);const N=o=>{R(o),i()},y=async()=>{const o=await j({rsID:f}).unwrap();H.success(o.message),C(),i()},b=se(N,r),L=ae(D,E,d,x);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{open:I,onClose:i,isLoading:A,handleRemove:y}),e.jsx(Z,{data:n,columns:a||b,scroll:!0,topBarActions:L,isLoading:D,isFetching:E,sorting:[{id:"retirementStatementIssueDate",desc:!0}]})]})};export{le as R};
