import{c as In,j as e,r as l,o as is,m as ne,B as Pe,C as Se,a as x,k as We,p as Ss,n as c,b as fs,I as ce,T as fe,d as rn,q as ve,t as on,e as bn,v as Cn,w as cn,x as Ds,y as pn,D as un,i as dn,H as js,L as Dn,z as Qs,A as vn,u as Sn,E as nn,F as Bn}from"./index-BSRVVr8n.js";import{u as cs,C as $}from"./index.esm-CjA9BksF.js";import{u as Js}from"./sharedApi-Bhit52A6.js";import{u as _n,a as kn,b as On,c as Xs,d as Pn,e as Mn,f as Fn,R as Ln}from"./RetiredStatementsGrid-JPiiLuJ5.js";import{u as X,a as Rn,b as Bs,c as Ks}from"./useFetchLookUpData-3d-SvVf8.js";import{i as ys,S as H}from"./react-select-animated.esm-C8qvyk3o.js";import{o as Y,s as h,a as G}from"./reactSelect-BGq5yAQc.js";import{S as Is}from"./Save-BGOXVp9e.js";import{E as _s}from"./EditOutlined-CJT40D9a.js";import{u as bs,m as ue,C as de,d as ge,a as me}from"./datePicker-D-YGL39f.js";import{u as ks,P as Os,C as Ps,a as Ms,L as Fs,F as Ls,b as Rs,T as Es}from"./index.esm-BxY0lyNJ.js";/* empty css                 */import{d as Ts}from"./table-options-DlAa6-Lw.js";import{R as As}from"./Refresh-DHTXiARq.js";import{u as Tn,a as An,c as Un,F as En}from"./createTree-Dva885DQ.js";import{N as qn,F as wn,a as $n,b as zn,C as Hn,c as Yn,G as Gn,B as Kn,d as Wn,P as Vn,S as Qn,W as Jn,e as Xn,V as Zn,f as ea,g as sa,R as na,h as aa,M as ta,i as la,j as ra,k as oa,E as ia,l as ca,m as pa,n as ua,o as da,p as ma,A as ha,q as xa,H as ga,r as ja,D as Na,s as fa,t as ya,u as Ia,v as ba,w as Ca,x as Da,y as va,z as Sa,I as Ba,J as _a,K as ka,O as Oa,Q as Pa,T as Ma}from"./const-BYnLywqp.js";import{M as os}from"./Modal-CHpckkD-.js";import{S as Ws}from"./index-Czcrc2XJ.js";import{D as mn}from"./DeleteOutline-DTlBR821.js";import{A as hn}from"./Add-BfxQkocC.js";import{b as Fa}from"./requestApi-BdwrSs1O.js";import{E as xn}from"./VisibilityOutlined-YP-_yELv.js";import{u as La,S as Ra}from"./SlipFormTemplate-ySuTUNJB.js";import{I as xe,T as an}from"./TextArea-_51DlPKJ.js";import{R as Zs,N as be,c as ls,S as rs}from"./SelectInput-UFM3pX9P.js";import{C as Ta}from"./index-BywiX4DN.js";import{A as qs,a as ws,b as $s,c as zs}from"./ArrowDropDown-tRJe5TGb.js";import{T as Aa,a as Ua,b as Hs}from"./TabPanel-Cyg5lnFe.js";import"./statementApi-CwRN-Mss.js";import"./module-VPD-lIuN.js";import"./index-DI2c807X.js";const Ea=In(e.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"DoneOutlined");function qa(){const[o,j]=l.useState(!1),C=ys(),[F,R]=l.useState([]),{handleSubmit:p,formState:{errors:B},control:_,register:T,watch:y,setValue:z}=cs(),g=y(),W=is(),V=new URLSearchParams(W.search).get("personID"),[Q,{isLoading:U}]=_n(),[ae,{isLoading:i,isFetching:P}]=Js(),{lookUpItems:M,lookUpItemsIsLoading:te,lookUpItemsIsFetching:s}=X({lookUpType:"Bank"}),d=Y(M,"lookUpID","lookUpName"),L=Y(F,"lookUpID","lookUpName"),{data:E,isSuccess:re,isLoading:oe,isFetching:n,error:J}=kn(V),v=l.useCallback(async m=>{try{const A=await ae({lookUpType:"BankBranch",lookUpParentID:m}).unwrap();R(A.itemList)}catch(A){console.log(A)}},[ae,R]);l.useEffect(()=>{re&&Object.keys(E).forEach(m=>{z(m,E[m])})},[re,E,z]),l.useEffect(()=>{var m;J&&ne.error(((m=J==null?void 0:J.data)==null?void 0:m.message)||J.error,{autoClose:2e3})},[J]),l.useEffect(()=>{g.bankID&&v(g.bankID)},[g.bankID,v]);const u=()=>{j(!0)},t=async()=>{var m;try{const A=await Q({...g,ledgerCode:parseInt(c(g.ledgerCode))||null,insuranceAmount:parseFloat(c(g.insuranceAmount))||null,insuranceCoef:parseFloat(c(g.insuranceCoef))||null,accountNo:c(g.accountNo),personID:V}).unwrap();j(!1),ne.success(A.message,{autoClose:2e3})}catch(A){console.log(A),ne.error(((m=A==null?void 0:A.data)==null?void 0:m.message)||A.error,{autoClose:2e3})}};return l.useEffect(()=>{console.log(g)},[g]),e.jsx(e.Fragment,{children:oe||n?e.jsx(Pe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Se,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:p(t),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:_,render:({field:{onChange:m}})=>e.jsx(H,{closeMenuOnSelect:!0,components:C,options:d,onChange:A=>m(A?A.value:null),isDisabled:!o,value:d.find(A=>A.value===(g==null?void 0:g.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:te||s})}),e.jsx("label",{htmlFor:"bankID",className:g!=null&&g.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:_,render:({field:{onChange:m}})=>e.jsx(H,{closeMenuOnSelect:!0,components:C,options:L,onChange:A=>m(A?A.value:null),isDisabled:!o||i||P||!g.bankID,value:L.find(A=>A.value===(g==null?void 0:g.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:i||P})}),e.jsx("label",{htmlFor:"bankBranchID",className:g!=null&&g.bankBranchID&&L.some(m=>m.value===g.bankBranchID)?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.accountNo&&e.jsx("span",{className:"error-form",children:B.accountNo.message}),e.jsx("input",{disabled:!o||oe,type:"text",id:"accountNo",name:"accountNo",value:x(g==null?void 0:g.accountNo)??"",className:"inputBox__form--input",required:!0,...T("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"accountNo",className:"inputBox__form--label",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.ledgerCode&&e.jsx("span",{className:"error-form",children:B.ledgerCode.message}),e.jsx("input",{disabled:!o,type:"text",id:"ledgerCode",name:"ledgerCode",value:x(g==null?void 0:g.ledgerCode)??"",className:"inputBox__form--input",required:!0,...T("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"دفتر کل باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"ledgerCode",className:"inputBox__form--label",children:"دفتر کل"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.insuranceCoef&&e.jsx("span",{className:"error-form",children:B.insuranceCoef.message}),e.jsx("input",{disabled:!o,type:"text",id:"insuranceCoef",name:"insuranceCoef",value:x(g==null?void 0:g.insuranceCoef)??"",className:"inputBox__form--input",required:!0,...T("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,٫][۰-۹0-9]+)?$/,message:"ضریب بیمه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceCoef",className:"inputBox__form--label",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[B.insuranceAmount&&e.jsx("span",{className:"error-form",children:B.insuranceAmount.message}),e.jsx("input",{disabled:!o,type:"text",id:"insuranceAmount",name:"insuranceAmount",value:x(g==null?void 0:g.insuranceAmount)??"",className:"inputBox__form--input",required:!0,...T("insuranceAmount",{pattern:{value:/^[۰-۹0-9]+$/,message:"بیمه تبعی باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceAmount",className:"inputBox__form--label",children:"بیمه تبعی"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),loading:U,disabled:!o,onClick:p,type:"submit",variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})}),e.jsx(Ss,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:u,disabled:o,variant:"contained",color:"primary",children:e.jsx("span",{children:"ویرایش"})})]})]})})})}function en({statusHistoryTableData:o,isLoading:j,isFetching:C,handleRefresh:F}){const[R,p]=l.useState({pageIndex:0,pageSize:3}),B=l.useMemo(()=>[{accessorKey:"pensionaryStatusRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:y})=>e.jsx("div",{children:x(y)})},{accessorKey:"pensionaryStatusName",header:"وضعیت",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:x(y)})},{accessorKey:"pensionaryStartdate",header:"تاریخ شروع",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:fs(y)})},{accessorKey:"isActive",header:"وضعیت",size:20,Cell:({renderedCellValue:y})=>e.jsx("div",{children:y===!0?"فعال":"غیرفعال"})}],[]),_=ks({...Ts,columns:B,data:o,muiTopToolbarProps:{sx:{overflow:"none"}},muiTableBodyRowProps:({row:y})=>({sx:{backgroundColor:y.original.isActive?"#00FF00":""}}),muiTableHeadProps:{sx:{zIndex:0}},renderTopToolbarCustomActions:()=>e.jsx(Pe,{children:j||C?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"info",onClick:F,children:e.jsx(As,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:y=>e.jsx(Os,{...y,page:x(y.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},initialState:{density:"compact",sorting:[{id:"isActive",desc:!0}]},onPaginationChange:p,state:{pagination:R}});return e.jsx(Rs,{table:_})}function wa(){const o=l.useRef(null),j=l.useRef(null),[C,F]=l.useState(!1),[R,p]=l.useState(null),[B,_]=l.useState(null),[T,y]=l.useState(!1),[z,g]=l.useState(!1),[W,K]=l.useState([]),V=ys(),{handleSubmit:Q,formState:{errors:U},control:ae,register:i,watch:P,setValue:M,reset:te}=cs(),s=P(),[d,{isLoading:L}]=On(),re=new URLSearchParams(location.search).get("personID"),{personDeathDate:oe}=rn(q=>q.person),{data:n,isSuccess:J,isLoading:v,isFetching:u,refetch:t,error:r}=Xs(re),{data:m,isSuccess:A,isLoading:a,isFetching:Ne,error:le,refetch:ee}=Pn(re);l.useEffect(()=>{if(t(),J){const q=n==null?void 0:n.itemList.map((k,he)=>({id:k.pensionaryID,isActive:k.pensionaryIsActive,pensionaryStatusRowNum:he+1,pensionaryStatusName:k.pensionaryStatusName||"-",pensionaryStartdate:ve(k.pensionaryStartdate)||"-"}));K(q)}return()=>{K([])}},[t,J,n]),l.useEffect(()=>{if(ee(),A){const q=m==null?void 0:m.itemList[0];q&&Object.keys(q).forEach(k=>{M(k,q[k])})}return()=>{te()}},[A,m,M,te,ee]),l.useEffect(()=>{var q;le&&(console.log(le),ne.error(((q=le==null?void 0:le.data)==null?void 0:q.message)||le.error,{autoClose:2e3}))},[le]),l.useEffect(()=>{var q;r&&(console.log(r),ne.error(((q=r==null?void 0:r.data)==null?void 0:q.message)||r.error,{autoClose:2e3}))},[r]);const{organizations:se,organizationIsLoading:Z,organizationIsFetching:pe}=Rn({}),{lookUpItems:Ce,lookUpItemsIsLoading:Me,lookUpItemsIsFetching:$e}=X({lookUpType:"EmploymentType"}),{pensionaryStatus:Be,pensionaryStatusIsLoading:ie,pensionaryStatusIsFetching:De}=Bs({pensionaryStatusCategory:"R",pensionaryStatusIsDead:oe}),_e=Y(se,"organizationID","organizationName"),Fe=Y(Ce,"lookUpID","lookUpName"),Le=Y(Be,"pensionaryStatusID","pensionaryStatusName");l.useEffect(()=>{p(ve(s==null?void 0:s.retirementDate))},[s==null?void 0:s.retirementDate]),l.useEffect(()=>{_(ve(s==null?void 0:s.pensionaryStartDate))},[s==null?void 0:s.pensionaryStartDate]);const Re=()=>{F(!0)},je=()=>{t()},ze=q=>{g(q)},Te=q=>{y(q)},Ae=q=>{p(q),g(!1)},Ue=q=>{_(q),y(!1)},Ee=async()=>{var q;try{let k,he;R?(k=new Date(R),k.setMinutes(k.getMinutes()-k.getTimezoneOffset())):k=null,B?(he=new Date(B),he.setMinutes(he.getMinutes()-he.getTimezoneOffset())):he=null;const ke=await d({...s,retiredGroup:parseInt(c(s.retiredGroup)),retiredOrganizationID:c(s.retiredOrganizationID),retiredJobDegreeCoef:parseInt(c(s.retiredJobDegreeCoef)),retiredRealDuration:parseInt(c(s.retiredRealDuration)),retiredGrantDuration:parseInt(c(s.retiredGrantDuration)),retirementDate:k,pensionaryStartDate:he,personID:re}).unwrap();ee(),F(!1),t(),ne.success(ke.message,{autoClose:2e3})}catch(k){console.log(k),ne.error(((q=k==null?void 0:k.data)==null?void 0:q.message)||k.error,{autoClose:2e3})}};return bs([o,j],[g,y]),e.jsx(e.Fragment,{children:a||Ne?e.jsx(Pe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Se,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:Q(Ee),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[U.retiredGroup&&e.jsx("span",{className:"error-form",children:U.retiredGroup.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredGroup",name:"retiredGroup",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredGroup)??"",required:!0,...i("retiredGroup",{required:"گروه اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"گروه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{htmlFor:"retiredGroup",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," گروه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"retiredOrganizationID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:_e,onChange:k=>q(k?k.value:null),isDisabled:!C,value:_e.find(k=>k.value===(s==null?void 0:s.retiredOrganizationID)),name:"retiredOrganizationID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Z||pe})}),e.jsxs("label",{className:s!=null&&s.retiredOrganizationID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),U.retiredOrganizationID&&e.jsx("span",{className:"error-form",children:" محل خدمت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[U.retiredLastPosition&&e.jsx("span",{className:"error-form",children:U.retiredLastPosition.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredLastPosition",name:"retiredLastPosition",value:(s==null?void 0:s.retiredLastPosition)||"",className:"inputBox__form--input",required:!0,...i("retiredLastPosition",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"retiredLastPosition",className:"inputBox__form--label",children:"سمت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"employmentTypeID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:Fe,onChange:k=>q(k?k.value:null),isDisabled:!C,value:Fe.find(k=>k.value===(s==null?void 0:s.employmentTypeID)),name:"employmentTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Me||$e})}),e.jsxs("label",{className:s!=null&&s.employmentTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),U.employmentTypeID&&e.jsx("span",{className:"error-form",children:"نوع استخدام اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!C,value:R,defaultValue:null,onChange:Ae,onOpenChange:ze,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:z,style:ge,wrapperStyle:me,pickerProps:{ref:o}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ بازنشستگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:ae,rules:{required:!0},render:({field:{onChange:q}})=>e.jsx(H,{closeMenuOnSelect:!0,components:V,options:Le,onChange:k=>q(k?k.value:null),isDisabled:!C,value:Le.find(k=>k.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:ie||De})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت"]}),U.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!C,value:B,defaultValue:null,onChange:Ue,onOpenChange:Te,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:T,style:ge,wrapperStyle:me,pickerProps:{ref:j}}),e.jsxs("div",{className:"inputBox__form--readOnly-label",children:[e.jsx("span",{children:"*"})," تاریخ تغییر وضعیت"]})]}),e.jsxs("div",{className:"inputBox__form",children:[U.retiredJobDegreeCoef&&e.jsx("span",{className:"error-form",children:U.retiredJobDegreeCoef.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredJobDegreeCoef",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredJobDegreeCoef)??"",name:"retiredJobDegreeCoef",required:!0,...i("retiredJobDegreeCoef",{pattern:{value:/^[۰-۹0-9]+$/,message:"ضریب مدیریتی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredJobDegreeCoef",className:"inputBox__form--label",children:"ضریب مدیریتی"})]}),e.jsxs("div",{className:"inputBox__form",children:[U.retiredRealDuration&&e.jsx("span",{className:"error-form",children:U.retiredRealDuration.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredRealDuration",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredRealDuration)??"",name:"retiredRealDuration",required:!0,...i("retiredRealDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابفه حقیقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredRealDuration",className:"inputBox__form--label",children:"سابقه حقیقی بازنشسته"})]}),e.jsxs("div",{className:"inputBox__form",children:[U.retiredGrantDuration&&e.jsx("span",{className:"error-form",children:U.retiredGrantDuration.message}),e.jsx("input",{disabled:!C,type:"text",id:"retiredGrantDuration",className:"inputBox__form--input",value:x(s==null?void 0:s.retiredGrantDuration)??"",name:"retiredGrantDuration",required:!0,...i("retiredGrantDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابقه ارفاقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredGrantDuration",className:"inputBox__form--label",children:"سابقه ارفاقی بازنشسته"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(en,{statusHistoryTableData:W,isLoading:v,isFetching:u,handleRefresh:je}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),loading:L,disabled:!C,type:"submit",onClick:Q,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})}),e.jsx(Ss,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:Re,disabled:C,variant:"contained",color:"primary",children:e.jsx("span",{children:"ویرایش"})})]})]})})})}const $a=()=>{const[o]=on(),[j,C]=l.useState([]),[F,R]=l.useState([]),p=o.get("personID"),{data:B,isLoading:_,isSuccess:T,refetch:y}=Tn(),{data:z,isLoading:g,isSuccess:W,refetch:K}=An(p);l.useEffect(()=>{W&&R(z.itemList)},[W,z]),l.useEffect(()=>{if(T){const Q=Un(B.itemList);C(Q)}},[T,B]);const V=l.useCallback(()=>{y(),K()},[y,K]);return e.jsx(En,{structure:j,files:F,isLoading:_||g,refetch:V,access:"files"})},za=({title:o})=>{const j=bn();return e.jsxs("div",{className:"title-primary--container flex-row flex-center",children:[e.jsx("h4",{className:"title-primary",children:e.jsx("span",{className:"title-primary--underline",children:o})}),e.jsx("div",{style:{marginRight:"auto"},className:"back-button",children:e.jsx(fe,{title:qn,children:e.jsx("span",{children:e.jsx(ce,{color:"primary",onClick:()=>j(-1),children:e.jsx(Cn,{})})})})})]})},Ha=cn.injectEndpoints({endpoints:o=>({getRelatedListByParentPersonID:o.query({query:j=>({url:`${Ds}/GetRelatedListByParentPersonID?parentPersonID=${j}`})}),getRelated:o.query({query:j=>({url:`${Ds}/GetRelated?personID=${j}`})}),insertRelated:o.mutation({query:j=>({url:`${Ds}/InsertRelated`,method:"POST",body:j})}),updateRelated:o.mutation({query:j=>({url:`${Ds}/UpdateRelated`,method:"POST",body:j})}),removeRelated:o.mutation({query:({pensionaryID:j})=>({url:`${Ds}/RemoveRelated?pensionaryID=${j}`,method:"POST"})})})}),{useGetRelatedListByParentPersonIDQuery:Ya,useGetRelatedQuery:Ga,useInsertRelatedMutation:Ka,useUpdateRelatedMutation:Wa,useRemoveRelatedMutation:Va}=Ha;function Qa({setShowCreateRelatedModal:o,refetch:j}){const C=l.useRef(null),F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),B=l.useRef(null),[_,T]=l.useState(null),[y,z]=l.useState(null),[g,W]=l.useState(null),[K,V]=l.useState(null),[Q,U]=l.useState(null),[ae,i]=l.useState(!1),[P,M]=l.useState(!1),[te,s]=l.useState(!1),[d,L]=l.useState(!1),[E,re]=l.useState(!1),{handleSubmit:oe,formState:{errors:n},control:J,register:v,watch:u}=cs(),t=u(),[r,{isLoading:m}]=Ka(),A=is(),Ne=new URLSearchParams(A.search).get("personID"),le=ys(),{relationships:ee,relationshipIsLoading:se,relationshipIsFetching:Z}=Ks(),{pensionaryStatus:pe,pensionaryStatusIsLoading:Ce,pensionaryStatusIsFetching:Me}=Bs({pensionaryStatusCategory:"L"}),{lookUpItems:$e,lookUpItemsIsLoading:Be,lookUpItemsIsFetching:ie}=X({lookUpType:"MaritialStatus"}),{lookUpItems:De,lookUpItemsIsLoading:_e,lookUpItemsIsFetching:Fe}=X({lookUpType:"EducationType"}),{lookUpItems:Le,lookUpItemsIsLoading:Re,lookUpItemsIsFetching:je}=X({lookUpType:"UniversityType"}),{lookUpItems:ze,lookUpItemsIsLoading:Te,lookUpItemsIsFetching:Ae}=X({lookUpType:"Country"}),{lookUpItems:Ue,lookUpItemsIsLoading:Ee,lookUpItemsIsFetching:He}=X({lookUpType:"State"}),{lookUpItems:q,lookUpItemsIsLoading:k,lookUpItemsIsFetching:he}=X({lookUpType:"City"}),ke=Y(ee,"relationshipID","relationshipName"),Ve=Y(pe,"pensionaryStatusID","pensionaryStatusName"),Qe=Y($e,"lookUpID","lookUpName"),Je=Y(De,"lookUpID","lookUpName"),Xe=Y(Le,"lookUpID","lookUpName"),Ze=Y(ze,"lookUpID","lookUpName"),es=Y(Ue,"lookUpID","lookUpName"),Ye=Y(q,"lookUpID","lookUpName"),ts=O=>{T(O),M(!1)},w=O=>{z(O),s(!1)},f=O=>{W(O),L(!1)},ye=O=>{V(O),re(!1)},Ie=O=>{U(O),i(!1)},ss=O=>{M(O)},ps=O=>{s(O)},Ge=O=>{i(O)},us=O=>{L(O)},ds=O=>{re(O)},ms=async()=>{var O;try{let I,Oe,qe,Ke,D;_?(I=new Date(_),I.setMinutes(I.getMinutes()-I.getTimezoneOffset())):I=null,Q?(D=new Date(Q),D.setMinutes(D.getMinutes()-D.getTimezoneOffset())):D=null,y?(Oe=new Date(y),Oe.setMinutes(Oe.getMinutes()-Oe.getTimezoneOffset())):Oe=null,g?(qe=new Date(g),qe.setMinutes(qe.getMinutes()-qe.getTimezoneOffset())):qe=null,K?(Ke=new Date(K),Ke.setMinutes(Ke.getMinutes()-Ke.getTimezoneOffset())):Ke=null;const N=await r({...t,parentPersonID:Ne,relationshipWithParentID:c(t.relationshipWithParentID),personCertificateNo:c(t.personCertificateNo),personNationalCode:c(t.personNationalCode),pensionaryStatusID:c(t.pensionaryStatusID),maritalStatusID:c(t.maritalStatusID),educationTypeID:c(t.educationTypeID),universityID:c(t.universityID),personPhone:c(t.personPhone),personCellPhone:c(t.personCellPhone),personCellPhone2:c(t.personCellPhone2),personRegion:parseInt(c(t.personRegion))||null,personArea:parseInt(c(t.personArea))||null,personCountryID:c(t.personCountryID),personCityID:c(t.personCityID),personStateID:c(t.personStateID),personPostalCode:c(t.personPostalCode),backupPhone:c(t.backupPhone),backupCellphone:c(t.backupCellphone),personBirthDate:I,personMaritalDate:Oe,selfEmployeeStartDate:qe,selfEmployeeEndDate:Ke,pensionaryStartDate:D}).unwrap();o(!1),j(),ne.success(N.message,{autoClose:2e3})}catch(I){console.log(I),ne.error(((O=I==null?void 0:I.data)==null?void 0:O.message)||I.error,{autoClose:2e3})}};return bs([C,F,R,p,B],[M,s,L,re,i]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:oe(ms),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:J,rules:{required:!0},render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:ke,onChange:I=>O(I?I.value:null),value:ke.find(I=>I.value===(t==null?void 0:t.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:se||Z})}),e.jsxs("label",{className:t!=null&&t.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),n.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFirstName&&e.jsx("span",{className:"error-form",children:n.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...v("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personLastName&&e.jsx("span",{className:"error-form",children:n.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...v("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personNationalCode&&e.jsx("span",{className:"error-form",children:n.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(t==null?void 0:t.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...v("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCertificateNo&&e.jsx("span",{className:"error-form",children:n.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(t==null?void 0:t.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...v("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFatherName&&e.jsx("span",{className:"error-form",children:n.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...v("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:_,onChange:ts,format:"jYYYY/jMM/jDD",onOpenChange:ss,suffixIcon:e.jsx(de,{color:"action"}),open:P,style:ge,wrapperStyle:me,pickerProps:{ref:C}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:y,onChange:w,format:"jYYYY/jMM/jDD",onOpenChange:ps,suffixIcon:e.jsx(de,{color:"action"}),open:te,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personBirthPlace&&e.jsx("span",{className:"error-form",children:n.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...v("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:J,rules:{required:!0},render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ve,onChange:I=>O(I?I.value:null),value:Ve.find(I=>I.value===(t==null?void 0:t.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ce||Me})}),e.jsxs("label",{className:t!=null&&t.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),n.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:Q,defaultValue:null,onChange:Ie,onOpenChange:Ge,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:ae,style:ge,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Qe,onChange:I=>O(I?I.value:null),value:Qe.find(I=>I.value===(t==null?void 0:t.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Be||ie})}),e.jsx("label",{className:t!=null&&t.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"educationTypeID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Je,onChange:I=>O(I?I.value:null),value:Je.find(I=>I.value===(t==null?void 0:t.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:_e||Fe})}),e.jsx("label",{className:t!=null&&t.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.educationTypeCaption&&e.jsx("span",{className:"error-form",children:n.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...v("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"universityID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Xe,onChange:I=>O(I?I.value:null),value:Xe.find(I=>I.value===(t==null?void 0:t.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Re||je})}),e.jsx("label",{className:t!=null&&t.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.universityCaption&&e.jsx("span",{className:"error-form",children:n.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...v("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone&&e.jsx("span",{className:"error-form",children:n.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:(t==null?void 0:t.personCellPhone)||"",id:"personCellPhone1",required:!0,...v("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone2&&e.jsx("span",{className:"error-form",children:n.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:(t==null?void 0:t.personCellPhone2)||"",id:"personCellPhone22",required:!0,...v("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPhone&&e.jsx("span",{className:"error-form",children:n.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:(t==null?void 0:t.personPhone)||"",id:"personPhone1",required:!0,...v("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personRegion&&e.jsx("span",{className:"error-form",children:n.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:(t==null?void 0:t.personRegion)||"",id:"personRegion1",required:!0,...v("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personArea&&e.jsx("span",{className:"error-form",children:n.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:(t==null?void 0:t.personArea)||"",id:"personArea1",required:!0,...v("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ze,onChange:I=>O(I?I.value:null),value:Ze.find(I=>I.value===(t==null?void 0:t.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Te||Ae})}),e.jsx("label",{className:t!=null&&t.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:es,onChange:I=>O(I?I.value:null),value:es.find(I=>I.value===(t==null?void 0:t.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ee||He})}),e.jsx("label",{className:t!=null&&t.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:J,render:({field:{onChange:O}})=>e.jsx(H,{closeMenuOnSelect:!0,components:le,options:Ye,onChange:I=>O(I?I.value:null),value:Ye.find(I=>I.value===(t==null?void 0:t.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:k||he})}),e.jsx("label",{className:t!=null&&t.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPostalCode&&e.jsx("span",{className:"error-form",children:n.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:(t==null?void 0:t.personPostalCode)??"",id:"personPostalCode1",required:!0,...v("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personSpecialDisease&&e.jsx("span",{className:"error-form",children:n.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(t==null?void 0:t.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...v("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.personAddress&&e.jsx("span",{className:"error-form",children:n.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(t==null?void 0:t.personAddress)||"",id:"personAddress1",required:!0,...v("personAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[n.personDescription&&e.jsx("span",{className:"error-form",children:n.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",required:!0,name:"personDescription",value:(t==null?void 0:t.personDescription)||"",id:"personDescription1",...v("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[n.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:n.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(t==null?void 0:t.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...v("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:f,format:"jYYYY/jMM/jDD",onOpenChange:us,suffixIcon:e.jsx(de,{color:"action"}),open:d,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:K,onChange:ye,format:"jYYYY/jMM/jDD",onOpenChange:ds,suffixIcon:e.jsx(de,{color:"action"}),open:E,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[n.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:n.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(t==null?void 0:t.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...v("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[n.backupFirstName&&e.jsx("span",{className:"error-form",children:n.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(t==null?void 0:t.backupFirstName)||"",id:"backupFirstName1",required:!0,...v("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupLastName&&e.jsx("span",{className:"error-form",children:n.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(t==null?void 0:t.backupLastName)||"",id:"backupLastName1",required:!0,...v("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupRelation&&e.jsx("span",{className:"error-form",children:n.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(t==null?void 0:t.backupRelation)||"",id:"backupRelation",required:!0,...v("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupPhone&&e.jsx("span",{className:"error-form",children:n.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:(t==null?void 0:t.backupPhone)||"",id:"backupPhone",required:!0,...v("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupCellphone&&e.jsx("span",{className:"error-form",children:n.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:(t==null?void 0:t.backupCellphone)||"",id:"backupCellphone",required:!0,...v("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.backupAddress&&e.jsx("span",{className:"error-form",children:n.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(t==null?void 0:t.backupAddress)||"",id:"backupAddress",required:!0,...v("backupAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:oe,loading:m,type:"submit",variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function Ja({setShowEditRelatedModal:o,personID:j,refetch:C}){const F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),B=l.useRef(null),_=l.useRef(null),[T,y]=l.useState(null),[z,g]=l.useState(null),[W,K]=l.useState(null),[V,Q]=l.useState(null),[U,ae]=l.useState(null),[i,P]=l.useState(!1),[M,te]=l.useState(!1),[s,d]=l.useState(!1),[L,E]=l.useState(!1),[re,oe]=l.useState(!1),[n,J]=l.useState([]),{handleSubmit:v,formState:{errors:u},control:t,register:r,watch:m,setValue:A}=cs(),a=m(),[Ne,{isLoading:le}]=Wa(),ee=ys(),Z=new URLSearchParams(location.search).get("personID"),{data:pe,isSuccess:Ce,isLoading:Me,isFetching:$e,refetch:Be,error:ie}=Xs(j),{data:De,isSuccess:_e,isFetching:Fe,isLoading:Le,refetch:Re,error:je}=Ga(j);l.useEffect(()=>{if(Be(),Ce){const S=pe==null?void 0:pe.itemList.map((b,as)=>({id:b.pensionaryID,pensionaryStatusRowNum:as+1,isActive:b.pensionaryIsActive,pensionaryStatusName:b.pensionaryStatusName||"-",pensionaryStartdate:ve(b.pensionaryStartdate)||"-"}));J(S)}return()=>{J([])}},[Be,Ce,pe]),l.useEffect(()=>{Re(),_e&&Object.keys(De).forEach(S=>{A(S,De[S])})},[_e,De,Re,A]),l.useEffect(()=>{var S;je&&je.status!=="FETCH_ERROR"&&ne.error(((S=je==null?void 0:je.data)==null?void 0:S.message)||je.error,{autoClose:2e3})},[je]),l.useEffect(()=>{var S;ie&&(console.log(ie),ne.error(((S=ie==null?void 0:ie.data)==null?void 0:S.message)||ie.error,{autoClose:2e3}))},[ie]);const{relationships:ze,relationshipIsLoading:Te,relationshipIsFetching:Ae}=Ks(),{pensionaryStatus:Ue,pensionaryStatusIsLoading:Ee,pensionaryStatusIsFetching:He}=Bs({pensionaryStatusCategory:"L"}),{lookUpItems:q,lookUpItemsIsLoading:k,lookUpItemsIsFetching:he}=X({lookUpType:"MaritialStatus"}),{lookUpItems:ke,lookUpItemsIsLoading:Ve,lookUpItemsIsFetching:Qe}=X({lookUpType:"EducationType"}),{lookUpItems:Je,lookUpItemsIsLoading:Xe,lookUpItemsIsFetching:Ze}=X({lookUpType:"UniversityType"}),{lookUpItems:es,lookUpItemsIsLoading:Ye,lookUpItemsIsFetching:ts}=X({lookUpType:"Country"}),{lookUpItems:w,lookUpItemsIsLoading:f,lookUpItemsIsFetching:ye}=X({lookUpType:"State"}),{lookUpItems:Ie,lookUpItemsIsLoading:ss,lookUpItemsIsFetching:ps}=X({lookUpType:"City"}),Ge=Y(ze,"relationshipID","relationshipName"),us=Y(Ue,"pensionaryStatusID","pensionaryStatusName"),ds=Y(q,"lookUpID","lookUpName"),ms=Y(ke,"lookUpID","lookUpName"),Cs=Y(Je,"lookUpID","lookUpName"),O=Y(es,"lookUpID","lookUpName"),I=Y(w,"lookUpID","lookUpName"),Oe=Y(Ie,"lookUpID","lookUpName"),qe=S=>{y(S),P(!1)},Ke=S=>{g(S),te(!1)},D=S=>{K(S),d(!1)},N=S=>{Q(S),E(!1)},we=S=>{ae(S),oe(!1)},ns=S=>{oe(S)},Vs=S=>{P(S)},gn=S=>{te(S)},jn=S=>{d(S)},Nn=S=>{E(S)};l.useEffect(()=>{y(ve(a==null?void 0:a.personBirthDate))},[a==null?void 0:a.personBirthDate]),l.useEffect(()=>{g(ve(a==null?void 0:a.personMaritalDate))},[a==null?void 0:a.personMaritalDate]),l.useEffect(()=>{K(ve(a==null?void 0:a.selfEmployeeStartDate))},[a==null?void 0:a.selfEmployeeStartDate]),l.useEffect(()=>{Q(ve(a==null?void 0:a.selfEmployeeEndDate))},[a==null?void 0:a.selfEmployeeEndDate]);const fn=()=>{Be()},yn=async()=>{var S;try{let b,as,hs,xs,gs;T?(b=new Date(T),b.setMinutes(b.getMinutes()-b.getTimezoneOffset())):b=null,U?(gs=new Date(U),gs.setMinutes(gs.getMinutes()-gs.getTimezoneOffset())):gs=null,z?(as=new Date(z),as.setMinutes(as.getMinutes()-as.getTimezoneOffset())):as=null,W?(hs=new Date(W),hs.setMinutes(hs.getMinutes()-hs.getTimezoneOffset())):hs=null,V?(xs=new Date(V),xs.setMinutes(xs.getMinutes()-xs.getTimezoneOffset())):xs=null;const sn=await Ne({...a,parentPersonID:Z,relationshipWithParentID:c(a.relationshipWithParentID),personCertificateNo:c(a.personCertificateNo),personNationalCode:c(a.personNationalCode),pensionaryStatusID:c(a.pensionaryStatusID),maritalStatusID:c(a.maritalStatusID),educationTypeID:c(a.educationTypeID),universityID:c(a.universityID),personPhone:c(a.personPhone),personCellPhone:c(a.personCellPhone),personCellPhone2:c(a.personCellPhone2),personRegion:parseInt(c(a.personRegion))||null,personArea:parseInt(c(a.personArea))||null,personCountryID:c(a.personCountryID),personCityID:c(a.personCityID),personStateID:c(a.personStateID),personPostalCode:c(a.personPostalCode),backupPhone:c(a.backupPhone),backupCellphone:c(a.backupCellphone),personBirthDate:b,personMaritalDate:as,selfEmployeeStartDate:hs,selfEmployeeEndDate:xs,pensionaryStartDate:gs}).unwrap();console.log(sn),o(!1),C(),ne.success(sn.message,{autoClose:2e3})}catch(b){console.log(b),ne.error(((S=b==null?void 0:b.data)==null?void 0:S.message)||b.error,{autoClose:2e3})}};return bs([F,R,p,B,_],[P,te,d,E,oe]),e.jsx(e.Fragment,{children:Le||Fe?e.jsx(Pe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Se,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:v(yn),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:t,rules:{required:!0},render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:Ge,onChange:b=>S(b?b.value:null),value:Ge.find(b=>b.value===(a==null?void 0:a.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Te||Ae})}),e.jsxs("label",{className:a!=null&&a.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),u.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFirstName&&e.jsx("span",{className:"error-form",children:u.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFirstName)||"",name:"personFirstName",id:"personFirstName2",required:!0,...r("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName2",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personLastName&&e.jsx("span",{className:"error-form",children:u.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...r("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personNationalCode&&e.jsx("span",{className:"error-form",children:u.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(a==null?void 0:a.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...r("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCertificateNo&&e.jsx("span",{className:"error-form",children:u.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(a==null?void 0:a.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...r("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personFatherName&&e.jsx("span",{className:"error-form",children:u.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...r("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:ve(T),onChange:qe,format:"jYYYY/jMM/jDD",onOpenChange:Vs,suffixIcon:e.jsx(de,{color:"action"}),open:i,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:z,onChange:Ke,format:"jYYYY/jMM/jDD",onOpenChange:gn,suffixIcon:e.jsx(de,{color:"action"}),open:M,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personBirthPlace&&e.jsx("span",{className:"error-form",children:u.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...r("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:t,rules:{required:!0},render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:us,onChange:b=>S(b?b.value:null),value:us.find(b=>b.value===(a==null?void 0:a.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ee||He})}),e.jsxs("label",{className:a!=null&&a.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),u.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:U,defaultValue:null,onChange:we,onOpenChange:ns,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:re,style:ge,wrapperStyle:me,pickerProps:{ref:_}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:ds,onChange:b=>S(b?b.value:null),value:ds.find(b=>b.value===(a==null?void 0:a.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:k||he})}),e.jsx("label",{className:a!=null&&a.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"educationTypeID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:ms,onChange:b=>S(b?b.value:null),value:ms.find(b=>b.value===(a==null?void 0:a.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ve||Qe})}),e.jsx("label",{className:a!=null&&a.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.educationTypeCaption&&e.jsx("span",{className:"error-form",children:u.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...r("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"universityID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:Cs,onChange:b=>S(b?b.value:null),value:Cs.find(b=>b.value===(a==null?void 0:a.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Xe||Ze})}),e.jsx("label",{className:a!=null&&a.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.universityCaption&&e.jsx("span",{className:"error-form",children:u.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(a==null?void 0:a.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...r("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCellPhone&&e.jsx("span",{className:"error-form",children:u.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:x(a==null?void 0:a.personCellPhone)??"",id:"personCellPhone1",required:!0,...r("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personCellPhone2&&e.jsx("span",{className:"error-form",children:u.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:x(a==null?void 0:a.personCellPhone2)??"",id:"personCellPhone22",required:!0,...r("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPhone&&e.jsx("span",{className:"error-form",children:u.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:x(a==null?void 0:a.personPhone)||"",id:"personPhone1",required:!0,...r("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personRegion&&e.jsx("span",{className:"error-form",children:u.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:x(a==null?void 0:a.personRegion)??"",id:"personRegion1",required:!0,...r("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personArea&&e.jsx("span",{className:"error-form",children:u.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:x(a==null?void 0:a.personArea)??"",id:"personArea1",required:!0,...r("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:O,onChange:b=>S(b?b.value:null),value:O.find(b=>b.value===(a==null?void 0:a.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ye||ts})}),e.jsx("label",{className:a!=null&&a.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:I,onChange:b=>S(b?b.value:null),value:I.find(b=>b.value===(a==null?void 0:a.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:f||ye})}),e.jsx("label",{className:a!=null&&a.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:t,render:({field:{onChange:S}})=>e.jsx(H,{closeMenuOnSelect:!0,components:ee,options:Oe,onChange:b=>S(b?b.value:null),value:Oe.find(b=>b.value===(a==null?void 0:a.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:ss||ps})}),e.jsx("label",{className:a!=null&&a.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personPostalCode&&e.jsx("span",{className:"error-form",children:u.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:x(a==null?void 0:a.personPostalCode)??"",id:"personPostalCode1",required:!0,...r("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.personSpecialDisease&&e.jsx("span",{className:"error-form",children:u.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(a==null?void 0:a.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...r("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[u.personAddress&&e.jsx("span",{className:"error-form",children:u.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(a==null?void 0:a.personAddress)||"",id:"personAddress1",required:!0,...r("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[u.personDescription&&e.jsx("span",{className:"error-form",children:u.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"personDescription",value:(a==null?void 0:a.personDescription)||"",id:"personDescription1",required:!0,...r("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(en,{statusHistoryTableData:n,isLoading:Me,isFetching:$e,handleRefresh:fn}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[u.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:u.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(a==null?void 0:a.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...r("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:W,onChange:D,format:"jYYYY/jMM/jDD",onOpenChange:jn,suffixIcon:e.jsx(de,{color:"action"}),open:s,style:ge,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:V,onChange:N,format:"jYYYY/jMM/jDD",onOpenChange:Nn,suffixIcon:e.jsx(de,{color:"action"}),open:L,style:ge,wrapperStyle:me,pickerProps:{ref:B}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[u.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:u.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(a==null?void 0:a.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...r("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[u.backupFirstName&&e.jsx("span",{className:"error-form",children:u.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(a==null?void 0:a.backupFirstName)||"",id:"backupFirstName1",required:!0,...r("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupLastName&&e.jsx("span",{className:"error-form",children:u.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(a==null?void 0:a.backupLastName)||"",id:"backupLastName1",required:!0,...r("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupRelation&&e.jsx("span",{className:"error-form",children:u.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(a==null?void 0:a.backupRelation)||"",id:"backupRelation",required:!0,...r("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupPhone&&e.jsx("span",{className:"error-form",children:u.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:x(a==null?void 0:a.backupPhone)??"",id:"backupPhone",required:!0,...r("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[u.backupCellphone&&e.jsx("span",{className:"error-form",children:u.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:x(a==null?void 0:a.backupCellphone)??"",id:"backupCellphone",required:!0,...r("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[u.backupAddress&&e.jsx("span",{className:"error-form",children:u.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(a==null?void 0:a.backupAddress)||"",id:"backupAddress",required:!0,...r("backupAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),variant:"contained",onClick:v,type:"submit",loading:le,color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function Xa(){const[o,j]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(!1),[B,_]=l.useState(!1),[T,y]=l.useState(!1),[z,g]=l.useState(""),[W,K]=l.useState(""),[V,{isLoading:Q}]=Va(),U=is(),i=new URLSearchParams(U.search).get("personID"),{data:P,isSuccess:M,isLoading:te,isFetching:s,refetch:d,error:L}=Ya(i);l.useEffect(()=>{if(d(),M){const r=P.itemList.map((m,A)=>({id:m.personID,relatedRowNum:A+1,pensionaryID:m.pensionaryID,relatedBirthDate:m.personBirthDate,relatedNtionalCode:m.personNationalCode,relatedFirstName:m.personFirstName,relatedLastName:m.personLastName,relatedStatus:m.pensionaryIsUnderGauranteeText,relation:m.relationshipWithParentName}));F(r)}},[M,P,d]),l.useEffect(()=>{var r;L&&(console.log(L),ne.error(((r=L==null?void 0:L.data)==null?void 0:r.message)||L.error,{autoClose:2e3}))},[L]);const E=()=>{d()},re=()=>{p(!0)},oe=()=>{_(!0)},n=()=>{y(!0)},J=async()=>{var r;try{const m=await V({pensionaryID:W}).unwrap();d(),y(!1),ne.success(m.message,{autoClose:2e3})}catch(m){console.log(m),ne.error(((r=m==null?void 0:m.data)==null?void 0:r.message)||m.error,{autoClose:2e3})}},v=l.useMemo(()=>[{accessorKey:"relatedRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"relatedNtionalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"relatedFirstName",header:"نام",size:20},{accessorKey:"relatedLastName",header:"نام خانوادگی",size:20},{accessorKey:"relatedStatus",header:"وضعیت",size:20},{accessorKey:"relatedBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(fs(r))})},{accessorKey:"relation",header:"نسبت",size:20},{accessorKey:"editRelatedAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`ویرایش "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(ce,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(_s,{})})})},{accessorKey:"deleteRelatedAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`حذف "${r.original.relatedFirstName} ${r.original.relatedLastName}"`,children:e.jsx(ce,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(mn,{})})})}],[]),u=ks({...Ts,columns:v,data:C,muiTableBodyRowProps:({row:r})=>({onClick:()=>j(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Pe,{children:[s?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"info",onClick:E,children:e.jsx(As,{fontSize:"small"})})})}),s?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد وابسته"}),children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"success",onClick:re,children:e.jsx(hn,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(Os,{...r,page:x(r.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:r=>r.id,onRowSelectionChange:j,state:{rowSelection:o}});return l.useEffect(()=>{const r=Object.keys(u.getState().rowSelection)[0];if(r){const m=pn(C,r);g(r),K(m==null?void 0:m.pensionaryID)}},[u,o,C]),e.jsx(e.Fragment,{children:te||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Ws,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R?e.jsx(os,{title:"ایجاد وابسته",closeModal:()=>p(!1),children:e.jsx(Qa,{setShowCreateRelatedModal:p,refetch:d})}):B&&z?e.jsx(os,{title:"ویرایش اطلاعات وابسته",closeModal:()=>_(!1),children:e.jsx(Ja,{setShowEditRelatedModal:_,personID:z,refetch:d})}):T?e.jsxs(os,{title:"حذف وابسته",closeModal:()=>y(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این وابسته اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(We,{dir:"ltr",endIcon:e.jsx(un,{}),onClick:J,loading:Q,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(Ss,{dir:"ltr",endIcon:e.jsx(dn,{}),onClick:()=>y(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):null,e.jsx(Rs,{table:u})]})})}const Za=cn.injectEndpoints({endpoints:o=>({getHeirListByParentPersonID:o.query({query:j=>({url:`${js}/GetHeirListByParentPersonID?parentPersonID=${j}`})}),getHeir:o.query({query:j=>({url:`${js}/GetHeir?personID=${j}`})}),insertHeir:o.mutation({query:j=>({url:`${js}/InsertHeir`,method:"POST",body:j})}),updateHeir:o.mutation({query:j=>({url:`${js}/UpdateHeir`,method:"POST",body:j})}),updateHeirAccount:o.mutation({query:({token:j,data:C})=>({url:`${js}/UpdateHeirAccount`,method:"POST",body:C,headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`}})}),removeHeir:o.mutation({query:({pensionaryID:j})=>({url:`${js}/RemoveHeir?pensionaryID=${j}`,method:"POST"})})})}),{useGetHeirListByParentPersonIDQuery:et,useLazyGetHeirListByParentPersonIDQuery:Jt,useGetHeirQuery:st,useRemoveHeirMutation:nt,useUpdateHeirMutation:at,useInsertHeirMutation:tt}=Za;function lt({setShowEditHeirModal:o,personID:j,refetch:C}){const F=l.useRef(null),R=l.useRef(null),p=l.useRef(null),[B,_]=l.useState([]),[T,y]=l.useState([]),[z,g]=l.useState(null),[W,K]=l.useState(!1);l.useState(null);const[V,Q]=l.useState(null),[U,ae]=l.useState(null),[i,P]=l.useState(!1),[M,te]=l.useState(!1),{handleSubmit:s,formState:{errors:d},control:L,register:E,watch:re,setValue:oe}=cs(),n=re(),[J,{isLoading:v}]=at(),u=ys(),r=new URLSearchParams(location.search).get("personID"),[m,{isLoading:A,isFetching:a}]=Js(),{data:Ne,isSuccess:le,isLoading:ee,isFetching:se,refetch:Z,error:pe}=Xs(j),{data:Ce,isSuccess:Me,isLoading:$e,isFetching:Be,error:ie,refetch:De}=st(j);l.useEffect(()=>{if(Z(),le){const D=Ne==null?void 0:Ne.itemList.map((N,we)=>({id:N.pensionaryID,isActive:N.pensionaryIsActive,pensionaryStatusRowNum:we+1,pensionaryStatusName:N.pensionaryStatusName||"-",pensionaryStartdate:ve(N.pensionaryStartdate)||"-"}));y(D)}return()=>{y([])}},[Z,le,Ne]),l.useEffect(()=>{De(),Me&&Object.keys(Ce).forEach(D=>{oe(D,Ce[D])})},[Me,Ce,De,oe]),l.useEffect(()=>{var D;ie&&ie.status!=="FETCH_ERROR"&&ne.error(((D=ie==null?void 0:ie.data)==null?void 0:D.message)||ie.error,{autoClose:2e3})},[ie]),l.useEffect(()=>{var D;pe&&(console.log(pe),ne.error(((D=pe==null?void 0:pe.data)==null?void 0:D.message)||pe.error,{autoClose:2e3}))},[pe]);const{relationships:_e,relationshipIsLoading:Fe,relationshipIsFetching:Le}=Ks(),{lookUpItems:Re,lookUpItemsIsLoading:je,lookUpItemsIsFetching:ze}=X({lookUpType:"MaritialStatus"}),{lookUpItems:Te,lookUpItemsIsLoading:Ae,lookUpItemsIsFetching:Ue}=X({lookUpType:"Country"}),{lookUpItems:Ee,lookUpItemsIsLoading:He,lookUpItemsIsFetching:q}=X({lookUpType:"State"}),{lookUpItems:k,lookUpItemsIsLoading:he,lookUpItemsIsFetching:ke}=X({lookUpType:"City"}),{pensionaryStatus:Ve,pensionaryStatusIsLoading:Qe,pensionaryStatusIsFetching:Je}=Bs({pensionaryStatusCategory:"H"}),{lookUpItems:Xe,lookUpItemsIsLoading:Ze,lookUpItemsIsFetching:es}=X({lookUpType:"Bank"}),Ye=Y(_e,"relationshipID","relationshipName"),ts=Y(Re,"lookUpID","lookUpName"),w=Y(Te,"lookUpID","lookUpName"),f=Y(Ee,"lookUpID","lookUpName"),ye=Y(k,"lookUpID","lookUpName"),Ie=Y(Ve,"pensionaryStatusID","pensionaryStatusName"),ss=Y(Xe,"lookUpID","lookUpName"),ps=Y(B,"lookUpID","lookUpName"),Ge=l.useCallback(async D=>{try{const N=await m({lookUpType:"BankBranch",lookUpParentID:D}).unwrap();_(N.itemList)}catch(N){console.log(N)}},[m,_]);l.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]),l.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]);const us=D=>{g(D),K(!1)},ds=D=>{ae(D),P(!1)},ms=D=>{Q(D),te(!1)},Cs=D=>{te(D)},O=D=>{K(D)},I=D=>{P(D)};l.useEffect(()=>{g(ve(n==null?void 0:n.personBirthDate))},[n==null?void 0:n.personBirthDate]),l.useEffect(()=>{ae(ve(n==null?void 0:n.personBaseFinishDate))},[n==null?void 0:n.personBaseFinishDate]);const Oe=()=>{Z()},qe=async()=>{var D;try{let N,we,ns;z?(N=new Date(z),N.setMinutes(N.getMinutes()-N.getTimezoneOffset())):N=null,V?(we=new Date(V),we.setMinutes(we.getMinutes()-we.getTimezoneOffset())):we=null,U?(ns=new Date(U),ns.setMinutes(ns.getMinutes()-ns.getTimezoneOffset())):ns=null;const Vs=await J({...n,relationshipWithParentID:c(n==null?void 0:n.relationshipWithParentID),personNationalCode:c(n==null?void 0:n.personNationalCode),personCertificateNo:c(n==null?void 0:n.personCertificateNo),personBirthDate:N,maritalStatusID:c(n==null?void 0:n.maritalStatusID),personPhone:c(n==null?void 0:n.personPhone),personCellPhone:c(n==null?void 0:n.personCellPhone),personRegion:parseInt(c(n==null?void 0:n.personRegion))||null,personArea:parseInt(c(n==null?void 0:n.personArea))||null,personCountryID:c(n==null?void 0:n.personCountryID),personStateID:c(n==null?void 0:n.personStateID),personCityID:c(n==null?void 0:n.personCityID),personPostalCode:c(n==null?void 0:n.personPostalCode),pensionaryStatusID:c(n==null?void 0:n.pensionaryStatusID),personBaseFinishDate:ns,bankID:c(n==null?void 0:n.bankID),bankBranchID:c(n==null?void 0:n.bankBranchID),accountNo:c(n==null?void 0:n.accountNo),insuranceCoef:parseFloat(c(n==null?void 0:n.insuranceCoef))||0,insuranceAmount:parseFloat(c(n==null?void 0:n.insuranceAmount))||0,ledgerCode:parseInt(c(n.ledgerCode))||0,parentPersonID:r,pensionaryStartDate:we}).unwrap();o(!1),C(),ne.success(Vs.message,{autoClose:2e3})}catch(N){console.log(N),ne.error(((D=N==null?void 0:N.data)==null?void 0:D.message)||N.error,{auroClose:2e3})}};return bs([F,R,p],[K,P,te]),e.jsx(e.Fragment,{children:$e||Be?e.jsx(Pe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Se,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:s(qe),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:L,rules:{required:!0},render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:Ye,onChange:N=>D(N?N.value:null),value:Ye.find(N=>N.value===(n==null?void 0:n.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Fe||Le})}),e.jsxs("label",{className:n!=null&&n.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),d.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFirstName&&e.jsx("span",{className:"error-form",children:d.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...E("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personLastName&&e.jsx("span",{className:"error-form",children:d.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personLastName",value:(n==null?void 0:n.personLastName)||"",id:"personLastName1",required:!0,...E("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personNationalCode&&e.jsx("span",{className:"error-form",children:d.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...E("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCertificateNo&&e.jsx("span",{className:"error-form",children:d.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...E("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificatetNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFatherName&&e.jsx("span",{className:"error-form",children:d.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...E("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:z,onChange:us,format:"jYYYY/jMM/jDD",onOpenChange:O,suffixIcon:e.jsx(de,{color:"action"}),open:W,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personBirthPlace&&e.jsx("span",{className:"error-form",children:d.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personBirthPlace",value:(n==null?void 0:n.personBirthPlace)||"",id:"personBirthPlace1",required:!0,...E("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:ts,onChange:N=>D(N?N.value:null),value:ts.find(N=>N.value===(n==null?void 0:n.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:je||ze})}),e.jsx("label",{className:n!=null&&n.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPhone&&e.jsx("span",{className:"error-form",children:d.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...E("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCellPhone&&e.jsx("span",{className:"error-form",children:d.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personCellPhone)||"",name:"personCellPhone",id:"personCellPhone222",required:!0,...E("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personArea&&e.jsx("span",{className:"error-form",children:d.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personArea)||"",name:"personArea",id:"personArea1",required:!0,...E("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personRegion&&e.jsx("span",{className:"error-form",children:d.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:x(n==null?void 0:n.personRegion)||"",id:"personRegion1",required:!0,...E("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:w,onChange:N=>D(N?N.value:null),value:w.find(N=>N.value===(n==null?void 0:n.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ae||Ue})}),e.jsx("label",{className:n!=null&&n.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:f,onChange:N=>D(N?N.value:null),value:f.find(N=>N.value===(n==null?void 0:n.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:He||q})}),e.jsx("label",{className:n!=null&&n.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:ye,onChange:N=>D(N?N.value:null),value:ye.find(N=>N.value===(n==null?void 0:n.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:he||ke})}),e.jsx("label",{className:n!=null&&n.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPostalCode&&e.jsx("span",{className:"error-form",children:d.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personPostalCode)||"",name:"personPostalCode",id:"personPostalCode1",required:!0,...E("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personSpecialDisease&&e.jsx("span",{className:"error-form",children:d.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personSpecialDisease)||"",name:"personSpecialDisease",id:"personSpecialDisease1",required:!0,...E("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[d.personAddress&&e.jsx("span",{className:"error-form",children:d.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...E("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[d.personDescription&&e.jsx("span",{className:"error-form",children:d.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...E("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:L,rules:{required:!0},render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:Ie,onChange:N=>D(N?N.value:null),value:Ie.find(N=>N.value===(n==null?void 0:n.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Qe||Je})}),e.jsxs("label",{className:n!=null&&n.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),d.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:V,defaultValue:null,onChange:ms,onOpenChange:Cs,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:M,style:ge,wrapperStyle:me,pickerProps:{ref:p}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:U,onChange:ds,format:"jYYYY/jMM/jDD",onOpenChange:I,suffixIcon:e.jsx(de,{color:"action"}),open:i,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:x(n==null?void 0:n.heirID)||"-",name:"heirID",id:"heirID",...E("heirID")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"heirID",children:"شماره وظیفه بگیری"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:x(fs(n==null?void 0:n.pensionaryStartDate))||"-",name:"pensionaryStartDate",id:"pensionaryStartDate",...E("pensionaryStartDate")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"pensionaryStartDate",children:"تاریخ وظیفه بگیری"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(en,{statusHistoryTableData:T,isLoading:ee,isFetching:se,handleRefresh:Oe}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:ss,onChange:N=>D(N?N.value:null),value:ss.find(N=>N.value===(n==null?void 0:n.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Ze||es})}),e.jsx("label",{htmlFor:"bankID",className:n!=null&&n.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:L,render:({field:{onChange:D}})=>e.jsx(H,{closeMenuOnSelect:!0,components:u,options:ps,onChange:N=>D(N?N.value:null),isDisabled:A||a||!n.bankID,value:ps.find(N=>N.value===(n==null?void 0:n.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:A||a})}),e.jsx("label",{htmlFor:"bankBranchID",className:n!=null&&n.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.accountNo&&e.jsx("span",{className:"error-form",children:d.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...E("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.ledgerCode&&e.jsx("span",{className:"error-form",children:d.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...E("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.insuranceCoef&&e.jsx("span",{className:"error-form",children:d.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.insuranceCoef)||"",name:"insuranceCoef",id:"insuranceCoefHeir",required:!0,...E("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.insuranceAmount&&e.jsx("span",{className:"error-form",children:d.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(n==null?void 0:n.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...E("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:s,type:"submit",loading:v,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})})}function rt({setShowCreateHeirModal:o,refetch:j}){const C=l.useRef(null),F=l.useRef(null),R=l.useRef(null),[p,B]=l.useState(null),[_,T]=l.useState(!1),[y,z]=l.useState(null),[g,W]=l.useState(null),[K,V]=l.useState(!1),[Q,U]=l.useState(!1),{handleSubmit:ae,formState:{errors:i},control:P,register:M,watch:te}=cs(),s=te(),[d,{isLoading:L}]=tt(),[E,re]=l.useState([]),oe=is(),J=new URLSearchParams(oe.search).get("personID"),v=ys(),[u,{isLoading:t,isFetching:r}]=Js(),{relationships:m,relationshipIsLoading:A,relationshipIsFetching:a}=Ks(),{lookUpItems:Ne,lookUpItemsIsLoading:le,lookUpItemsIsFetching:ee}=X({lookUpType:"MaritialStatus"}),{lookUpItems:se,lookUpItemsIsLoading:Z,lookUpItemsIsFetching:pe}=X({lookUpType:"Country"}),{lookUpItems:Ce,lookUpItemsIsLoading:Me,lookUpItemsIsFetching:$e}=X({lookUpType:"State"}),{lookUpItems:Be,lookUpItemsIsLoading:ie,lookUpItemsIsFetching:De}=X({lookUpType:"City"}),{pensionaryStatus:_e,pensionaryStatusIsLoading:Fe,pensionaryStatusIsFetching:Le}=Bs({pensionaryStatusCategory:"H"}),{lookUpItems:Re,lookUpItemsIsLoading:je,lookUpItemsIsFetching:ze}=X({lookUpType:"Bank"}),Te=Y(m,"relationshipID","relationshipName"),Ae=Y(Ne,"lookUpID","lookUpName"),Ue=Y(se,"lookUpID","lookUpName"),Ee=Y(_e,"pensionaryStatusID","pensionaryStatusName"),He=Y(Ce,"lookUpID","lookUpName"),q=Y(Be,"lookUpID","lookUpName"),k=Y(Re,"lookUpID","lookUpName"),he=Y(E,"lookUpID","lookUpName"),ke=l.useCallback(async w=>{try{const f=await u({lookUpType:"BankBranch",lookUpParentID:c(w)}).unwrap();re(f.itemList)}catch(f){console.log(f)}},[u,re]);l.useEffect(()=>{s.bankID&&ke(s.bankID)},[s.bankID,ke]);const Ve=w=>{B(w),T(!1)},Qe=w=>{W(w),V(!1)},Je=w=>{z(w),U(!1)},Xe=w=>{U(w)},Ze=w=>{T(w)},es=w=>{V(w)},Ye=async()=>{var w;try{let f,ye,Ie;p?(f=new Date(p),f.setMinutes(f.getMinutes()-f.getTimezoneOffset())):f=null,y?(Ie=new Date(y),Ie.setMinutes(Ie.getMinutes()-Ie.getTimezoneOffset())):Ie=null,g?(ye=new Date(g),ye.setMinutes(ye.getMinutes()-ye.getTimezoneOffset())):ye=null;const ss=await d({...s,relationshipWithParentID:c(s==null?void 0:s.relationshipWithParentID),personNationalCode:c(s==null?void 0:s.personNationalCode),personCertificateNo:c(s==null?void 0:s.personCertificateNo),personBirthDate:f,maritalStatusID:c(s==null?void 0:s.maritalStatusID),personPhone:c(s==null?void 0:s.personPhone),personCellPhone:c(s==null?void 0:s.personCellPhone),personRegion:parseInt(c(s==null?void 0:s.personRegion))||null,personArea:parseInt(c(s==null?void 0:s.personArea))||null,personCountryID:c(s==null?void 0:s.personCountryID),personStateID:c(s==null?void 0:s.personStateID),personCityID:c(s==null?void 0:s.personCityID),personPostalCode:c(s==null?void 0:s.personPostalCode),pensionaryStatusID:c(s==null?void 0:s.pensionaryStatusID),personBaseFinishDate:ye,bankID:c(s==null?void 0:s.bankID),bankBranchID:c(s==null?void 0:s.bankBranchID),accountNo:c(s==null?void 0:s.accountNo),insuranceCoef:parseFloat(c(s==null?void 0:s.insuranceCoef))||0,insuranceAmount:parseFloat(c(s==null?void 0:s.insuranceAmount))||0,ledgerCode:parseInt(c(s.ledgerCode))||0,parentPersonID:J,pensionaryStartDate:Ie}).unwrap();o(!1),j(),ne.success(ss.message,{autoClose:2e3})}catch(f){console.log(f),ne.error(((w=f==null?void 0:f.data)==null?void 0:w.message)||f.error,{autoClose:2e3})}};return bs([C,F],[T,V]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:ae(Ye),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"relationshipWithParentID",control:P,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Te,onChange:f=>w(f?f.value:null),value:Te.find(f=>f.value===(s==null?void 0:s.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:A||a})}),e.jsxs("label",{className:s!=null&&s.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),i.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFirstName&&e.jsx("span",{className:"error-form",children:i.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personFirstName",value:(s==null?void 0:s.personFirstName)||"",id:"personFirstName1",required:!0,...M("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personLastName&&e.jsx("span",{className:"error-form",children:i.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...M("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personNationalCode&&e.jsx("span",{className:"error-form",children:i.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personNationalCode",value:x(s==null?void 0:s.personNationalCode)||"",id:"personNationalCode2",required:!0,...M("personNationalCode",{required:"کد ملی را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCertificateNo&&e.jsx("span",{className:"error-form",children:i.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...M("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personFatherName&&e.jsx("span",{className:"error-form",children:i.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...M("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:p,onChange:Ve,format:"jYYYY/jMM/jDD",onOpenChange:Ze,suffixIcon:e.jsx(de,{color:"action"}),open:_,style:ge,wrapperStyle:me,pickerProps:{ref:C}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personBirthPlace&&e.jsx("span",{className:"error-form",children:i.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...M("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"maritalStatusID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Ae,onChange:f=>w(f?f.value:null),value:Ae.find(f=>f.value===(s==null?void 0:s.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:le||ee})}),e.jsx("label",{className:s!=null&&s.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPhone&&e.jsx("span",{className:"error-form",children:i.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...M("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personCellPhone&&e.jsx("span",{className:"error-form",children:i.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:x(s==null?void 0:s.personCellPhone)||"",id:"personCellPhone222",required:!0,...M("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personArea&&e.jsx("span",{className:"error-form",children:i.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personArea),name:"personArea",id:"personArea1",required:!0,...M("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personRegion&&e.jsx("span",{className:"error-form",children:i.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personRegion),name:"personRegion",id:"personRegion1",required:!0,...M("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCountryID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Ue,onChange:f=>w(f?f.value:null),value:Ue.find(f=>f.value===(s==null?void 0:s.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Z||pe})}),e.jsx("label",{className:s!=null&&s.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personStateID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:He,onChange:f=>w(f?f.value:null),value:He.find(f=>f.value===(s==null?void 0:s.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Me||$e})}),e.jsx("label",{className:s!=null&&s.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"personCityID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:q,onChange:f=>w(f?f.value:null),value:q.find(f=>f.value===(s==null?void 0:s.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:ie||De})}),e.jsx("label",{className:s!=null&&s.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personPostalCode&&e.jsx("span",{className:"error-form",children:i.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:x(s==null?void 0:s.personPostalCode)||"",id:"personPostalCode1",required:!0,...M("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.personSpecialDisease&&e.jsx("span",{className:"error-form",children:i.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(s==null?void 0:s.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...M("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[i.personAddress&&e.jsx("span",{className:"error-form",children:i.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...M("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[i.personDescription&&e.jsx("span",{className:"error-form",children:i.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...M("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"pensionaryStatusID",control:P,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:Ee,onChange:f=>w(f?f.value:null),value:Ee.find(f=>f.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:Fe||Le})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),i.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:y,defaultValue:null,onChange:Je,onOpenChange:Xe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:Q,style:ge,wrapperStyle:me,pickerProps:{ref:R}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:Qe,format:"jYYYY/jMM/jDD",onOpenChange:es,suffixIcon:e.jsx(de,{color:"action"}),open:K,style:ge,wrapperStyle:me,pickerProps:{ref:F}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ مبنای قطع سهم"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:k,onChange:f=>w(f?f.value:null),value:k.find(f=>f.value===(s==null?void 0:s.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:je||ze})}),e.jsx("label",{htmlFor:"bankID",className:s!=null&&s.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:"bankBranchID",control:P,render:({field:{onChange:w}})=>e.jsx(H,{closeMenuOnSelect:!0,components:v,options:he,onChange:f=>w(f?f.value:null),isDisabled:t||r||!s.bankID,value:he.find(f=>f.value===(s==null?void 0:s.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:h.noOptionsMessage,loadingMessage:h.loadingMessage,styles:G,isLoading:t||r})}),e.jsx("label",{htmlFor:"bankBranchID",className:s!=null&&s.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.accountNo&&e.jsx("span",{className:"error-form",children:i.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...M("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.ledgerCode&&e.jsx("span",{className:"error-form",children:i.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:x(s==null?void 0:s.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...M("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.insuranceCoef&&e.jsx("span",{className:"error-form",children:i.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"insuranceCoef",value:x(s==null?void 0:s.insuranceCoef)||"",id:"insuranceCoefHeir",required:!0,...M("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[i.insuranceAmount&&e.jsx("span",{className:"error-form",children:i.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...M("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(We,{dir:"ltr",endIcon:e.jsx(Is,{}),onClick:ae,type:"submit",loading:L,variant:"contained",color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function ot(){const[o,j]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(!1),[B,_]=l.useState(!1),[T,y]=l.useState(!1),[z,g]=l.useState(""),[W,K]=l.useState(""),V=is(),U=new URLSearchParams(V.search).get("personID"),[ae,{isLoading:i}]=nt(),{data:P,isLoading:M,isSuccess:te,isFetching:s,error:d,refetch:L}=et(U);l.useEffect(()=>{if(L(),te){const r=P.itemList.map((m,A)=>({id:m.personID,heirRowNum:A+1,pensionaryID:m.pensionaryID,personNationalCode:m.personNationalCode,personFirstName:m.personFirstName,personLastName:m.personLastName,pensionaryIsUnderGauranteeText:m.pensionaryIsUnderGauranteeText,personBirthDate:m.personBirthDate,relationshipWithParentName:m.relationshipWithParentName,parentPersonNationalCode:m.parentPersonNationalCode}));F(r)}},[te,P,L]),l.useEffect(()=>{var r;d&&(console.log(d),ne.error(((r=d==null?void 0:d.data)==null?void 0:r.message)||d.error,{autoClose:2e3}))},[d]);const E=()=>{L()},re=()=>{_(!0)},oe=()=>{p(!0)},n=()=>{y(!0)},J=async()=>{var r;try{const m=await ae({pensionaryID:W}).unwrap();y(!1),L(),ne.success(m.message,{autoClose:2e3})}catch(m){console.log(m),ne.error(((r=m==null?void 0:m.data)==null?void 0:r.message)||m.error,{autoClose:2e3})}},v=l.useMemo(()=>[{accessorKey:"heirRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"personNationalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"personFirstName",header:"نام",size:20},{accessorKey:"personLastName",header:"نام خانوادگی",size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:"وضعیت",size:20},{accessorKey:"personBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(fs(r))})},{accessorKey:"relationshipWithParentName",size:20,header:"نسبت"},{accessorKey:"parentPersonNationalCode",header:"شماره پرونده",size:20,Cell:({renderedCellValue:r})=>e.jsx("div",{children:x(r)})},{accessorKey:"editHeirAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`ویرایش "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(ce,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(_s,{})})})},{accessorKey:"deleteHeirAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:r})=>e.jsx(fe,{title:`حذف "${r.original.personFirstName} ${r.original.personLastName}"`,children:e.jsx(ce,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(mn,{})})})}],[]),u=ks({...Ts,columns:v,data:C,muiTableBodyRowProps:({row:r})=>({onClick:()=>j(()=>({[r.id]:!0})),selected:o[r.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(Pe,{children:[s?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"info",onClick:E,children:e.jsx(As,{fontSize:"small"})})})}),s?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد موظف"}),children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"success",onClick:re,children:e.jsx(hn,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:r=>e.jsx(Os,{...r,page:x(r.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:r=>r.id,onRowSelectionChange:j,state:{rowSelection:o}});return l.useEffect(()=>{const r=Object.keys(u.getState().rowSelection)[0];if(r){const m=pn(C,r);g(r),K(m==null?void 0:m.pensionaryID)}},[u,o,C]),e.jsx(e.Fragment,{children:M||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Ws,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R&&z?e.jsx(os,{title:"ویرایش اطلاعات موظف",closeModal:()=>p(!1),children:e.jsx(lt,{setShowEditHeirModal:p,personID:z,refetch:L})}):T?e.jsxs(os,{title:"حذف موظف",closeModal:()=>y(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این موظف اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(We,{dir:"ltr",endIcon:e.jsx(un,{}),onClick:J,loading:i,variant:"contained",color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(Ss,{dir:"ltr",endIcon:e.jsx(dn,{}),onClick:()=>y(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):B?e.jsx(os,{title:"ایجاد موظف",closeModal:()=>_(!1),children:e.jsx(rt,{setShowCreateHeirModal:_,refetch:L})}):null,e.jsx(Rs,{table:u})]})})}function it(){const[o,j]=l.useState({}),[C,F]=l.useState([]),R=is(),p=new URLSearchParams(R.search),B=p.get("Role"),_=p.get("personID"),{data:T,isSuccess:y,isLoading:z,isFetching:g,error:W,refetch:K}=Fa({Role:B,personID:_});l.useEffect(()=>{if(K(),y){const i=T.itemList.map(P=>({id:P.requestID,type:P.requestTypeID,requestNO:P.requestNO||"-",personId:P.personID,requestTypeNameFa:P.requestTypeNameFa||"-",personName:P.personName||"-",date:P.requestDate||"-",body:P.requestText||"-"}));F(i),sessionStorage.setItem("requests",JSON.stringify(i))}},[T,y,K]),l.useEffect(()=>{var i;W&&ne.error(((i=W==null?void 0:W.data)==null?void 0:i.message)||W.error,{autoClose:2e3})},[W]);const V=()=>{K()},Q=l.useMemo(()=>[{accessorKey:"id",header:"شماره درخواست",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:x(i)})},{accessorKey:"requestTypeNameFa",header:"نوع درخواست",size:20},{accessorKey:"personName",header:"ارسال کننده",size:20},{accessorKey:"date",header:"تاریخ درخواست",size:20,Cell:({renderedCellValue:i})=>e.jsx("div",{children:x(fs(i))})},{accessorKey:"observeReq",header:"مشاهده درخواست",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:i})=>e.jsx(fe,{title:x(i.original.requestNO),children:e.jsx(Dn,{to:`/retirement/request?requestID=${i.id}&Role=${B}&type=${i.original.type}`,children:e.jsx(ce,{color:"primary",sx:{padding:"0"},children:e.jsx(xn,{})})})})}],[B]),U=ks({...Ts,columns:Q,data:C,muiTableBodyRowProps:({row:i})=>({onClick:()=>j(()=>({[i.id]:!0})),selected:o[i.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(Pe,{children:g?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"info",onClick:V,children:e.jsx(As,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:i=>e.jsx(Os,{...i,page:x(i.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},getRowId:i=>i.id,onRowSelectionChange:j,state:{rowSelection:o}});return e.jsx(e.Fragment,{children:z?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Ws,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Rs,{table:U})})}function ct(){const[o,j]=l.useState({}),[C,F]=l.useState([]),[R,p]=l.useState(null),[B,_]=l.useState(!1),T=is(),z=new URLSearchParams(T.search).get("personID"),{data:g,isLoading:W,isSuccess:K,isFetching:V,error:Q,refetch:U}=La({personID:z,payType:"M"}),ae=()=>{U()};l.useEffect(()=>{if(K){const s=g.itemList.map((d,L)=>({id:d.payID,payRowNum:L+1,payCreditAmount:d.payCreditAmount,payDebitAmount:d.payDebitAmount,payAmount:d.payAmount,payDate:d.payDate,currentYear:d.currentYear,currentMonth:d.currentMonth}));F(s)}},[K,U,g]),l.useEffect(()=>{var s;Q&&ne.error(((s=Q==null?void 0:Q.data)==null?void 0:s.message)||Q.error,{autoClose:2e3})},[Q]);const i=()=>{_(!0)},P=l.useMemo(()=>[{accessorKey:"payRowNum",header:"ردیف",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"payCreditAmount",header:"مبلغ بستانکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Qs(x(s))," ","ریال"]})},{accessorKey:"payDebitAmount",header:"مبلغ بدهکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Qs(x(s))," ","ریال"]})},{accessorKey:"payAmount",header:"مبلغ کل",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[Qs(x(s))," ","ریال"]})},{accessorKey:"payDate",header:"تاریخ پرداخت",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:fs(s)})},{accessorKey:"currentYear",header:"سال مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"currentMonth",header:"ماه مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:x(s)})},{accessorKey:"downloadRetiredSlip",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:()=>e.jsx(fe,{title:"دانلود و مشاهده فیش",children:e.jsx(ce,{color:"primary",sx:{padding:"0"},onClick:i,children:e.jsx(xn,{})})})}],[]),M=ks({...Ts,columns:P,data:C,renderTopToolbarCustomActions:()=>e.jsx(Pe,{children:V?e.jsx(ce,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Se,{size:20,value:100})}):e.jsx(fe,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ce,{"aria-label":"refresh",color:"info",onClick:ae,children:e.jsx(As,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:s=>e.jsx(Os,{...s,page:x(s.page),slots:{previous:Ps,next:Ms,first:Fs,last:Ls}})},muiTableBodyRowProps:({row:s})=>({onClick:()=>j(()=>({[s.id]:!0})),selected:o[s.id],sx:{cursor:"pointer"}}),getRowId:s=>s.id,onRowSelectionChange:j,state:{rowSelection:o}});return l.useEffect(()=>{const s=Object.keys(M.getState().rowSelection)[0];p(s||null)},[M,o]),e.jsxs(e.Fragment,{children:[B&&R&&e.jsx(os,{closeModal:()=>_(!1),children:e.jsx(Ra,{payID:R})},R),W?e.jsx("div",{className:"skeleton-lg",children:e.jsx(Ws,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Rs,{table:M})]})}const tn=({name:o,label:j,disabled:C,format:F="jYYYY/jMM/jDD",rules:R,control:p,required:B=!1,errors:_})=>{var W;const T=l.useRef(null),[y,z]=l.useState(!1),g=K=>{z(K)};return bs([T],[z]),e.jsxs("div",{className:"inputBox__form",children:[e.jsx($,{name:o,control:p,rules:R,render:({field:{onChange:K,value:V}})=>e.jsx(ue.InputDatePicker,{id:o,"aria-label":o,disabled:C,format:F,value:V,open:y,defaultValue:null,onOpenChange:g,onChange:Q=>{z(!1),K(Q)},pickerProps:{...T&&{ref:T}},style:{border:"none",cursor:"pointer"},wrapperStyle:{border:"1px solid var(--color-input-border)",width:"100%",height:"100%",paddingLeft:"20px",borderRadius:"4px",cursor:"pointer"}})}),e.jsxs("label",{htmlFor:o,className:"inputBox__form--readOnly-label",children:[B&&e.jsx("span",{children:"*"})," ",j]}),_&&e.jsx("span",{className:"error-form",children:(W=_==null?void 0:_[o])==null?void 0:W.message})]})},Ns=({label:o,size:j="small",color:C="primary",disabled:F,control:R,name:p,errors:B,rules:_})=>e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx($,{name:p,control:R,rules:_,render:({field:{onChange:T,value:y}})=>e.jsx(Ta,{id:p,checked:!!y,onChange:z=>T(z.target.checked),size:j,color:C,disabled:F,sx:{padding:.5}})}),e.jsx("label",{htmlFor:p,className:F?"checkboxContainer__label--disabled":"checkboxContainer__label",children:o})]}),pt=o=>{const[j,C]=l.useState(o),F=l.useCallback(()=>{C(R=>!R)},[]);return[j,F]},ln=o=>o?vn(o):null,ut=/^[آ-ی\s]+$/,Us=/^[۰-۹0-9]+$/,dt=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/,mt={required:Zs,minLength:{value:10,message:be},maxLength:{value:10,message:be},pattern:{value:Us,message:be}},ht={required:Zs,pattern:{value:Us,message:be}},Ys={pattern:{value:Us,message:be}},vs={pattern:{value:ut,message:be}},Gs={required:Zs},xt={pattern:{value:Us,message:be},minLength:{value:11,message:be},maxLength:{value:11,message:be}},gt={pattern:{value:dt,message:be}},jt={pattern:{value:Us,message:be},minLength:{value:10,message:be},maxLength:{value:10,message:be}},Nt=()=>{const[o,j]=pt(!1),[C]=on(),F=Sn(),R=C.get("personID"),{control:p,handleSubmit:B,formState:{errors:_},setValue:T}=cs(),{data:y,isLoading:z,isFetching:g,isSuccess:W,refetch:K}=Mn(R),[V,{isLoading:Q}]=Fn();l.useEffect(()=>{if(W){const ee=y==null?void 0:y.itemList[0];if(ee){const se={...ee};Object.keys(se).forEach(Z=>{Z==="personDeathDate"&&(se[Z]=se[Z]===null?null:ln(se[Z])),Z==="personBirthDate"&&(se[Z]=se[Z]===null?null:ln(se[Z])),T(Z,se[Z])}),F(nn((se==null?void 0:se.personDeathDate)!==null))}}return()=>{F(nn(null))}},[F,W,y==null?void 0:y.itemList,T]);const{lookUpItems:U,lookUpItemsIsLoading:ae}=X({lookUpType:"Gender"}),i=ls(U,"lookUpID","lookUpName"),{lookUpItems:P,lookUpItemsIsLoading:M}=X({lookUpType:"EducationType"}),te=ls(P,"lookUpID","lookUpName"),{lookUpItems:s,lookUpItemsIsLoading:d}=X({lookUpType:"Country"}),L=ls(s,"lookUpID","lookUpName"),{lookUpItems:E,lookUpItemsIsLoading:re}=X({lookUpType:"State"}),oe=ls(E,"lookUpID","lookUpName"),{lookUpItems:n,lookUpItemsIsLoading:J}=X({lookUpType:"City"}),v=ls(n,"lookUpID","lookUpName"),{lookUpItems:u,lookUpItemsIsLoading:t}=X({lookUpType:"HousingType"}),r=ls(u,"lookUpID","lookUpName"),{lookUpItems:m,lookUpItemsIsLoading:A}=X({lookUpType:"MaritialStatus"}),a=ls(m,"lookUpID","lookUpName"),Ne=async ee=>{let se,Z;ee.personDeathDate?(se=new Date(ee.personDeathDate),se.setMinutes(se.getMinutes()-se.getTimezoneOffset())):se=null,ee.personBirthDate?(Z=new Date(ee.personBirthDate),Z.setMinutes(Z.getMinutes()-Z.getTimezoneOffset())):Z=null;const pe=await V({...ee,personBirthDate:Z,personDeathDate:se}).unwrap();K(),j(),Bn.success(pe.message)};return e.jsx(e.Fragment,{children:z||g?e.jsx(Pe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Se,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:B(Ne),noValidate:!0,children:[e.jsxs("div",{className:"grid grid-cols-4",children:[e.jsx(xe,{name:"personFirstName",label:wn,rules:Gs,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personLastName",label:$n,rules:Gs,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personNationalCode",label:zn,rules:mt,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personCertificateNo",label:Hn,rules:ht,required:!0,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personFatherName",label:Yn,rules:vs,required:!0,control:p,editable:o,type:"text"}),e.jsx(rs,{name:"genderID",control:p,label:Gn,required:!0,isClearable:!0,isDisabled:!o,options:i,isLoading:ae,rules:Gs,errors:_}),e.jsx(tn,{name:"personBirthDate",label:Kn,control:p,disabled:!o,required:!0,errors:_,rules:Gs}),e.jsx(xe,{name:"personBirthPlace",label:Wn,rules:vs,required:!1,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personPreviousName",label:Vn,rules:vs,required:!1,control:p,editable:o,type:"text"}),e.jsxs("div",{className:o?"checkboxContainer col-span-3":"checkboxContainer--disabled col-span-3",children:[e.jsx("p",{className:"inputBox__form--readOnly-label",children:"وضعیت ایثارگری:"}),e.jsx(Ns,{disabled:!o,control:p,label:Qn,name:"personIsSacrificedFamily"}),e.jsx(Ns,{disabled:!o,control:p,label:Jn,name:"personIsWarrior"}),e.jsx(Ns,{disabled:!o,control:p,label:Xn,name:"personIsChildOfSacrificed"}),e.jsx(Ns,{disabled:!o,control:p,label:Zn,name:"personIsValiant"}),e.jsx(Ns,{disabled:!o,control:p,label:ea,name:"personIsSacrificed"}),e.jsx(Ns,{disabled:!o,control:p,label:sa,name:"personIsCaptive"})]}),e.jsx(xe,{name:"retiredID",label:na,required:!1,control:p,editable:!1,type:"text"}),e.jsx(xe,{name:"personPhone",label:aa,required:!1,rules:Ys,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personCellPhone",label:ta,required:!1,rules:xt,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupNum",label:la,required:!1,rules:Ys,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupName",label:ra,required:!1,rules:vs,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"backupLname",label:oa,required:!1,rules:vs,control:p,editable:o,type:"text"}),e.jsx(xe,{name:"personEmail",label:ia,required:!1,rules:gt,control:p,editable:o,type:"text"}),e.jsx(rs,{name:"educationTypeID",control:p,label:ca,required:!1,isClearable:!0,isDisabled:!o,options:te,isLoading:M}),e.jsx(rs,{name:"personCountryID",control:p,label:pa,required:!1,isClearable:!0,isDisabled:!o,options:L,isLoading:d}),e.jsx(rs,{name:"personStateID",control:p,label:ua,required:!1,isClearable:!0,isDisabled:!o,options:oe,isLoading:re}),e.jsx(rs,{name:"personCityID",control:p,label:da,required:!1,isClearable:!0,isDisabled:!o,options:v,isLoading:J}),e.jsx(xe,{name:"personRegion",label:ma,required:!1,control:p,editable:o,rules:Ys,type:"text"}),e.jsx(xe,{name:"personArea",label:ha,required:!1,control:p,editable:o,rules:Ys,type:"text"}),e.jsx(xe,{name:"personPostalCode",label:xa,required:!1,control:p,editable:o,rules:jt,type:"text"}),e.jsx(rs,{name:"housingTypeID",control:p,label:ga,required:!1,isClearable:!0,isDisabled:!o,options:r,isLoading:t}),e.jsx(rs,{name:"maritalStatusID",control:p,label:ja,required:!1,isClearable:!0,isDisabled:!o,options:a,isLoading:A}),e.jsx(tn,{name:"personDeathDate",label:Na,control:p,disabled:!o,required:!1}),e.jsx(an,{name:"personAddress",label:fa,required:!0,control:p,editable:o,containerClassNames:"col-span-3"}),e.jsx(an,{name:"personDescription",label:ya,required:!0,control:p,editable:o,containerClassNames:"col-span-4 row-span-2"})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(We,{dir:"ltr",endIcon:e.jsx(Ea,{}),disabled:!o,variant:"contained",type:"submit",loading:Q,color:"success",children:e.jsx("span",{children:Ia})}),e.jsx(Ss,{dir:"ltr",endIcon:e.jsx(_s,{}),onClick:j,disabled:o,variant:"contained",color:"primary",children:e.jsx("span",{children:ba})})]})]})})})},Xt=()=>{const[o,j]=l.useState("1"),{personDeathDate:C}=rn(p=>p.person),F=(p,B)=>{j(B)};return e.jsxs("section",{className:"flex-col",children:[e.jsx(za,{title:Ca}),e.jsxs("div",{"data-name":"retired-forms",children:[e.jsxs(qs,{children:[e.jsx(ws,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx($s,{}),children:Da}),e.jsx(zs,{children:e.jsx(Nt,{})})]}),e.jsxs(qs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ws,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx($s,{}),children:va}),e.jsx(zs,{children:e.jsx(wa,{})})]}),e.jsxs(qs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ws,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx($s,{}),children:Sa}),e.jsx(zs,{children:e.jsx(qa,{})})]}),e.jsxs(qs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(ws,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx($s,{}),children:Ba}),e.jsx(zs,{children:e.jsx($a,{})})]})]}),e.jsx("div",{"data-name":"retired-grids",children:e.jsxs(Aa,{value:o,children:[e.jsx(Pe,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(Ua,{onChange:F,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(Es,{label:C?_a:ka,value:"1"}),e.jsx(Es,{label:Oa,value:"2"}),e.jsx(Es,{label:Pa,value:"3"}),e.jsx(Es,{label:Ma,value:"4"})]})}),e.jsx(Hs,{value:"1",sx:{padding:"0"},children:C?e.jsx(ot,{}):e.jsx(Xa,{})}),e.jsx(Hs,{value:"2",sx:{padding:"0"},children:e.jsx(Ln,{})}),e.jsx(Hs,{value:"3",sx:{padding:"0"},children:e.jsx(ct,{})}),e.jsx(Hs,{value:"4",sx:{padding:"0"},children:e.jsx(it,{})})]})})]})};export{Xt as default};
