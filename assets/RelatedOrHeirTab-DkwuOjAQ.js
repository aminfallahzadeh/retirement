import{R as P,P as A,K as E,N as S,aE as $,Y as K,j as e,f as v,ee as F,at as j,T as l,L as R,fL as B,dJ as D,I as t,B as G,C as N,fM as H,er as M,r as d,A as k,z as U,dK as _,G as O,au as W,fN as Z,fO as Q,i as ee}from"./index-Celh3WKK.js";import{c as se,d as ae}from"./relatedApi-BNBIBbm2.js";import{D as J}from"./DeleteOutline-BzsYrv9z.js";import{E as Y}from"./EditOutlined-qLgtuXJq.js";import{A as q}from"./Add-CMf60KAA.js";import{R as w}from"./Refresh-D_6hoTbr.js";import{c as re,d as oe}from"./heirApi-DSkJH6Ff.js";const ne=(r,o)=>[{accessorKey:"relatedRowNo",header:P,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"personNationalCode",header:A,size:20},{accessorKey:"personFirstName",header:E,size:20},{accessorKey:"personLastName",header:S,size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"personBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"relationshipWithParentName",header:F,size:20},{accessorKey:"updateRelated",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${B}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(Y,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(J,{})})})}],te=(r,o,s,i)=>e.jsxs(G,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(w,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:M,children:e.jsx(R,{to:`${B}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(q,{fontSize:"small"})})})})]}),ie=()=>{const[r,o]=d.useState([]),[s,i]=k(!1),[g,h]=d.useState(""),[y]=U(),c=y.get("personID"),{data:p,isSuccess:m,isLoading:u,isFetching:x,refetch:f}=se(c),[C,{isLoading:I}]=ae();d.useEffect(()=>{if(m){const n=p.itemList.map((a,T)=>({id:a.personID,relatedRowNo:T+1,pensionaryID:a.pensionaryID,personBirthDate:a.personBirthDate,personNationalCode:a.personNationalCode,personFirstName:a.personFirstName,personLastName:a.personLastName,pensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,relationshipWithParentName:a.relationshipWithParentName}));o(n)}},[m,p]);const b=async()=>{const n=await C({pensionaryID:g}).unwrap();i(),f(),W.success(n.message)},L=ne(c,n=>{h(n),i()}),z=te(u,x,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(_,{open:s,onClose:i,isLoading:I,handleRemove:b}),e.jsx(O,{data:r,columns:L,scroll:!1,topBarActions:z,isLoading:u,isFetching:x})]})},le=(r,o)=>[{accessorKey:"heirRowNo",header:P,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"heirNationalCode",header:A,size:20},{accessorKey:"heirFirstName",header:E,size:20},{accessorKey:"heirLastName",header:S,size:20},{accessorKey:"heirPensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"heirBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"heirRelationshipWithParentName",header:F,size:20},{accessorKey:"heirParentPersonNationalCode",header:Z,size:20},{accessorKey:"updateHeir",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${Q}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(Y,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(J,{})})})}],ce=(r,o,s,i)=>e.jsxs(G,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(w,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:M,children:e.jsx(R,{to:`${Q}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(q,{fontSize:"small"})})})})]}),de=()=>{const[r,o]=d.useState(""),[s,i]=d.useState([]),[g,h]=k(!1),[y]=U(),c=y.get("personID"),{data:p,isLoading:m,isSuccess:u,isFetching:x,refetch:f}=re(c),[C,{isLoading:I}]=oe();d.useEffect(()=>{if(u){const n=p.itemList.map((a,T)=>({id:a.personID,heirRowNo:T+1,pensionaryID:a.pensionaryID,heirNationalCode:a.personNationalCode,heirFirstName:a.personFirstName,heirLastName:a.personLastName,heirPensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,heirBirthDate:a.personBirthDate,heirRelationshipWithParentName:a.relationshipWithParentName,heirParentPersonNationalCode:a.parentPersonNationalCode}));i(n)}},[u,p]);const b=async()=>{const n=await C({pensionaryID:r}).unwrap();f(),h(),W.success(n.message)},L=le(c,n=>{o(n),h()}),z=ce(m,x,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(_,{open:g,onClose:h,isLoading:I,handleRemove:b}),e.jsx(O,{data:s,columns:L,scroll:!1,topBarActions:z,isLoading:m,isFetching:x})]})},De=()=>{const{personDeathDate:r}=ee(o=>o.person);return r?e.jsx(de,{}):e.jsx(ie,{})};export{De as default};
