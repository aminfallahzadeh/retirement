import{r as c,d as ae,U as Z,N as re,j as e,Q as ie,x as r,n as H,S as ee,t as U,q as f,e as le,cl as ce,B as te,C as Q,y as D,ci as F,Y as v,X as V,bT as oe,T as K,I as M,z as de,P as me,A as he,D as xe,F as pe,J as ue,W as J,m as je,cm as Se,M as ge}from"./index-22iEO3lt.js";import{f as De,g as fe,h as be,i as Ce,j as ye,k as Ne}from"./statementApi-Bq1aAGei.js";/* empty css                 */import{M as q}from"./Modal-CMuFQNpv.js";import{e as Re}from"./useFetchLookUpData-Cn_M0P4H.js";import{u as ve,m as we,C as _e}from"./main-CAS2Gbdi.js";import{i as Ie,S as Te}from"./react-select-animated.esm-BLoX3LIO.js";import{o as Ae,s as X}from"./reactSelect-BGq5yAQc.js";import{d as $e,a as Fe}from"./datePicker-XXmtGBIB.js";import{s as Me,D as se,$ as Pe}from"./module-CxkydNP1.js";import{S as ke}from"./index-DObdhRZm.js";import{d as Le}from"./table-options-42Dqni_C.js";import{D as Be}from"./DeleteOutline-PVHX3dMr.js";import{R as Oe}from"./Refresh-BgEcj7at.js";import{A as ze}from"./Add-lesWckZY.js";const Ee=["100","11","14","16","36","37","38","39","69","5","57","6","65","96","97","98"];function Ge({setShowGenerateStatementModal:N,setStatMessage:P,setShowStatModal:b}){const t=c.useRef(null),[g,n]=c.useState(null),[w,j]=c.useState(!1),{handleSubmit:R,formState:{errors:x},control:_,register:C,watch:k}=ae(),i=k(),L=Z(),B=Ie(),m=new URLSearchParams(L.search),I=m.get("personID"),O=m.get("requestID"),[z,{isLoading:T}]=De(),{data:u,isSuccess:y,error:E}=fe(I),{statementTypes:A,statementTypesIsFetching:S,statementTypesIsLoading:p}=Re(),$=Ae(A,"retirementStatementTypeID","retirementStatementTypeName"),G=h=>{j(h)},Y=h=>{n(h),j(!1)};c.useEffect(()=>{y&&n(re(u))},[y,u]);const s=async()=>{var h;try{const a=new Date(g);a.setMinutes(a.getMinutes()-a.getTimezoneOffset());const W=await z({...i,retirementStatementRunDate:a,personID:I,requestID:O,newAmount:U(i==null?void 0:i.newAmount)||0,newSup:U(i==null?void 0:i.newSup)||0}).unwrap();N(!1),f.success(W.message,{autoClose:2e3}),W.error&&W.error.length>0&&(P(r(W.error)),b(!0))}catch(a){console.log(a),f.error(((h=a==null?void 0:a.data)==null?void 0:h.message)||a.error,{autoClose:2e3})}};return ve([t],[j]),e.jsx("section",{className:"formContainer-transparent flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:R(s),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-2",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(we.InputDatePicker,{value:g,format:"jYYYY/jMM/jDD",onChange:Y,onOpenChange:G,suffixIcon:e.jsx(_e,{color:"action"}),open:w,style:$e,wrapperStyle:Fe,pickerProps:{ref:t}}),e.jsxs("div",{className:"inputBox__form--readOnly-label",children:[e.jsx("span",{children:"*"})," تاریخ اجرا"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ie,{name:"retirementStatementTypeID",control:_,rules:{required:!0},render:({field:{onChange:h}})=>e.jsx(Te,{closeMenuOnSelect:!0,components:B,options:$,onChange:a=>h(a?a.value:null),value:$.find(a=>a.value===(i==null?void 0:i.retirementStatementTypeID)),name:"retirementStatementTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع حکم"]}),noOptionsMessage:X.noOptionsMessage,loadingMessage:X.loadingMessage,styles:{container:a=>({...a,position:"relative",height:"100%"}),control:a=>({...a,fontFamily:"IranYekan",cursor:"pointer",fontSize:"12px",height:"100%",maxWidth:"100%",maxHeight:"100%",overflow:"auto",textOverflow:"ellipsis",position:"relative"}),menu:a=>({...a,fontFamily:"IranYekan",zIndex:"5",height:"200px"}),option:a=>({...a,cursor:"pointer"}),menuList:a=>({...a,fontFamily:"IranYekan",zIndex:"5",height:"200px"})},isLoading:S||p})}),e.jsxs("label",{className:i!=null&&i.retirementStatementTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع حکم"]}),x.retirementStatementTypeID&&e.jsx("span",{className:"error-form",children:"نوع حکم اجباری است"})]}),Ee.includes(i==null?void 0:i.retirementStatementTypeID)&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"inputBox__form",children:[x.newAmount&&e.jsx("span",{className:"error-form",children:x.newAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"newAmount",value:r(i==null?void 0:i.newAmount)||"",id:"newAmount",...C("newAmount",{pattern:{value:/^[۰-۹0-9]+$/,message:"از اعداد استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"newAmount",children:"میزان افزایش حقوق مبنا"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.newSup&&e.jsx("span",{className:"error-form",children:x.newSup.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"newSup",value:r(i==null?void 0:i.newSup)||"",id:"newSup",...C("newSup",{pattern:{value:/^[۰-۹0-9]+$/,message:"از اعداد استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"newSup",children:"میزان افزایش حقوق تکمیلی"})]})]}),e.jsxs("div",{className:"inputBox__form col-span-2 row-span-2",children:[x.retirementStatementDesc&&e.jsx("span",{className:"error-form",children:x.retirementStatementDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:r(i==null?void 0:i.retirementStatementDesc),name:"retirementStatementDesc",id:"retirementStatementDesc",required:!0,...C("retirementStatementDesc",{pattern:{value:/^[آ-ی\s۰-۹.,;!؟@#$%^&*×،()_+=-]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"retirementStatementDesc",children:"شرح حکم"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(H,{dir:"ltr",endIcon:e.jsx(ee,{}),onClick:R,type:"submit",loading:T,variant:"contained",disabled:!g,color:"success",children:e.jsx("span",{children:"ذخیره"})})})]})})}function Ye({statementID:N,setShowStatementModal:P}){const b=c.useRef(),[t,g]=c.useState(null),[n,w]=c.useState(null),[j,R]=c.useState(null),[x,_]=c.useState([]),k=new URLSearchParams(location.search).get("personID"),{personDeathDate:i}=le(s=>s.person),[L,{isLoading:B}]=be(),{data:m,isSuccess:I,isLoading:O,isFetching:z,refetch:T,error:u}=Ce({RetirementStatementID:N}),{data:y,isSuccess:E,isLoading:A,isFetching:S,error:p}=ce(k);c.useEffect(()=>{var s;if(T(),I){w(m),R(m==null?void 0:m.documentSignature);const h=((s=m==null?void 0:m.retirementStatementAmountList)==null?void 0:s.filter(a=>["1001","1002","2001","2002"].includes(a.retirementStatementItemID))).map(a=>({retirementStatementItemID:a.retirementStatementItemID,retirementStatementItemAmount:a.retirementStatementItemAmount}));_(h)}},[I,m,T]),c.useEffect(()=>{E&&g(y.itemList[0])},[E,y]),c.useEffect(()=>{console.log(x)},[x]),c.useEffect(()=>{var s;u&&(console.log(u),f.error(((s=u==null?void 0:u.data)==null?void 0:s.message)||u.error,{autoClose:2e3}))},[u]),c.useEffect(()=>{var s;p&&(console.log(p),f.error(((s=p==null?void 0:p.data)==null?void 0:s.message)||p.error,{autoClose:2e3}))},[p]);const $=(s,d)=>{_(h=>h.map(a=>a.retirementStatementItemID===d?{...a,retirementStatementItemAmount:Number(U(oe(s.target.value)))}:a))},G=async()=>{var s;try{const d=await L({retirementStatementID:N,data:x}).unwrap();f.success(d.message,{autoClose:2e3}),P(!1)}catch(d){f.error(((s=d==null?void 0:d.data)==null?void 0:s.message)||d.error,{autoClose:2e3})}};return c.useEffect(()=>{console.log("THIS IS THE SIGNATURE",j)},[j]),e.jsx(e.Fragment,{children:O||z||A||S||t===null||n===null?e.jsx(q,{title:"در حال بارگذاری...",children:e.jsx(te,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Q,{color:"primary"})})}):e.jsxs("div",{className:"slip-container",children:[e.jsxs("div",{className:"slip-container",ref:b,children:[e.jsxs("div",{className:"slip-container__logo",children:[e.jsx("img",{src:Me,className:"slip-container__logo--img"}),e.jsx("p",{className:"slip-container__logo--sub",children:"سازمان بازنشستگی شهرداری تهران"})]}),e.jsxs("div",{className:"slip-container__qr",children:[e.jsx("div",{className:"slip-container__qr--box",children:"QR CODE"}),e.jsxs("p",{className:"slip-container__qr--serial",children:["سریال حکم :"," ",e.jsx("span",{children:r(n==null?void 0:n.retirementStatementSerial)})]})]}),e.jsxs("div",{className:"slip-container__header",children:[e.jsx("h5",{children:"بسمه تعالی"}),e.jsx("h5",{children:"حکم بازنشستگی"})]}),e.jsx("table",{className:"slip-container__person-info-table form-table",children:e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:4,children:"مشخصات فردی"})}),e.jsxs("tr",{children:[e.jsx("th",{children:`کد ملی : ${r(t==null?void 0:t.personNationalCode)||"-"}`}),e.jsx("th",{children:`نام : ${(t==null?void 0:t.personFirstName)||"-"}`}),e.jsx("th",{children:`نام خانوادگی : ${(t==null?void 0:t.personLastName)||"-"}`}),e.jsx("th",{children:`شماره بازنشستگی : ${r(t==null?void 0:t.retiredID)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`شماره شناسنامه : ${r(t==null?void 0:t.personCertificateNo)||"-"}`}),e.jsx("th",{children:`نام پدر : ${(t==null?void 0:t.personFatherName)||"-"}`}),e.jsx("th",{children:`تاریخ تولد : ${D(t==null?void 0:t.personBirthDate)||"-"}`}),e.jsx("th",{children:`محل تولد : ${(t==null?void 0:t.personBirthPlace)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`جنسیت : ${(t==null?void 0:t.genderName)||"-"}`}),e.jsx("th",{children:`تعداد فرزندان : ${r(n==null?void 0:n.retirementStatementChildrenCount)??"-"}`}),e.jsx("th",{children:`تعداد افراد تحت تکفل : ${r(n==null?void 0:n.retirementStatementChildrenCount)??"-"}`}),e.jsx("th",{children:`کد درمانی : ${r(t==null?void 0:t.insuranceCode)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`وضعیت تاهل : ${(t==null?void 0:t.maritalStatusName)||"-"}`}),e.jsx("th",{colSpan:3,children:`کد پستی : ${r(t==null?void 0:t.personPostalCode)||"-"}`})]}),e.jsx("tr",{children:e.jsx("th",{colSpan:4,children:e.jsxs("div",{className:"slip-container__person-info-table--checkbox",children:[e.jsx("span",{children:"وضعیت ایثارگری :"}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsSacrificedFamily,name:"personIsSacrificedFamily",id:"personIsSacrificedFamily",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificedFamily",children:"خانواده شهید"})]}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsValiant,name:"personIsValiant",id:"personIsValiant",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsValiant",children:"جانباز"})]}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsCaptive,name:"personIsCaptive",id:"personIsCaptive",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsCaptive",children:"آزاده"})]}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsWarrior,name:"personIsWarrior",id:"personIsWarrior",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsWarrior",children:"رزمنده"})]}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsSacrificed,name:"personIsSacrificed",id:"personIsSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsSacrificed",children:"شهید"})]}),e.jsxs("div",{children:[e.jsx(F,{size:"small",color:"success",checked:t==null?void 0:t.personIsChildOfSacrificed,name:"personIsChildOfSacrificed",id:"personIsChildOfSacrificed",sx:{padding:.5}}),e.jsx("label",{htmlFor:"personIsChildOfSacrificed",children:"فرزند شهید"})]})]})})})]})}),e.jsx("table",{className:"slip-container__personnel-info-table form-table",children:e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:3,children:"مشخصات پرسنلی"})}),e.jsxs("tr",{children:[e.jsx("th",{children:`تاریخ بازنشستگی : ${D(t==null?void 0:t.retirementDate)||"-"}`}),e.jsx("th",{children:`آخرین پست سازمانی : ${(t==null?void 0:t.retiredLastPosition)||"-"}`}),e.jsxs("th",{children:["آخرین محل خدمت :",e.jsx("br",{}),`${(t==null?void 0:t.retiredOrganizationName)||"-"}`]})]}),e.jsxs("tr",{children:[e.jsxs("th",{children:["سنوات خدمت واقعی : ",e.jsx("br",{}),`روز : ${r(t==null?void 0:t.retiredRealDurationDAY)||"-"}`,"   ",`ماه : ${r(t==null?void 0:t.retiredRealDurationMONTH)||"-"}`,"   ",`سال : ${r(t==null?void 0:t.retiredRealDurationYEAR)||"-"}`]}),e.jsx("th",{children:`سنوات ارفاقی : ${r(t==null?void 0:t.retiredGrantDuration)||"-"}`}),e.jsx("th",{children:"سنوات بازنشسنگی : -"})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`گروه : ${r(n==null?void 0:n.retiredGroup)||"-"}`}),e.jsx("th",{children:`مرتبه : ${r(t==null?void 0:t.retiredJobDegree)||"-"}`}),e.jsx("th",{children:`مدرک تحصیلی : ${(t==null?void 0:t.educationTypeName)||"-"}`})]}),e.jsxs("tr",{children:[e.jsx("th",{children:`نوع حکم : ${(n==null?void 0:n.retirementStatementTypeName)||"-"}`}),e.jsx("th",{children:"عنوان شغل : -"}),e.jsx("th",{children:`تاریخ فوت : ${D(t==null?void 0:t.personDeathDate)||"-"}`})]})]})}),i?e.jsxs("table",{className:"slip-container__related-table form-table",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:11,children:"مشخصات افراد تحت تکفل"})}),e.jsxs("tr",{children:[e.jsx("th",{children:"ردیف"}),e.jsx("th",{children:"کد ملی"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"نام پدر"}),e.jsx("th",{children:"نسبت"}),e.jsx("th",{children:"تاریخ تولد"}),e.jsx("th",{children:"حقوق وظیفه"}),e.jsx("th",{children:"بازنشستگی تکمیلی"}),e.jsx("th",{children:"حق تاهل"}),e.jsx("th",{children:"حق اولاد"})]})]}),e.jsx("tbody",{children:n==null?void 0:n.retirementStatementRelatedList.map((s,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:r(d+1)}),e.jsx("td",{children:r(s.personNationalCode)||"-"}),e.jsx("td",{children:s.personFirstName||"-"}),e.jsx("td",{children:s.personLastName||"-"}),e.jsx("td",{children:s.personFatherName||"-"}),e.jsx("td",{children:s.relationshipWithParentName||"-"}),e.jsx("td",{children:D(s.personBirthDate)}),e.jsx("td",{children:r(v(s.heirRight))||"-"}),e.jsx("td",{children:r(v(s.supplementaryRight))||"-"}),e.jsxs("td",{children:[" ",r(v(s.maritalRight))||"-"]}),e.jsx("td",{children:r(v(s.childRight))||"-"})]},s.retirementStatementRelatedID))})]}):e.jsxs("table",{className:"slip-container__related-table form-table",children:[e.jsxs("thead",{children:[e.jsx("tr",{children:e.jsx("th",{colSpan:7,children:"مشخصات افراد تحت تکفل"})}),e.jsxs("tr",{children:[e.jsx("th",{width:"100",children:"ردیف"}),e.jsx("th",{children:"کد ملی"}),e.jsx("th",{children:"نام"}),e.jsx("th",{children:"نام خانوادگی"}),e.jsx("th",{children:"نام پدر"}),e.jsx("th",{children:"نسبت"}),e.jsx("th",{children:"تاریخ تولد"})]})]}),e.jsx("tbody",{children:n==null?void 0:n.retirementStatementRelatedList.map((s,d)=>e.jsxs("tr",{children:[e.jsx("td",{children:r(d+1)}),e.jsx("td",{children:r(s.personNationalCode)||"-"}),e.jsx("td",{children:s.personFirstName||"-"}),e.jsx("td",{children:s.personLastName||"-"}),e.jsx("td",{children:s.personFatherName||"-"}),e.jsx("td",{children:s.relationshipWithParentName||"-"}),e.jsx("td",{children:D(s.personBirthDate)})]},s.retirementStatementRelatedID))})]}),e.jsxs("div",{className:"slip-container__statement-items-table-container",children:[e.jsxs("table",{className:"slip-container__statement-items-desc-table form-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{children:"شرح حکم :"})})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsx("td",{style:{verticalAlign:"top"},children:r(n==null?void 0:n.retirementStatementDesc)||"-"})})})]}),e.jsxs("table",{className:"slip-container__statement-items-desc-table form-table",children:[e.jsx("thead",{children:e.jsx("tr",{children:e.jsx("th",{colSpan:2,children:"آیتم های حکم :"})})}),e.jsx("tbody",{children:n==null?void 0:n.retirementStatementAmountList.map(s=>{var d;return e.jsxs("tr",{style:{textAlign:"center"},children:[e.jsx("td",{children:s.retirementStatementItemName}),s.retirementStatementItemID==="1001"||s.retirementStatementItemID==="1002"||s.retirementStatementItemID==="2001"||s.retirementStatementItemID==="2002"?e.jsx("td",{children:e.jsx("input",{type:"text",disabled:m==null?void 0:m.retirementStatementIssueConfirmDate,value:r(v(((d=x.find(h=>h.retirementStatementItemID===s.retirementStatementItemID))==null?void 0:d.retirementStatementItemAmount)||"")),style:{textAlign:"center",border:"none",outline:"none",width:"100%"},onChange:h=>$(h,s.retirementStatementItemID)})}):e.jsx("td",{children:r(v(s.retirementStatementItemAmount))})]},s.retirementStatementItemID)})}),e.jsx("tfoot",{children:e.jsx("tr",{children:e.jsxs("td",{colSpan:2,children:[" ","جمع کل به ریال : ","      ",r(v(n==null?void 0:n.sumRetirementStatementAmount))??"-"]})})})]})]}),e.jsxs("table",{className:"slip-container__statement-footer-table form-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:`ناریخ اجرا : ${D(n==null?void 0:n.retirementStatementRunDate)||"-"}`}),e.jsx("th",{children:`تاریخ صدور : ${D(n==null?void 0:n.retirementStatementIssueDate)||"-"}`}),e.jsx("th",{children:`شماره صدور : ${r(n==null?void 0:n.retirementStatementNo)||"-"}`})]})}),e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("th",{colSpan:3,style:{textAlign:"left",padding:"20px"},children:[e.jsx("img",{src:j,alt:"امضا",className:"w-[120px] mr-auto"}),"عضو هیات مدیره و مدیرعامل"]})})})]}),e.jsxs("div",{className:"slip-container__ending",children:[e.jsx("span",{children:"- - - - - - - - - - - - - - - - - - - - - - - - - - - -"}),e.jsx("p",{children:"۱. فرزندان اناث بعد از سن ۲۰ سالگی میبایست هر سال با در دست داشتن اصل شناسنامه خود به اداره بازنشستگی مراجعه نمایند."}),e.jsx("p",{children:"۲. فرزندان ذکور بعد از سن ۲۰ سالگی و تا پایان ۲۵ سالگی در صورت اشتغال به تحصیل میبایست در هر ترم گواهی دانشجویی معتبر ارائه نمایند."}),e.jsx("p",{children:"۳. تک وظیفه بگیران لازم است هر سال یکبار با در دست داشتن اصل شناسنامه خود به اداره بازنشستگی مراجعه نمایند."})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(V,{dir:"ltr",endIcon:e.jsx(se,{}),onClick:()=>Pe(b,{filename:"حکم کارمندی.pdf"}),variant:"contained",color:"primary",sx:{fontFamily:"IranYekan"},children:e.jsx("span",{children:"چاپ حکم"})}),e.jsx(H,{dir:"ltr",endIcon:e.jsx(ee,{}),variant:"contained",onClick:G,loading:B,color:"success",children:e.jsx("span",{children:"ذخیره"})})]})]})})}function rt(){const[N,P]=c.useState([]),[b,t]=c.useState(null),[g,n]=c.useState({}),[w,j]=c.useState(!1),[R,x]=c.useState(!1),[_,C]=c.useState(!1),[k,i]=c.useState(!1),[L,B]=c.useState(""),m=Z(),O=new URLSearchParams(m.search).get("personID"),[z,{isLoading:T}]=ye(),{data:u,isSuccess:y,isLoading:E,isFetching:A,error:S,refetch:p}=Ne({personID:O});c.useEffect(()=>{if(p(),y){const o=u.map((l,ne)=>({id:l.retirementStatementID,statementRowNum:ne+1,retirementStatementSerial:l.retirementStatementSerial,retirementStatementTypeName:l.retirementStatementTypeName,retirementStatementNo:l.retirementStatementNo||"-",retirementStatementIssueDate:l.retirementStatementIssueDate,retirementStatementRunDate:l.retirementStatementRunDate,retirementStatementIssueConfirmDate:l.retirementStatementIssueConfirmDate}));P(o)}},[y,p,u,w,R]),c.useEffect(()=>{var o;S&&(console.log(S),f.error(((o=S==null?void 0:S.data)==null?void 0:o.message)||S.error,{autoClose:2e3}))},[S]);const $=()=>{p()},G=()=>{j(!0)},Y=c.useCallback(()=>{x(!0)},[]),s=()=>{C(!0)},d=async()=>{var o;try{const l=await z({rsID:b}).unwrap();p(),x(!1),f.success(l.message,{autoClose:2e3})}catch(l){console.log(l),f.error(((o=l==null?void 0:l.data)==null?void 0:o.message)||l.error,{autoClose:2e3})}},h=c.useMemo(()=>{const o=[{accessorKey:"statementRowNum",size:20,header:"دریف",enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:l})=>e.jsx("div",{children:r(l)})},{accessorKey:"retirementStatementNo",size:20,header:"شماره حکم",Cell:({renderedCellValue:l})=>e.jsx("div",{children:r(l)})},{accessorKey:"retirementStatementSerial",size:20,header:"سریال حکم",Cell:({renderedCellValue:l})=>e.jsx("div",{children:r(l)})},{accessorKey:"retirementStatementTypeName",header:"نوع حکم"},{accessorKey:"retirementStatementIssueDate",header:"تاریخ صدور",Cell:({renderedCellValue:l})=>e.jsx("div",{children:r(D(l))})},{accessorKey:"retirementStatementRunDate",header:"تاریخ اجرا",Cell:({renderedCellValue:l})=>e.jsx("div",{children:r(D(l))})},{accessorKey:"downloadRetiredStatement",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:l})=>e.jsx(K,{title:`سریال ${r(l.original.retirementStatementSerial)}`,children:e.jsx(M,{color:"primary",onClick:s,sx:{padding:"0"},children:e.jsx(se,{})})})}];return m.pathname!=="/retirement/personnel-statements/info"&&o.push({accessorKey:"removeStatement",header:"حذف حکم",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:l})=>e.jsx(K,{title:l.original.retirementStatementIssueConfirmDate?"حکم تایید شده":"حذف حکم",children:e.jsx("span",{children:e.jsx(M,{color:"error",disabled:!!l.original.retirementStatementIssueConfirmDate,onClick:Y,sx:{padding:"0"},children:e.jsx(Be,{})})})})}),o},[Y,m.pathname]),a=de({...Le,columns:h,data:N,muiTableBodyRowProps:({row:o})=>({onClick:()=>n(()=>({[o.id]:!0})),selected:g[o.id],sx:{cursor:"pointer"}}),initialState:{density:"compact",showGlobalFilter:!0,sorting:[{id:"retirementStatementIssueDate",desc:!0}]},enablePagination:!1,enableBottomToolbar:!1,muiTableContainerProps:{sx:{height:"300px"}},renderTopToolbarCustomActions:()=>e.jsxs(te,{children:[A?e.jsx(M,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Q,{size:20,value:100})}):e.jsx(K,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(M,{"aria-label":"refresh",color:"info",onClick:$,children:e.jsx(Oe,{fontSize:"small"})})})}),A?e.jsx(M,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Q,{size:20,value:100,color:"success"})}):e.jsx(K,{title:"صدور حکم",children:e.jsx("span",{children:e.jsx(M,{"aria-label":"refresh",color:"success",onClick:G,children:e.jsx(ze,{fontSize:"small"})})})})]}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:o=>e.jsx(me,{...o,page:r(o.page),slots:{previous:he,next:xe,first:pe,last:ue}})},getRowId:o=>o.id,onRowSelectionChange:n,state:{rowSelection:g}});return c.useEffect(()=>{const o=Object.keys(a.getState().rowSelection)[0];o&&t(o)},[a,g,N]),e.jsx(e.Fragment,{children:E?e.jsx("div",{className:"skeleton-lg",children:e.jsx(ke,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[R?e.jsxs(q,{title:"حذف حکم",closeModal:()=>x(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این حکم اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(H,{dir:"ltr",endIcon:e.jsx(J,{}),variant:"contained",onClick:d,loading:T,color:"success",children:e.jsx("span",{children:"بله"})}),e.jsx(V,{dir:"ltr",endIcon:e.jsx(je,{}),onClick:()=>x(!1),variant:"contained",color:"error",children:e.jsx("span",{children:"خیر"})})]})]}):w?e.jsx(q,{title:"ایجاد حکم بازنشسته",closeModal:()=>j(!1),children:e.jsx(Ge,{setShowGenerateStatementModal:j,setShowStatModal:i,setStatMessage:B})}):_&&b?e.jsx(q,{closeModal:()=>C(!1),children:e.jsx(Ye,{statementID:b,setShowStatementModal:C})}):k?e.jsxs(q,{children:[e.jsxs("div",{className:"paragraph-primary",style:{width:"60ch",textAlign:"center",display:"flex",justifyContent:"center"},children:[e.jsx(Se,{color:"info",fontSize:"large"}),e.jsx("span",{style:{marginRight:"5px"},children:L})]}),e.jsx("div",{className:"flex-row flex-center",children:e.jsx(V,{dir:"ltr",endIcon:e.jsx(J,{}),onClick:()=>i(!1),variant:"contained",color:"success",children:e.jsx("span",{children:"تایید"})})})]}):null,e.jsx(ge,{table:a})]})})}export{rt as R};
