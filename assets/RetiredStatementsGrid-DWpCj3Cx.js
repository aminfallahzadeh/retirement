import{R as L,cg as _,ch as $,ci as M,cj as z,j as e,f as E,ck as K,O,T as l,cl as p,L as I,cm as B,h as P,dz as k,fJ as G,I as T,B as F,C as U,ei as q,fK as J,r as m,D as Q,A as V,dA as W,G as Y,au as H}from"./index-CAx8cgCu.js";import{j as X,k as Z}from"./statementApi-CPNP79th.js";import{D as w}from"./DeleteOutline-CmOl4-2a.js";import{A as ee}from"./Add-BaJ3brIj.js";const te=a=>[{accessorKey:"retirementStatementRowNo",size:20,header:L,enableColumnActions:!1,enableSorting:!1},{accessorKey:"retirementStatementNo",size:20,header:_},{accessorKey:"retirementStatementSerial",size:20,header:$},{accessorKey:"retirementStatementTypeName",size:20,header:M},{accessorKey:"retirementStatementIssueDate",header:z,Cell:({renderedCellValue:t})=>e.jsx("div",{children:E(t)})},{accessorKey:"retirementStatementRunDate",header:K,Cell:({renderedCellValue:t})=>e.jsx("div",{children:E(t)})},{accessorKey:"observeRetirementStatement",header:O,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx(I,{to:`${B}document/rstatement?statementID=${t.original.id}&personID=${t.original.personID}&personDeathDate=${t.original.personDeathDate}`,children:e.jsx(P,{color:"primary"})})})},{accessorKey:"deleteRetirementStatement",header:k,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:t})=>e.jsx(l,{title:t.original.retirementStatementIssueConfirmDate?G:`${p} ${t.original.retirementStatementSerial}`,children:e.jsx("span",{children:e.jsx(T,{disabled:!!t.original.retirementStatementIssueConfirmDate,color:"error",onClick:()=>a(t.original.id),sx:{padding:"0"},children:e.jsx(w,{})})})})}],se=(a,t,r,o)=>e.jsx(F,{children:t||a?e.jsx(T,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(U,{size:20,value:100})}):e.jsx(l,{title:q,children:e.jsx(I,{to:`${J}?personID=${r}&requestID=${o}`,children:e.jsx(ee,{fontSize:"small",color:"success"})})})}),me=({columns:a})=>{const[t,r]=m.useState([]),[o,i]=Q(!1),[f,R]=m.useState(""),[c]=V(),d=c.get("personID"),g=c.get("requestID"),{data:S,isSuccess:D,isLoading:u,isFetching:h,refetch:x}=X({personID:d}),[j,{isLoading:A}]=Z();m.useEffect(()=>{if(D){const n=S.map((s,v)=>({id:s.retirementStatementID,retirementStatementRowNo:v+1,retirementStatementSerial:s.retirementStatementSerial,retirementStatementTypeName:s.retirementStatementTypeName,retirementStatementNo:s.retirementStatementNo||"-",retirementStatementIssueDate:s.retirementStatementIssueDate,retirementStatementRunDate:s.retirementStatementRunDate,retirementStatementIssueConfirmDate:s.retirementStatementIssueConfirmDate,personID:s.personID,personDeathDate:s.personDeathDate}));r(n)}},[D,S]);const C=n=>{R(n),i()},N=async()=>{const n=await j({rsID:f}).unwrap();H.success(n.message),x(),i()},y=te(C),b=se(u,h,d,g);return e.jsxs(e.Fragment,{children:[e.jsx(W,{open:o,onClose:i,isLoading:A,handleRemove:N}),e.jsx(Y,{data:t,columns:a||y,scroll:!0,topBarActions:b,isLoading:u,isFetching:h,sorting:[{id:"retirementStatementIssueDate",desc:!0}]})]})};export{me as RetiredStatementsGrid,me as default};
