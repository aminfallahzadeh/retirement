import{r,G as ls,h as ts,H as rs,J as rn,K as zs,N as ee,O as M,Q as on,A as se,j as e,B as qe,k as Ue,S as L,U as R,V as p,W as U,a as u,w as Ke,X as os,Y as bs,D as i,e as js,u as Is,Z as Cs,I as ie,T as Ie,R as vs,P as Ds,C as Bs,b as Ss,L as _s,F as ks,d as Os,_ as cn,$ as pn,a0 as Ys,a1 as un,a2 as be,a3 as dn,a4 as Ps,a5 as Ns,a6 as ue,a7 as de,a8 as he,a9 as me,p as mn,aa as hn,ab as xn,ac as Ws,ad as xs,ae as gn,o as jn,af as Nn,ag as yn,ah as Ks,ai as fs,aj as Es,ak as Vs,al as Qs,am as Js,an as qs,ao as as,ap as Zs,v as Xs,aq as gs,ar as fn,f as bn,E as en,as as $s,l as In,at as Cn,au as vn,av as Dn,aw as Bn,ax as Sn,ay as _n,az as kn,aA as Ms,aB as On,aC as Pn,aD as Fn,aE as Mn,aF as Ln,aG as Ls,aH as Rn}from"./index-Bx2CJIsO.js";import{E as Fs}from"./EditOutlined-D8f_vf14.js";import{I as Un}from"./Input-CjXyymLr.js";import{u as Tn,a as An,c as En,F as qn}from"./createTree-BVFQROj6.js";import{u as wn,S as $n}from"./SlipFormTemplate-BrApjzOj.js";import{A as Rs,a as Us,b as Ts,c as As}from"./ArrowDropDown-y0Gk9l3W.js";import"./index-Dog372Wr.js";function zn(){const[b,f]=r.useState(!1),c=ls(),[J,V]=r.useState([]),{handleSubmit:P,formState:{errors:$},control:H,register:z,watch:S,setValue:Z}=ts(),g=S(),Q=rs(),K=new URLSearchParams(Q.search).get("personID"),[v,{isLoading:G}]=rn(),[ae,{isLoading:a,isFetching:A}]=zs(),{lookUpItems:E,lookUpItemsIsLoading:ne,lookUpItemsIsFetching:s}=ee({lookUpType:"Bank"}),m=M(E,"lookUpID","lookUpName"),q=M(J,"lookUpID","lookUpName"),{data:F,isSuccess:te,isLoading:oe,isFetching:n,error:X}=on(K),_=r.useCallback(async h=>{try{const Y=await ae({lookUpType:"BankBranch",lookUpParentID:h}).unwrap();V(Y.itemList)}catch(Y){console.log(Y)}},[ae,V]);r.useEffect(()=>{te&&Object.keys(F).forEach(h=>{Z(h,F[h])})},[te,F,Z]),r.useEffect(()=>{var h;X&&se.error(((h=X==null?void 0:X.data)==null?void 0:h.message)||X.error,{autoClose:2e3})},[X]),r.useEffect(()=>{g.bankID&&_(g.bankID)},[g.bankID,_]);const d=()=>{f(!0)},t=async()=>{var h;try{const Y=await v({...g,ledgerCode:parseInt(i(g.ledgerCode))||null,insuranceAmount:parseFloat(i(g.insuranceAmount))||null,insuranceCoef:parseFloat(i(g.insuranceCoef))||null,accountNo:i(g.accountNo),personID:K}).unwrap();f(!1),se.success(Y.message,{autoClose:2e3})}catch(Y){console.log(Y),se.error(((h=Y==null?void 0:Y.data)==null?void 0:h.message)||Y.error,{autoClose:2e3})}};return r.useEffect(()=>{console.log(g)},[g]),e.jsx(e.Fragment,{children:oe||n?e.jsx(qe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Ue,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:P(t),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankID",control:H,render:({field:{onChange:h}})=>e.jsx(R,{closeMenuOnSelect:!0,components:c,options:m,onChange:Y=>h(Y?Y.value:null),isDisabled:!b,value:m.find(Y=>Y.value===(g==null?void 0:g.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:ne||s})}),e.jsx("label",{htmlFor:"bankID",className:g!=null&&g.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankBranchID",control:H,render:({field:{onChange:h}})=>e.jsx(R,{closeMenuOnSelect:!0,components:c,options:q,onChange:Y=>h(Y?Y.value:null),isDisabled:!b||a||A||!g.bankID,value:q.find(Y=>Y.value===(g==null?void 0:g.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:a||A})}),e.jsx("label",{htmlFor:"bankBranchID",className:g!=null&&g.bankBranchID&&q.some(h=>h.value===g.bankBranchID)?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[$.accountNo&&e.jsx("span",{className:"error-form",children:$.accountNo.message}),e.jsx("input",{disabled:!b||oe,type:"text",id:"accountNo",name:"accountNo",value:u(g==null?void 0:g.accountNo)??"",className:"inputBox__form--input",required:!0,...z("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"accountNo",className:"inputBox__form--label",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[$.ledgerCode&&e.jsx("span",{className:"error-form",children:$.ledgerCode.message}),e.jsx("input",{disabled:!b,type:"text",id:"ledgerCode",name:"ledgerCode",value:u(g==null?void 0:g.ledgerCode)??"",className:"inputBox__form--input",required:!0,...z("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"دفتر کل باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"ledgerCode",className:"inputBox__form--label",children:"دفتر کل"})]}),e.jsxs("div",{className:"inputBox__form",children:[$.insuranceCoef&&e.jsx("span",{className:"error-form",children:$.insuranceCoef.message}),e.jsx("input",{disabled:!b,type:"text",id:"insuranceCoef",name:"insuranceCoef",value:u(g==null?void 0:g.insuranceCoef)??"",className:"inputBox__form--input",required:!0,...z("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,٫][۰-۹0-9]+)?$/,message:"ضریب بیمه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceCoef",className:"inputBox__form--label",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[$.insuranceAmount&&e.jsx("span",{className:"error-form",children:$.insuranceAmount.message}),e.jsx("input",{disabled:!b,type:"text",id:"insuranceAmount",name:"insuranceAmount",value:u(g==null?void 0:g.insuranceAmount)??"",className:"inputBox__form--input",required:!0,...z("insuranceAmount",{pattern:{value:/^[۰-۹0-9]+$/,message:"بیمه تبعی باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"insuranceAmount",className:"inputBox__form--label",children:"بیمه تبعی"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),loading:G,disabled:!b,onClick:P,type:"submit",variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})}),e.jsx(bs,{dir:"ltr",endIcon:e.jsx(Fs,{}),onClick:d,disabled:b,variant:"contained",color:"primary",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ویرایش"})})]})]})})})}function Hs({statusHistoryTableData:b,isLoading:f,isFetching:c,handleRefresh:J}){const[V,P]=r.useState({pageIndex:0,pageSize:3}),$=r.useMemo(()=>[{accessorKey:"pensionaryStatusRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:S})=>e.jsx("div",{children:u(S)})},{accessorKey:"pensionaryStatusName",header:"وضعیت",size:20,Cell:({renderedCellValue:S})=>e.jsx("div",{children:u(S)})},{accessorKey:"pensionaryStartdate",header:"تاریخ شروع",size:20,Cell:({renderedCellValue:S})=>e.jsx("div",{children:js(S)})},{accessorKey:"isActive",header:"وضعیت",size:20,Cell:({renderedCellValue:S})=>e.jsx("div",{children:S===!0?"فعال":"غیرفعال"})}],[]),H=Is({...Cs,columns:$,data:b,muiTopToolbarProps:{sx:{overflow:"none"}},muiTableBodyRowProps:({row:S})=>({sx:{backgroundColor:S.original.isActive?"#00FF00":""}}),muiTableHeadProps:{sx:{zIndex:0}},renderTopToolbarCustomActions:()=>e.jsx(qe,{children:f||c?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"info",onClick:J,children:e.jsx(vs,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:S=>e.jsx(Ds,{...S,page:u(S.page),slots:{previous:Bs,next:Ss,first:_s,last:ks}})},initialState:{density:"compact",sorting:[{id:"isActive",desc:!0}]},onPaginationChange:P,state:{pagination:V}});return e.jsx(Os,{table:H})}function Yn(){const b=r.useRef(null),f=r.useRef(null),[c,J]=r.useState(!1),V=ls(),[P,$]=r.useState(null),[H,z]=r.useState(null),[S,Z]=r.useState(!1),[g,Q]=r.useState(!1),[x,K]=r.useState([]),{handleSubmit:v,formState:{errors:G},control:ae,register:a,watch:A,setValue:E,reset:ne}=ts(),s=A(),[m,{isLoading:q}]=cn(),te=new URLSearchParams(location.search).get("personID"),{personDeathDate:oe}=pn(w=>w.retiredState),{data:n,isSuccess:X,isLoading:_,isFetching:d,refetch:t,error:o}=Ys(te),{data:h,isSuccess:Y,isLoading:l,isFetching:Ne,error:le,refetch:ce}=un(te);r.useEffect(()=>{if(t(),X){const w=n==null?void 0:n.itemList.map((O,D)=>({id:O.pensionaryID,isActive:O.pensionaryIsActive,pensionaryStatusRowNum:D+1,pensionaryStatusName:O.pensionaryStatusName||"-",pensionaryStartdate:be(O.pensionaryStartdate)||"-"}));K(w)}return()=>{K([])}},[t,X,n]),r.useEffect(()=>{if(ce(),Y){const w=h==null?void 0:h.itemList[0];w&&Object.keys(w).forEach(O=>{E(O,w[O])})}return()=>{ne()}},[Y,h,E,ne,ce]),r.useEffect(()=>{var w;le&&(console.log(le),se.error(((w=le==null?void 0:le.data)==null?void 0:w.message)||le.error,{autoClose:2e3}))},[le]),r.useEffect(()=>{var w;o&&(console.log(o),se.error(((w=o==null?void 0:o.data)==null?void 0:w.message)||o.error,{autoClose:2e3}))},[o]);const{organizations:we,organizationIsLoading:Ce,organizationIsFetching:pe}=dn({}),{lookUpItems:ye,lookUpItemsIsLoading:Oe,lookUpItemsIsFetching:Te}=ee({lookUpType:"EmploymentType"}),{pensionaryStatus:ve,pensionaryStatusIsLoading:re,pensionaryStatusIsFetching:ge}=Ps({pensionaryStatusCategory:"R",pensionaryStatusIsDead:oe}),fe=M(we,"organizationID","organizationName"),De=M(ye,"lookUpID","lookUpName"),Be=M(ve,"pensionaryStatusID","pensionaryStatusName");r.useEffect(()=>{$(be(s==null?void 0:s.retirementDate))},[s==null?void 0:s.retirementDate]),r.useEffect(()=>{z(be(s==null?void 0:s.pensionaryStartDate))},[s==null?void 0:s.pensionaryStartDate]);const Se=()=>{J(!0)},xe=()=>{t()},Pe=w=>{Q(w)},Fe=w=>{Z(w)},Me=w=>{$(w),Q(!1)},Le=w=>{z(w),Z(!1)},Re=async()=>{var w;try{let O,D;P?(O=new Date(P),O.setMinutes(O.getMinutes()-O.getTimezoneOffset())):O=null,H?(D=new Date(H),D.setMinutes(D.getMinutes()-D.getTimezoneOffset())):D=null;const y=await m({...s,retiredGroup:parseInt(i(s.retiredGroup)),retiredOrganizationID:i(s.retiredOrganizationID),retiredJobDegreeCoef:parseInt(i(s.retiredJobDegreeCoef)),retiredRealDuration:parseInt(i(s.retiredRealDuration)),retiredGrantDuration:parseInt(i(s.retiredGrantDuration)),retirementDate:O,pensionaryStartDate:D,personID:te}).unwrap();ce(),J(!1),t(),se.success(y.message,{autoClose:2e3})}catch(O){console.log(O),se.error(((w=O==null?void 0:O.data)==null?void 0:w.message)||O.error,{autoClose:2e3})}};return Ns([b,f],[Q,Z]),e.jsx(e.Fragment,{children:l||Ne?e.jsx(qe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Ue,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:v(Re),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[G.retiredGroup&&e.jsx("span",{className:"error-form",children:G.retiredGroup.message}),e.jsx("input",{disabled:!c,type:"text",id:"retiredGroup",name:"retiredGroup",className:"inputBox__form--input",value:u(s==null?void 0:s.retiredGroup)??"",required:!0,...a("retiredGroup",{required:"گروه اجباری است",pattern:{value:/^[۰-۹0-9]+$/,message:"گروه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{htmlFor:"retiredGroup",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," گروه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"retiredOrganizationID",control:ae,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(R,{closeMenuOnSelect:!0,components:V,options:fe,onChange:O=>w(O?O.value:null),isDisabled:!c,value:fe.find(O=>O.value===(s==null?void 0:s.retiredOrganizationID)),name:"retiredOrganizationID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Ce||pe})}),e.jsxs("label",{className:s!=null&&s.retiredOrganizationID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," آخرین محل خدمت"]}),G.retiredOrganizationID&&e.jsx("span",{className:"error-form",children:" محل خدمت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[G.retiredLastPosition&&e.jsx("span",{className:"error-form",children:G.retiredLastPosition.message}),e.jsx("input",{disabled:!c,type:"text",id:"retiredLastPosition",name:"retiredLastPosition",value:(s==null?void 0:s.retiredLastPosition)||"",className:"inputBox__form--input",required:!0,...a("retiredLastPosition",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"retiredLastPosition",className:"inputBox__form--label",children:"سمت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"employmentTypeID",control:ae,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(R,{closeMenuOnSelect:!0,components:V,options:De,onChange:O=>w(O?O.value:null),isDisabled:!c,value:De.find(O=>O.value===(s==null?void 0:s.employmentTypeID)),name:"employmentTypeID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Oe||Te})}),e.jsxs("label",{className:s!=null&&s.employmentTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نوع استخدام"]}),G.employmentTypeID&&e.jsx("span",{className:"error-form",children:"نوع استخدام اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!c,value:P,defaultValue:null,onChange:Me,onOpenChange:Pe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:g,style:he,wrapperStyle:me,pickerProps:{ref:b}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ بازنشستگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"pensionaryStatusID",control:ae,rules:{required:!0},render:({field:{onChange:w}})=>e.jsx(R,{closeMenuOnSelect:!0,components:V,options:Be,onChange:O=>w(O?O.value:null),isDisabled:!c,value:Be.find(O=>O.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:re||ge})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت"]}),G.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!c,value:H,defaultValue:null,onChange:Le,onOpenChange:Fe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:S,style:he,wrapperStyle:me,pickerProps:{ref:f}}),e.jsxs("div",{className:"inputBox__form--readOnly-label",children:[e.jsx("span",{children:"*"})," تاریخ تغییر وضعیت"]})]}),e.jsxs("div",{className:"inputBox__form",children:[G.retiredJobDegreeCoef&&e.jsx("span",{className:"error-form",children:G.retiredJobDegreeCoef.message}),e.jsx("input",{disabled:!c,type:"text",id:"retiredJobDegreeCoef",className:"inputBox__form--input",value:u(s==null?void 0:s.retiredJobDegreeCoef)??"",name:"retiredJobDegreeCoef",required:!0,...a("retiredJobDegreeCoef",{pattern:{value:/^[۰-۹0-9]+$/,message:"ضریب مدیریتی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredJobDegreeCoef",className:"inputBox__form--label",children:"ضریب مدیریتی"})]}),e.jsxs("div",{className:"inputBox__form",children:[G.retiredRealDuration&&e.jsx("span",{className:"error-form",children:G.retiredRealDuration.message}),e.jsx("input",{disabled:!c,type:"text",id:"retiredRealDuration",className:"inputBox__form--input",value:u(s==null?void 0:s.retiredRealDuration)??"",name:"retiredRealDuration",required:!0,...a("retiredRealDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابفه حقیقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredRealDuration",className:"inputBox__form--label",children:"سابقه حقیقی بازنشسته"})]}),e.jsxs("div",{className:"inputBox__form",children:[G.retiredGrantDuration&&e.jsx("span",{className:"error-form",children:G.retiredGrantDuration.message}),e.jsx("input",{disabled:!c,type:"text",id:"retiredGrantDuration",className:"inputBox__form--input",value:u(s==null?void 0:s.retiredGrantDuration)??"",name:"retiredGrantDuration",required:!0,...a("retiredGrantDuration",{pattern:{value:/^[۰-۹0-9]+$/,message:"سابقه ارفاقی باید شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"retiredGrantDuration",className:"inputBox__form--label",children:"سابقه ارفاقی بازنشسته"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Hs,{statusHistoryTableData:x,isLoading:_,isFetching:d,handleRefresh:xe}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),loading:q,disabled:!c,type:"submit",onClick:v,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})}),e.jsx(bs,{dir:"ltr",endIcon:e.jsx(Fs,{}),onClick:Se,disabled:c,variant:"contained",color:"primary",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ویرایش"})})]})]})})})}function Hn(){const b=r.useRef(null),f=r.useRef(null),[c,J]=r.useState(!1),[V,P]=r.useState(!1),[$,H]=r.useState(!1),z=ls(),S=mn(),g=new URLSearchParams(location.search).get("personID"),{handleSubmit:Q,formState:{errors:x},control:K,register:v,watch:G,setValue:ae}=ts(),a=G(),[A,{isLoading:E}]=hn(),{data:ne,isLoading:s,isFetching:m,isSuccess:q,error:F,refetch:te}=xn(g);r.useEffect(()=>{if(q){const D=ne==null?void 0:ne.itemList[0];D&&(Object.keys(D).forEach(y=>{ae(y,D[y])}),S(Ws((D==null?void 0:D.personDeathDate)!==null)))}return()=>{S(Ws(null))}},[S,q,ne==null?void 0:ne.itemList,ae]),r.useEffect(()=>{console.log(a)},[a]),r.useEffect(()=>{var D;F&&se.error(((D=F==null?void 0:F.data)==null?void 0:D.message)||F.error,{autoClose:2e3})},[F]);const{lookUpItems:oe,lookUpItemsIsLoading:n,lookUpItemsIsFetching:X}=ee({lookUpType:"Gender"}),{lookUpItems:_,lookUpItemsIsLoading:d,lookUpItemsIsFetching:t}=ee({lookUpType:"EducationType"}),{lookUpItems:o,lookUpItemsIsLoading:h,lookUpItemsIsFetching:Y}=ee({lookUpType:"Country"}),{lookUpItems:l,lookUpItemsIsLoading:Ne,lookUpItemsIsFetching:le}=ee({lookUpType:"State"}),{lookUpItems:ce,lookUpItemsIsLoading:we,lookUpItemsIsFetching:Ce}=ee({lookUpType:"City"}),{lookUpItems:pe,lookUpItemsIsLoading:ye,lookUpItemsIsFetching:Oe}=ee({lookUpType:"HousingType"}),{lookUpItems:Te,lookUpItemsIsLoading:ve,lookUpItemsIsFetching:re}=ee({lookUpType:"MaritialStatus"}),ge=M(oe,"lookUpID","lookUpName"),fe=M(_,"lookUpID","lookUpName"),De=M(l,"lookUpID","lookUpName"),Be=M(o,"lookUpID","lookUpName"),Se=M(ce,"lookUpID","lookUpName"),xe=M(pe,"lookUpID","lookUpName"),Pe=M(Te,"lookUpID","lookUpName"),Fe=()=>{J(!0)},Me=D=>{ae("personBirthDate",D),P(!1)},Le=D=>{ae("personDeathDate",D),H(!1)},Re=D=>{P(D)},Ae=D=>{H(D)},w=async()=>{var D;try{let y,je;a.personDeathDate?(y=new Date(a.personDeathDate),y.setMinutes(y.getMinutes()-y.getTimezoneOffset())):y=null,a.personBirthDate?(je=new Date(a.personBirthDate),je.setMinutes(je.getMinutes()-je.getTimezoneOffset())):je=null;const $e=await A({...a,personNationalCode:i(a.personNationalCode),personCertificateNo:i(a.personCertificateNo),genderID:i(a.genderID),personPhone:i(a.personPhone),personCellPhone:i(a.personCellPhone),personCellPhone2:i(a.personCellPhone2),personRegion:parseInt(i(a.personRegion)),educationTypeID:i(a.educationTypeID),personCountryID:i(a.personCountryID),personCityID:i(a.personCityID),personStateID:i(a.personStateID),personArea:parseInt(i(a.personArea)),personPostalCode:i(a.personPostalCode),housingTypeID:i(a.housingTypeID),maritalStatusID:i(a.maritalStatusID),personBirthDate:je,personDeathDate:y}).unwrap();te(),J(!1),se.success($e.message,{autoClose:2e3})}catch(y){console.log(y),se.error(((D=y==null?void 0:y.data)==null?void 0:D.message)||y.error,{autoClose:2e3})}};return Ns([b,f],[P,H]),r.useEffect(()=>{console.log(a)},[a]),e.jsx(e.Fragment,{children:s||m?e.jsx(qe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Ue,{color:"primary"})}):e.jsx("section",{className:"flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:Q(w),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-4",children:[e.jsx(Un,{name:"personFirstName",label:"نام",rules:{required:"نام را وارد کنید"},errors:x,required:!0,control:K,editable:c,type:"text"}),e.jsxs("div",{className:"inputBox__form",children:[x.personLastName&&e.jsx("span",{className:"error-form",children:x.personLastName.message}),e.jsx("input",{disabled:!c,type:"text",name:"personLastName",id:"personLastName",className:"inputBox__form--input",value:(a==null?void 0:a.personLastName)||"",required:!0,...v("personLastName",{required:"نام خانوادگی را وارد کنید",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{htmlFor:"personLastName",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personNationalCode&&e.jsx("span",{className:"error-form",children:x.personNationalCode.message}),e.jsx("input",{disabled:!c,type:"text",name:"personNationalCode",id:"personNationalCode",className:"inputBox__form--input",value:u(a==null?void 0:a.personNationalCode)??"",required:!0,...v("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{htmlFor:"personNationalCode",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personCertificateNo&&e.jsx("span",{className:"error-form",children:x.personCertificateNo.message}),e.jsx("input",{disabled:!c,type:"text",name:"personCertificateNo",id:"personCertificateNo",className:"inputBox__form--input",value:u(a==null?void 0:a.personCertificateNo)??"",required:!0,...v("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{htmlFor:"personCertificateNo",className:"inputBox__form--label",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personFatherName&&e.jsx("span",{className:"error-form",children:x.personFatherName.message}),e.jsx("input",{disabled:!c,type:"text",id:"personFatherName",name:"personFatherName",className:"inputBox__form--input",value:(a==null?void 0:a.personFatherName)||"",required:!0,...v("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"personFatherName",className:"inputBox__form--label",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"genderID",control:K,rules:{required:!0},render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:ge,onChange:y=>D(y?y.value:null),isDisabled:!c,value:ge.find(y=>y.value===(a==null?void 0:a.genderID)),isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," جنسیت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:n||X})}),e.jsxs("label",{className:a!=null&&a.genderID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," جنسیت"]}),x.genderID&&e.jsx("span",{className:"error-form",children:" جنسیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!c,value:a!=null&&a.personBirthDate?be(a.personBirthDate):null,defaultValue:null,format:"jYYYY/jMM/jDD",onChange:Me,onOpenChange:Re,suffixIcon:e.jsx(de,{color:"action"}),open:V,style:he,wrapperStyle:me,pickerProps:{ref:b}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personBirthPlace&&e.jsx("span",{className:"error-form",children:x.personBirthPlace.message}),e.jsx("input",{disabled:!c,type:"text",name:"personBirthPlace",id:"personBirthPlace",className:"inputBox__form--input",value:(a==null?void 0:a.personBirthPlace)||"",required:!0,...v("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"personBirthPlace",className:"inputBox__form--label",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personPreviousName&&e.jsx("span",{className:"error-form",children:x.personPreviousName.message}),e.jsx("input",{disabled:!c,type:"text",id:"personPreviousName",name:"personPreviousName",className:"inputBox__form--input",value:(a==null?void 0:a.personPreviousName)||"",required:!0,...v("personPreviousName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"personPreviousName",className:"inputBox__form--label",children:"نام و نام خانوادگی قبلی"})]}),e.jsxs("div",{className:c?"checkboxContainer col-span-3":"checkboxContainer--disabled col-span-3",children:[e.jsx("p",{className:"inputBox__form--readOnly-label",children:"وضعیت ایثارگری:"}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,checked:!!(a!=null&&a.personIsSacrificedFamily),name:"personIsSacrificedFamily",id:"personIsSacrificedFamily",sx:{padding:.5},...v("personIsSacrificedFamily")}),e.jsx("label",{htmlFor:"personIsSacrificedFamily",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"خانواده شهید"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,id:"personIsWarrior",name:"personIsWarrior",checked:!!(a!=null&&a.personIsWarrior),sx:{padding:.5},...v("personIsWarrior")}),e.jsx("label",{htmlFor:"personIsWarrior",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"رزمنده"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,id:"personIsChildOfSacrificed",name:"personIsChildOfSacrificed",checked:!!(a!=null&&a.personIsChildOfSacrificed),sx:{padding:.5},...v("personIsChildOfSacrificed")}),e.jsx("label",{htmlFor:"personIsChildOfSacrificed",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"فرزند شهید"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,id:"personIsValiant",name:"personIsValiant",checked:!!(a!=null&&a.personIsValiant),sx:{padding:.5},...v("personIsValiant")}),e.jsx("label",{htmlFor:"personIsValiant",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"جانباز"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,id:"personIsSacrificed",name:"personIsSacrificed",checked:!!(a!=null&&a.personIsSacrificed),sx:{padding:.5},...v("personIsSacrificed")}),e.jsx("label",{htmlFor:"personIsSacrificed",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"شهید"})]}),e.jsxs("div",{className:"checkboxContainer__item",children:[e.jsx(xs,{size:"small",color:"success",disabled:!c,id:"personIsCaptive",name:"personIsCaptive",checked:!!(a!=null&&a.personIsCaptive),sx:{padding:.5},...v("personIsCaptive")}),e.jsx("label",{htmlFor:"personIsCaptive",className:c?"checkboxContainer__label":"checkboxContainer__label--disabled",children:"آزاده"})]})]}),e.jsx("div",{className:"inputBox__form",children:e.jsxs("div",{className:"inputBox__form--readOnly-input",children:[e.jsx("div",{className:"inputBox__form--readOnly-label",children:"شماره بازنشستگی"}),e.jsx("div",{className:"inputBox__form--readOnly-content",children:u(a==null?void 0:a.retiredID)||"-"})]})}),e.jsxs("div",{className:"inputBox__form",children:[x.personPhone&&e.jsx("span",{className:"error-form",children:x.personPhone.message}),e.jsx("input",{disabled:!c,type:"text",id:"personPhone",name:"personPhone",className:"inputBox__form--input",value:u(a==null?void 0:a.personPhone)??"",required:!0,...v("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"personPhone",className:"inputBox__form--label",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personCellPhone&&e.jsx("span",{className:"error-form",children:x.personCellPhone.message}),e.jsx("input",{disabled:!c,type:"text",id:"personCellPhone",name:"personCellPhone",className:"inputBox__form--input",value:u(a==null?void 0:a.personCellPhone)??"",required:!0,...v("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{htmlFor:"personCellPhone",className:"inputBox__form--label",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personCellPhone2&&e.jsx("span",{className:"error-form",children:x.personCellPhone2.message}),e.jsx("input",{disabled:!c,type:"text",id:"backupNum",name:"personCellPhone2",className:"inputBox__form--input",value:u(a==null?void 0:a.personCellPhone2)??"",required:!0,...v("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{htmlFor:"backupNum",className:"inputBox__form--label",children:"تلفن پشتیبان"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.backupFirstName&&e.jsx("span",{className:"error-form",children:x.backupFirstName.message}),e.jsx("input",{disabled:!c,type:"text",id:"backupName",value:(a==null?void 0:a.backupFirstName)||"",name:"backupFirstName",className:"inputBox__form--input",required:!0,...v("backupFirstName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"backupName",className:"inputBox__form--label",children:"نام پشتیبان"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.backupLastName&&e.jsx("span",{className:"error-form",children:x.backupLastName.message}),e.jsx("input",{disabled:!c,type:"text",id:"backupLname",value:(a==null?void 0:a.backupLastName)||"",name:"backupLastName",className:"inputBox__form--input",required:!0,...v("backupLastName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{htmlFor:"backupLname",className:"inputBox__form--label",children:"نام خانوادگی پشتیبان"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personEmail&&e.jsx("span",{className:"error-form",children:x.personEmail.message}),e.jsx("input",{disabled:!c,type:"text",id:"personEmail",value:(a==null?void 0:a.personEmail)||"",name:"personEmail",className:"inputBox__form--input",required:!0,...v("personEmail",{pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"ایمیل نامعتبر است"}})}),e.jsx("label",{htmlFor:"personEmail",className:"inputBox__form--label",children:"پست الکترونیک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"educationTypeID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:fe,onChange:y=>D(y?y.value:null),isDisabled:!c,value:fe.find(y=>y.value===(a==null?void 0:a.educationTypeID)),isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:d||t})}),e.jsx("label",{className:a!=null&&a.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCountryID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:Be,onChange:y=>D(y?y.value:null),isDisabled:!c,value:Be.find(y=>y.value===(a==null?void 0:a.personCountryID)),isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:h||Y,"aria-label":"country"})}),e.jsx("label",{className:a!=null&&a.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personStateID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:De,onChange:y=>D(y?y.value:null),isDisabled:!c,value:De.find(y=>y.value===(a==null?void 0:a.personStateID)),isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Ne||le})}),e.jsx("label",{className:a!=null&&a.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCityID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:Se,onChange:y=>D(y?y.value:null),isDisabled:!c,value:Se.find(y=>y.value===(a==null?void 0:a.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:we||Ce})}),e.jsx("label",{className:a!=null&&a.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personRegion&&e.jsx("span",{className:"error-form",children:x.personRegion.message}),e.jsx("input",{disabled:!c,type:"text",id:"personRegion",value:u(a==null?void 0:a.personRegion)??"",name:"personRegion",className:"inputBox__form--input",required:!0,...v("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"personRegion",className:"inputBox__form--label",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personArea&&e.jsx("span",{className:"error-form",children:x.personArea.message}),e.jsx("input",{disabled:!c,type:"text",id:"personArea",value:u(a==null?void 0:a.personArea)??"",name:"personArea",className:"inputBox__form--input",required:!0,...v("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{htmlFor:"personArea",className:"inputBox__form--label",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[x.personPostalCode&&e.jsx("span",{className:"error-form",children:x.personPostalCode.message}),e.jsx("input",{disabled:!c,type:"text",id:"personPostalCode",value:u(a==null?void 0:a.personPostalCode)??"",name:"personPostalCode",className:"inputBox__form--input",required:!0,...v("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{htmlFor:"personPostalCode",className:"inputBox__form--label",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"housingTypeID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:xe,onChange:y=>D(y?y.value:null),isDisabled:!c,value:xe.find(y=>y.value===(a==null?void 0:a.housingTypeID)),name:"housingTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت مسکن"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:ye||Oe})}),e.jsx("label",{className:a!=null&&a.housingTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت مسکن"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"maritalStatusID",control:K,render:({field:{onChange:D}})=>e.jsx(R,{closeMenuOnSelect:!0,components:z,options:Pe,onChange:y=>D(y?y.value:null),value:Pe.find(y=>y.value===(a==null?void 0:a.maritalStatusID)),isDisabled:!c,name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:ve||re})}),e.jsx("label",{className:a!=null&&a.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{disabled:!c,value:a.personDeathDate?be(a.personDeathDate):null,format:"jYYYY/jMM/jDD",onChange:Le,onOpenChange:Ae,open:$,suffixIcon:e.jsx(de,{color:"action"}),style:he,wrapperStyle:me,pickerProps:{ref:f}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ فوت"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[x.personAddress&&e.jsx("span",{className:"error-form",children:x.personAddress.message}),e.jsx("textarea",{disabled:!c,type:"text",id:"personAddress",value:u(a==null?void 0:a.personAddress)||"",name:"personAddress",className:"inputBox__form--input",required:!0,...v("personAddress",{})}),e.jsx("label",{htmlFor:"personAddress",className:"inputBox__form--label",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form row-col-span-3",children:[x.personDescription&&e.jsx("span",{className:"error-form",children:x.personDescription.message}),e.jsx("textarea",{disabled:!c,id:"personDescription",value:u(a==null?void 0:a.personDescription)||"",name:"personDescription",className:"inputBox__form--input",required:!0,...v("personDescription",{})}),e.jsx("label",{htmlFor:"personDescription",className:"inputBox__form--label",children:"توضیحات"})]})]}),e.jsxs("div",{style:{marginRight:"auto"},className:"flex-row",children:[e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),loading:E,disabled:!c,onClick:Q,variant:"contained",type:"submit",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})}),e.jsx(bs,{dir:"ltr",endIcon:e.jsx(Fs,{}),onClick:Fe,disabled:c,variant:"contained",color:"primary",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ویرایش"})})]})]})})})}const Gn=()=>{const[b]=gn(),[f,c]=r.useState([]),[J,V]=r.useState([]),P=b.get("personID"),{data:$,isLoading:H,isSuccess:z,refetch:S}=Tn(),{data:Z,isLoading:g,isSuccess:Q,refetch:x}=An(P);r.useEffect(()=>{Q&&V(Z.itemList)},[Q,Z]),r.useEffect(()=>{if(z){const v=En($.itemList);c(v)}},[z,$]);const K=r.useCallback(()=>{S(),x()},[S,x]);return e.jsx(qn,{structure:f,files:J,isLoading:H||g,refetch:K,access:"files"})},Wn=({title:b})=>{const f=jn();return e.jsxs("div",{className:"title-primary--container flex-row flex-center",children:[e.jsx("h4",{className:"title-primary",children:e.jsx("span",{className:"title-primary--underline",children:b})}),e.jsx("div",{style:{marginRight:"auto"},className:"back-button",children:e.jsx(Ie,{title:Nn,children:e.jsx("span",{children:e.jsx(ie,{color:"primary",onClick:()=>f(-1),children:e.jsx(yn,{})})})})})]})},Kn=Ks.injectEndpoints({endpoints:b=>({getRelatedListByParentPersonID:b.query({query:f=>({url:`${fs}/GetRelatedListByParentPersonID?parentPersonID=${f}`})}),getRelated:b.query({query:f=>({url:`${fs}/GetRelated?personID=${f}`})}),insertRelated:b.mutation({query:f=>({url:`${fs}/InsertRelated`,method:"POST",body:f})}),updateRelated:b.mutation({query:f=>({url:`${fs}/UpdateRelated`,method:"POST",body:f})}),removeRelated:b.mutation({query:({pensionaryID:f})=>({url:`${fs}/RemoveRelated?pensionaryID=${f}`,method:"POST"})})})}),{useGetRelatedListByParentPersonIDQuery:Vn,useGetRelatedQuery:Qn,useInsertRelatedMutation:Jn,useUpdateRelatedMutation:Zn,useRemoveRelatedMutation:Xn}=Kn;function ea({setShowCreateRelatedModal:b,refetch:f}){const c=r.useRef(null),J=r.useRef(null),V=r.useRef(null),P=r.useRef(null),$=r.useRef(null),[H,z]=r.useState(null),[S,Z]=r.useState(null),[g,Q]=r.useState(null),[x,K]=r.useState(null),[v,G]=r.useState(null),[ae,a]=r.useState(!1),[A,E]=r.useState(!1),[ne,s]=r.useState(!1),[m,q]=r.useState(!1),[F,te]=r.useState(!1),{handleSubmit:oe,formState:{errors:n},control:X,register:_,watch:d}=ts(),t=d(),[o,{isLoading:h}]=Jn(),Y=rs(),Ne=new URLSearchParams(Y.search).get("personID"),le=ls(),{relationships:ce,relationshipIsLoading:we,relationshipIsFetching:Ce}=Es(),{pensionaryStatus:pe,pensionaryStatusIsLoading:ye,pensionaryStatusIsFetching:Oe}=Ps({pensionaryStatusCategory:"L"}),{lookUpItems:Te,lookUpItemsIsLoading:ve,lookUpItemsIsFetching:re}=ee({lookUpType:"MaritialStatus"}),{lookUpItems:ge,lookUpItemsIsLoading:fe,lookUpItemsIsFetching:De}=ee({lookUpType:"EducationType"}),{lookUpItems:Be,lookUpItemsIsLoading:Se,lookUpItemsIsFetching:xe}=ee({lookUpType:"UniversityType"}),{lookUpItems:Pe,lookUpItemsIsLoading:Fe,lookUpItemsIsFetching:Me}=ee({lookUpType:"Country"}),{lookUpItems:Le,lookUpItemsIsLoading:Re,lookUpItemsIsFetching:Ae}=ee({lookUpType:"State"}),{lookUpItems:w,lookUpItemsIsLoading:O,lookUpItemsIsFetching:D}=ee({lookUpType:"City"}),y=M(ce,"relationshipID","relationshipName"),je=M(pe,"pensionaryStatusID","pensionaryStatusName"),$e=M(Te,"lookUpID","lookUpName"),Ve=M(ge,"lookUpID","lookUpName"),Qe=M(Be,"lookUpID","lookUpName"),Je=M(Pe,"lookUpID","lookUpName"),Ze=M(Le,"lookUpID","lookUpName"),He=M(w,"lookUpID","lookUpName"),ns=T=>{z(T),E(!1)},W=T=>{Z(T),s(!1)},N=T=>{Q(T),q(!1)},_e=T=>{K(T),te(!1)},ke=T=>{G(T),a(!1)},Xe=T=>{E(T)},is=T=>{s(T)},Ge=T=>{a(T)},cs=T=>{q(T)},ps=T=>{te(T)},us=async()=>{var T;try{let I,Ee,ze,We,B;H?(I=new Date(H),I.setMinutes(I.getMinutes()-I.getTimezoneOffset())):I=null,v?(B=new Date(v),B.setMinutes(B.getMinutes()-B.getTimezoneOffset())):B=null,S?(Ee=new Date(S),Ee.setMinutes(Ee.getMinutes()-Ee.getTimezoneOffset())):Ee=null,g?(ze=new Date(g),ze.setMinutes(ze.getMinutes()-ze.getTimezoneOffset())):ze=null,x?(We=new Date(x),We.setMinutes(We.getMinutes()-We.getTimezoneOffset())):We=null;const j=await o({...t,parentPersonID:Ne,relationshipWithParentID:i(t.relationshipWithParentID),personCertificateNo:i(t.personCertificateNo),personNationalCode:i(t.personNationalCode),pensionaryStatusID:i(t.pensionaryStatusID),maritalStatusID:i(t.maritalStatusID),educationTypeID:i(t.educationTypeID),universityID:i(t.universityID),personPhone:i(t.personPhone),personCellPhone:i(t.personCellPhone),personCellPhone2:i(t.personCellPhone2),personRegion:parseInt(i(t.personRegion))||null,personArea:parseInt(i(t.personArea))||null,personCountryID:i(t.personCountryID),personCityID:i(t.personCityID),personStateID:i(t.personStateID),personPostalCode:i(t.personPostalCode),backupPhone:i(t.backupPhone),backupCellphone:i(t.backupCellphone),personBirthDate:I,personMaritalDate:Ee,selfEmployeeStartDate:ze,selfEmployeeEndDate:We,pensionaryStartDate:B}).unwrap();b(!1),f(),se.success(j.message,{autoClose:2e3})}catch(I){console.log(I),se.error(((T=I==null?void 0:I.data)==null?void 0:T.message)||I.error,{autoClose:2e3})}};return Ns([c,J,V,P,$],[E,s,q,te,a]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:oe(us),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"relationshipWithParentID",control:X,rules:{required:!0},render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:y,onChange:I=>T(I?I.value:null),value:y.find(I=>I.value===(t==null?void 0:t.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:we||Ce})}),e.jsxs("label",{className:t!=null&&t.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),n.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFirstName&&e.jsx("span",{className:"error-form",children:n.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,..._("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personLastName&&e.jsx("span",{className:"error-form",children:n.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,..._("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personNationalCode&&e.jsx("span",{className:"error-form",children:n.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(t==null?void 0:t.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,..._("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCertificateNo&&e.jsx("span",{className:"error-form",children:n.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(t==null?void 0:t.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,..._("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personFatherName&&e.jsx("span",{className:"error-form",children:n.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,..._("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:H,onChange:ns,format:"jYYYY/jMM/jDD",onOpenChange:Xe,suffixIcon:e.jsx(de,{color:"action"}),open:A,style:he,wrapperStyle:me,pickerProps:{ref:c}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:S,onChange:W,format:"jYYYY/jMM/jDD",onOpenChange:is,suffixIcon:e.jsx(de,{color:"action"}),open:ne,style:he,wrapperStyle:me,pickerProps:{ref:J}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personBirthPlace&&e.jsx("span",{className:"error-form",children:n.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,..._("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"pensionaryStatusID",control:X,rules:{required:!0},render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:je,onChange:I=>T(I?I.value:null),value:je.find(I=>I.value===(t==null?void 0:t.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:ye||Oe})}),e.jsxs("label",{className:t!=null&&t.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),n.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:v,defaultValue:null,onChange:ke,onOpenChange:Ge,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:ae,style:he,wrapperStyle:me,pickerProps:{ref:$}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"maritalStatusID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:$e,onChange:I=>T(I?I.value:null),value:$e.find(I=>I.value===(t==null?void 0:t.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:ve||re})}),e.jsx("label",{className:t!=null&&t.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"educationTypeID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:Ve,onChange:I=>T(I?I.value:null),value:Ve.find(I=>I.value===(t==null?void 0:t.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:fe||De})}),e.jsx("label",{className:t!=null&&t.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.educationTypeCaption&&e.jsx("span",{className:"error-form",children:n.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,..._("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"universityID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:Qe,onChange:I=>T(I?I.value:null),value:Qe.find(I=>I.value===(t==null?void 0:t.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Se||xe})}),e.jsx("label",{className:t!=null&&t.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.universityCaption&&e.jsx("span",{className:"error-form",children:n.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(t==null?void 0:t.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,..._("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone&&e.jsx("span",{className:"error-form",children:n.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:(t==null?void 0:t.personCellPhone)||"",id:"personCellPhone1",required:!0,..._("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personCellPhone2&&e.jsx("span",{className:"error-form",children:n.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:(t==null?void 0:t.personCellPhone2)||"",id:"personCellPhone22",required:!0,..._("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPhone&&e.jsx("span",{className:"error-form",children:n.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:(t==null?void 0:t.personPhone)||"",id:"personPhone1",required:!0,..._("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personRegion&&e.jsx("span",{className:"error-form",children:n.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:(t==null?void 0:t.personRegion)||"",id:"personRegion1",required:!0,..._("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personArea&&e.jsx("span",{className:"error-form",children:n.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:(t==null?void 0:t.personArea)||"",id:"personArea1",required:!0,..._("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCountryID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:Je,onChange:I=>T(I?I.value:null),value:Je.find(I=>I.value===(t==null?void 0:t.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Fe||Me})}),e.jsx("label",{className:t!=null&&t.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personStateID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:Ze,onChange:I=>T(I?I.value:null),value:Ze.find(I=>I.value===(t==null?void 0:t.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Re||Ae})}),e.jsx("label",{className:t!=null&&t.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCityID",control:X,render:({field:{onChange:T}})=>e.jsx(R,{closeMenuOnSelect:!0,components:le,options:He,onChange:I=>T(I?I.value:null),value:He.find(I=>I.value===(t==null?void 0:t.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:O||D})}),e.jsx("label",{className:t!=null&&t.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personPostalCode&&e.jsx("span",{className:"error-form",children:n.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:(t==null?void 0:t.personPostalCode)??"",id:"personPostalCode1",required:!0,..._("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.personSpecialDisease&&e.jsx("span",{className:"error-form",children:n.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(t==null?void 0:t.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,..._("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.personAddress&&e.jsx("span",{className:"error-form",children:n.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(t==null?void 0:t.personAddress)||"",id:"personAddress1",required:!0,..._("personAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[n.personDescription&&e.jsx("span",{className:"error-form",children:n.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",required:!0,name:"personDescription",value:(t==null?void 0:t.personDescription)||"",id:"personDescription1",..._("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[n.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:n.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(t==null?void 0:t.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,..._("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:N,format:"jYYYY/jMM/jDD",onOpenChange:cs,suffixIcon:e.jsx(de,{color:"action"}),open:m,style:he,wrapperStyle:me,pickerProps:{ref:V}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:x,onChange:_e,format:"jYYYY/jMM/jDD",onOpenChange:ps,suffixIcon:e.jsx(de,{color:"action"}),open:F,wrapperStyle:me,pickerProps:{ref:P}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[n.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:n.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(t==null?void 0:t.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,..._("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[n.backupFirstName&&e.jsx("span",{className:"error-form",children:n.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(t==null?void 0:t.backupFirstName)||"",id:"backupFirstName1",required:!0,..._("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupLastName&&e.jsx("span",{className:"error-form",children:n.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(t==null?void 0:t.backupLastName)||"",id:"backupLastName1",required:!0,..._("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupRelation&&e.jsx("span",{className:"error-form",children:n.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(t==null?void 0:t.backupRelation)||"",id:"backupRelation",required:!0,..._("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupPhone&&e.jsx("span",{className:"error-form",children:n.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:(t==null?void 0:t.backupPhone)||"",id:"backupPhone",required:!0,..._("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[n.backupCellphone&&e.jsx("span",{className:"error-form",children:n.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:(t==null?void 0:t.backupCellphone)||"",id:"backupCellphone",required:!0,..._("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[n.backupAddress&&e.jsx("span",{className:"error-form",children:n.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(t==null?void 0:t.backupAddress)||"",id:"backupAddress",required:!0,..._("backupAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),onClick:oe,loading:h,type:"submit",variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})})})]})})}function sa({setShowEditRelatedModal:b,personID:f,refetch:c}){const J=r.useRef(null),V=r.useRef(null),P=r.useRef(null),$=r.useRef(null),H=r.useRef(null),[z,S]=r.useState(null),[Z,g]=r.useState(null),[Q,x]=r.useState(null),[K,v]=r.useState(null),[G,ae]=r.useState(null),[a,A]=r.useState(!1),[E,ne]=r.useState(!1),[s,m]=r.useState(!1),[q,F]=r.useState(!1),[te,oe]=r.useState(!1),[n,X]=r.useState([]),{handleSubmit:_,formState:{errors:d},control:t,register:o,watch:h,setValue:Y}=ts(),l=h(),[Ne,{isLoading:le}]=Zn(),ce=ls(),Ce=new URLSearchParams(location.search).get("personID"),{data:pe,isSuccess:ye,isLoading:Oe,isFetching:Te,refetch:ve,error:re}=Ys(f),{data:ge,isSuccess:fe,isFetching:De,isLoading:Be,refetch:Se,error:xe}=Qn(f);r.useEffect(()=>{if(ve(),ye){const k=pe==null?void 0:pe.itemList.map((C,ss)=>({id:C.pensionaryID,pensionaryStatusRowNum:ss+1,isActive:C.pensionaryIsActive,pensionaryStatusName:C.pensionaryStatusName||"-",pensionaryStartdate:be(C.pensionaryStartdate)||"-"}));X(k)}return()=>{X([])}},[ve,ye,pe]),r.useEffect(()=>{Se(),fe&&Object.keys(ge).forEach(k=>{Y(k,ge[k])})},[fe,ge,Se,Y]),r.useEffect(()=>{var k;xe&&xe.status!=="FETCH_ERROR"&&se.error(((k=xe==null?void 0:xe.data)==null?void 0:k.message)||xe.error,{autoClose:2e3})},[xe]),r.useEffect(()=>{var k;re&&(console.log(re),se.error(((k=re==null?void 0:re.data)==null?void 0:k.message)||re.error,{autoClose:2e3}))},[re]);const{relationships:Pe,relationshipIsLoading:Fe,relationshipIsFetching:Me}=Es(),{pensionaryStatus:Le,pensionaryStatusIsLoading:Re,pensionaryStatusIsFetching:Ae}=Ps({pensionaryStatusCategory:"L"}),{lookUpItems:w,lookUpItemsIsLoading:O,lookUpItemsIsFetching:D}=ee({lookUpType:"MaritialStatus"}),{lookUpItems:y,lookUpItemsIsLoading:je,lookUpItemsIsFetching:$e}=ee({lookUpType:"EducationType"}),{lookUpItems:Ve,lookUpItemsIsLoading:Qe,lookUpItemsIsFetching:Je}=ee({lookUpType:"UniversityType"}),{lookUpItems:Ze,lookUpItemsIsLoading:He,lookUpItemsIsFetching:ns}=ee({lookUpType:"Country"}),{lookUpItems:W,lookUpItemsIsLoading:N,lookUpItemsIsFetching:_e}=ee({lookUpType:"State"}),{lookUpItems:ke,lookUpItemsIsLoading:Xe,lookUpItemsIsFetching:is}=ee({lookUpType:"City"}),Ge=M(Pe,"relationshipID","relationshipName"),cs=M(Le,"pensionaryStatusID","pensionaryStatusName"),ps=M(w,"lookUpID","lookUpName"),us=M(y,"lookUpID","lookUpName"),ys=M(Ve,"lookUpID","lookUpName"),T=M(Ze,"lookUpID","lookUpName"),I=M(W,"lookUpID","lookUpName"),Ee=M(ke,"lookUpID","lookUpName"),ze=k=>{S(k),A(!1)},We=k=>{g(k),ne(!1)},B=k=>{x(k),m(!1)},j=k=>{v(k),F(!1)},Ye=k=>{ae(k),oe(!1)},es=k=>{oe(k)},ws=k=>{A(k)},sn=k=>{ne(k)},nn=k=>{m(k)},an=k=>{F(k)};r.useEffect(()=>{S(be(l==null?void 0:l.personBirthDate))},[l==null?void 0:l.personBirthDate]),r.useEffect(()=>{g(be(l==null?void 0:l.personMaritalDate))},[l==null?void 0:l.personMaritalDate]),r.useEffect(()=>{x(be(l==null?void 0:l.selfEmployeeStartDate))},[l==null?void 0:l.selfEmployeeStartDate]),r.useEffect(()=>{v(be(l==null?void 0:l.selfEmployeeEndDate))},[l==null?void 0:l.selfEmployeeEndDate]);const ln=()=>{ve()},tn=async()=>{var k;try{let C,ss,ds,ms,hs;z?(C=new Date(z),C.setMinutes(C.getMinutes()-C.getTimezoneOffset())):C=null,G?(hs=new Date(G),hs.setMinutes(hs.getMinutes()-hs.getTimezoneOffset())):hs=null,Z?(ss=new Date(Z),ss.setMinutes(ss.getMinutes()-ss.getTimezoneOffset())):ss=null,Q?(ds=new Date(Q),ds.setMinutes(ds.getMinutes()-ds.getTimezoneOffset())):ds=null,K?(ms=new Date(K),ms.setMinutes(ms.getMinutes()-ms.getTimezoneOffset())):ms=null;const Gs=await Ne({...l,parentPersonID:Ce,relationshipWithParentID:i(l.relationshipWithParentID),personCertificateNo:i(l.personCertificateNo),personNationalCode:i(l.personNationalCode),pensionaryStatusID:i(l.pensionaryStatusID),maritalStatusID:i(l.maritalStatusID),educationTypeID:i(l.educationTypeID),universityID:i(l.universityID),personPhone:i(l.personPhone),personCellPhone:i(l.personCellPhone),personCellPhone2:i(l.personCellPhone2),personRegion:parseInt(i(l.personRegion))||null,personArea:parseInt(i(l.personArea))||null,personCountryID:i(l.personCountryID),personCityID:i(l.personCityID),personStateID:i(l.personStateID),personPostalCode:i(l.personPostalCode),backupPhone:i(l.backupPhone),backupCellphone:i(l.backupCellphone),personBirthDate:C,personMaritalDate:ss,selfEmployeeStartDate:ds,selfEmployeeEndDate:ms,pensionaryStartDate:hs}).unwrap();console.log(Gs),b(!1),c(),se.success(Gs.message,{autoClose:2e3})}catch(C){console.log(C),se.error(((k=C==null?void 0:C.data)==null?void 0:k.message)||C.error,{autoClose:2e3})}};return Ns([J,V,P,$,H],[A,ne,m,F,oe]),e.jsx(e.Fragment,{children:Be||De?e.jsx(qe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Ue,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:_(tn),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"relationshipWithParentID",control:t,rules:{required:!0},render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:Ge,onChange:C=>k(C?C.value:null),value:Ge.find(C=>C.value===(l==null?void 0:l.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Fe||Me})}),e.jsxs("label",{className:l!=null&&l.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),d.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFirstName&&e.jsx("span",{className:"error-form",children:d.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.personFirstName)||"",name:"personFirstName",id:"personFirstName2",required:!0,...o("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName2",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personLastName&&e.jsx("span",{className:"error-form",children:d.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...o("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personNationalCode&&e.jsx("span",{className:"error-form",children:d.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(l==null?void 0:l.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...o("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCertificateNo&&e.jsx("span",{className:"error-form",children:d.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(l==null?void 0:l.personCertificateNo)??"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...o("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personFatherName&&e.jsx("span",{className:"error-form",children:d.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...o("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:be(z),onChange:ze,format:"jYYYY/jMM/jDD",onOpenChange:ws,suffixIcon:e.jsx(de,{color:"action"}),open:a,style:he,wrapperStyle:me,pickerProps:{ref:J}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:Z,onChange:We,format:"jYYYY/jMM/jDD",onOpenChange:sn,suffixIcon:e.jsx(de,{color:"action"}),open:E,style:he,wrapperStyle:me,pickerProps:{ref:V}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ عقد"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personBirthPlace&&e.jsx("span",{className:"error-form",children:d.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...o("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"pensionaryStatusID",control:t,rules:{required:!0},render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:cs,onChange:C=>k(C?C.value:null),value:cs.find(C=>C.value===(l==null?void 0:l.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Re||Ae})}),e.jsxs("label",{className:l!=null&&l.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت وابسته"]}),d.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:"وضعیت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:G,defaultValue:null,onChange:Ye,onOpenChange:es,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:te,style:he,wrapperStyle:me,pickerProps:{ref:H}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"maritalStatusID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:ps,onChange:C=>k(C?C.value:null),value:ps.find(C=>C.value===(l==null?void 0:l.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:O||D})}),e.jsx("label",{className:l!=null&&l.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"educationTypeID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:us,onChange:C=>k(C?C.value:null),value:us.find(C=>C.value===(l==null?void 0:l.educationTypeID)),name:"educationTypeID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"مدرک تحصیلی"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:je||$e})}),e.jsx("label",{className:l!=null&&l.educationTypeID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"مدرک تحصیلی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.educationTypeCaption&&e.jsx("span",{className:"error-form",children:d.educationTypeCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.educationTypeCaption)||"",name:"educationTypeCaption",id:"educationTypeCaption",required:!0,...o("educationTypeCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"educationTypeCaption",children:"عنوان مدرک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"universityID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:ys,onChange:C=>k(C?C.value:null),value:ys.find(C=>C.value===(l==null?void 0:l.universityID)),name:"universityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"دانشگاه"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Qe||Je})}),e.jsx("label",{className:l!=null&&l.universityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"دانشگاه"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.universityCaption&&e.jsx("span",{className:"error-form",children:d.universityCaption.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(l==null?void 0:l.universityCaption)||"",name:"universityCaption",id:"universityCaption",required:!0,...o("universityCaption",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"universityCaption",children:"واحد دانشگاهی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCellPhone&&e.jsx("span",{className:"error-form",children:d.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:u(l==null?void 0:l.personCellPhone)??"",id:"personCellPhone1",required:!0,...o("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone1",children:"تلفن همراه ۱"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personCellPhone2&&e.jsx("span",{className:"error-form",children:d.personCellPhone2.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone2",value:u(l==null?void 0:l.personCellPhone2)??"",id:"personCellPhone22",required:!0,...o("personCellPhone2",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone22",children:"تلفن همراه ۲"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPhone&&e.jsx("span",{className:"error-form",children:d.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPhone",value:u(l==null?void 0:l.personPhone)||"",id:"personPhone1",required:!0,...o("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"},maxLength:{value:8,message:"تلفن ثابت باید ۸ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone1",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personRegion&&e.jsx("span",{className:"error-form",children:d.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:u(l==null?void 0:l.personRegion)??"",id:"personRegion1",required:!0,...o("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personArea&&e.jsx("span",{className:"error-form",children:d.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personArea",value:u(l==null?void 0:l.personArea)??"",id:"personArea1",required:!0,...o("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCountryID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:T,onChange:C=>k(C?C.value:null),value:T.find(C=>C.value===(l==null?void 0:l.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:He||ns})}),e.jsx("label",{className:l!=null&&l.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personStateID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:I,onChange:C=>k(C?C.value:null),value:I.find(C=>C.value===(l==null?void 0:l.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:N||_e})}),e.jsx("label",{className:l!=null&&l.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCityID",control:t,render:({field:{onChange:k}})=>e.jsx(R,{closeMenuOnSelect:!0,components:ce,options:Ee,onChange:C=>k(C?C.value:null),value:Ee.find(C=>C.value===(l==null?void 0:l.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Xe||is})}),e.jsx("label",{className:l!=null&&l.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personPostalCode&&e.jsx("span",{className:"error-form",children:d.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:u(l==null?void 0:l.personPostalCode)??"",id:"personPostalCode1",required:!0,...o("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.personSpecialDisease&&e.jsx("span",{className:"error-form",children:d.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(l==null?void 0:l.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...o("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[d.personAddress&&e.jsx("span",{className:"error-form",children:d.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personAddress",value:(l==null?void 0:l.personAddress)||"",id:"personAddress1",required:!0,...o("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[d.personDescription&&e.jsx("span",{className:"error-form",children:d.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"personDescription",value:(l==null?void 0:l.personDescription)||"",id:"personDescription1",required:!0,...o("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription1",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Hs,{statusHistoryTableData:n,isLoading:Oe,isFetching:Te,handleRefresh:ln}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات خویش فرمایی"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form col-span-2",children:[d.selfEmployeeTypeName&&e.jsx("span",{className:"error-form",children:d.selfEmployeeTypeName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"selfEmployeeTypeName",value:(l==null?void 0:l.selfEmployeeTypeName)||"",id:"selfEmployeeTypeName",required:!0,...o("selfEmployeeTypeName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeTypeName",children:"وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:Q,onChange:B,format:"jYYYY/jMM/jDD",onOpenChange:nn,suffixIcon:e.jsx(de,{color:"action"}),open:s,style:he,wrapperStyle:me,pickerProps:{ref:P}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ شروع"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:K,onChange:j,format:"jYYYY/jMM/jDD",onOpenChange:an,suffixIcon:e.jsx(de,{color:"action"}),open:q,style:he,wrapperStyle:me,pickerProps:{ref:$}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ پایان"})]}),e.jsxs("div",{className:"inputBox__form col-span-4",children:[d.selfEmployeeDesc&&e.jsx("span",{className:"error-form",children:d.selfEmployeeDesc.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",name:"selfEmployeeDesc",value:(l==null?void 0:l.selfEmployeeDesc)||"",id:"selfEmployeeDesc",required:!0,...o("selfEmployeeDesc",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"selfEmployeeDesc",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:"اطلاعات پشتیبان"})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[d.backupFirstName&&e.jsx("span",{className:"error-form",children:d.backupFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupFirstName",value:(l==null?void 0:l.backupFirstName)||"",id:"backupFirstName1",required:!0,...o("backupFirstName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupFirstName1",children:"نام"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.backupLastName&&e.jsx("span",{className:"error-form",children:d.backupLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupLastName",value:(l==null?void 0:l.backupLastName)||"",id:"backupLastName1",required:!0,...o("backupLastName",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupLastName1",children:"نام خانوادگی"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.backupRelation&&e.jsx("span",{className:"error-form",children:d.backupRelation.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupRelation",value:(l==null?void 0:l.backupRelation)||"",id:"backupRelation",required:!0,...o("backupRelation",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupRelation",children:"نسبت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.backupPhone&&e.jsx("span",{className:"error-form",children:d.backupPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupPhone",value:u(l==null?void 0:l.backupPhone)??"",id:"backupPhone",required:!0,...o("backupPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupPhone",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[d.backupCellphone&&e.jsx("span",{className:"error-form",children:d.backupCellphone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupCellphone",value:u(l==null?void 0:l.backupCellphone)??"",id:"backupCellphone",required:!0,...o("backupCellphone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن همراه باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه ثابت باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupCellphone",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[d.backupAddress&&e.jsx("span",{className:"error-form",children:d.backupAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"backupAddress",value:(l==null?void 0:l.backupAddress)||"",id:"backupAddress",required:!0,...o("backupAddress",{pattern:{value:/^[آ-ی\s۰-۹]+$/,message:"از حروف و اعداد فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"backupAddress",children:"نشانی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),variant:"contained",onClick:_,type:"submit",loading:le,color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})})})]})})})}function na(){const[b,f]=r.useState({}),[c,J]=r.useState([]),[V,P]=r.useState(!1),[$,H]=r.useState(!1),[z,S]=r.useState(!1),[Z,g]=r.useState(""),[Q,x]=r.useState(""),[K,{isLoading:v}]=Xn(),G=rs(),a=new URLSearchParams(G.search).get("personID"),{data:A,isSuccess:E,isLoading:ne,isFetching:s,refetch:m,error:q}=Vn(a);r.useEffect(()=>{if(m(),E){const o=A.itemList.map((h,Y)=>({id:h.personID,relatedRowNum:Y+1,pensionaryID:h.pensionaryID,relatedBirthDate:h.personBirthDate,relatedNtionalCode:h.personNationalCode,relatedFirstName:h.personFirstName,relatedLastName:h.personLastName,relatedStatus:h.pensionaryIsUnderGauranteeText,relation:h.relationshipWithParentName}));J(o)}},[E,A,m]),r.useEffect(()=>{var o;q&&(console.log(q),se.error(((o=q==null?void 0:q.data)==null?void 0:o.message)||q.error,{autoClose:2e3}))},[q]);const F=()=>{m()},te=()=>{P(!0)},oe=()=>{H(!0)},n=()=>{S(!0)},X=async()=>{var o;try{const h=await K({pensionaryID:Q}).unwrap();m(),S(!1),se.success(h.message,{autoClose:2e3})}catch(h){console.log(h),se.error(((o=h==null?void 0:h.data)==null?void 0:o.message)||h.error,{autoClose:2e3})}},_=r.useMemo(()=>[{accessorKey:"relatedRowNum",header:"ردیف",size:20,enableSorting:!1,enableColumnActions:!1,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(o)})},{accessorKey:"relatedNtionalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(o)})},{accessorKey:"relatedFirstName",header:"نام",size:20},{accessorKey:"relatedLastName",header:"نام خانوادگی",size:20},{accessorKey:"relatedStatus",header:"وضعیت",size:20},{accessorKey:"relatedBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(js(o))})},{accessorKey:"relation",header:"نسبت",size:20},{accessorKey:"editRelatedAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:o})=>e.jsx(Ie,{title:`ویرایش "${o.original.relatedFirstName} ${o.original.relatedLastName}"`,children:e.jsx(ie,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(Fs,{})})})},{accessorKey:"deleteRelatedAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:o})=>e.jsx(Ie,{title:`حذف "${o.original.relatedFirstName} ${o.original.relatedLastName}"`,children:e.jsx(ie,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(Vs,{})})})}],[]),d=Is({...Cs,columns:_,data:c,muiTableBodyRowProps:({row:o})=>({onClick:()=>f(()=>({[o.id]:!0})),selected:b[o.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(qe,{children:[s?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"info",onClick:F,children:e.jsx(vs,{fontSize:"small"})})})}),s?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد وابسته"}),children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"success",onClick:te,children:e.jsx(Js,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:o=>e.jsx(Ds,{...o,page:u(o.page),slots:{previous:Bs,next:Ss,first:_s,last:ks}})},getRowId:o=>o.id,onRowSelectionChange:f,state:{rowSelection:b}});return r.useEffect(()=>{const o=Object.keys(d.getState().rowSelection)[0];if(o){const h=Qs(c,o);g(o),x(h==null?void 0:h.pensionaryID)}},[d,b,c]),e.jsx(e.Fragment,{children:ne||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(qs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[V?e.jsx(as,{title:"ایجاد وابسته",closeModal:()=>P(!1),children:e.jsx(ea,{setShowCreateRelatedModal:P,refetch:m})}):$&&Z?e.jsx(as,{title:"ویرایش اطلاعات وابسته",closeModal:()=>H(!1),children:e.jsx(sa,{setShowEditRelatedModal:H,personID:Z,refetch:m})}):z?e.jsxs(as,{title:"حذف وابسته",closeModal:()=>S(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این وابسته اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(Zs,{}),onClick:X,loading:v,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"بله"})}),e.jsx(bs,{dir:"ltr",endIcon:e.jsx(Xs,{}),onClick:()=>S(!1),variant:"contained",color:"error",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"خیر"})})]})]}):null,e.jsx(Os,{table:d})]})})}const aa=Ks.injectEndpoints({endpoints:b=>({getHeirListByParentPersonID:b.query({query:f=>({url:`${gs}/GetHeirListByParentPersonID?parentPersonID=${f}`})}),getHeir:b.query({query:f=>({url:`${gs}/GetHeir?personID=${f}`})}),insertHeir:b.mutation({query:f=>({url:`${gs}/InsertHeir`,method:"POST",body:f})}),updateHeir:b.mutation({query:f=>({url:`${gs}/UpdateHeir`,method:"POST",body:f})}),updateHeirAccount:b.mutation({query:({token:f,data:c})=>({url:`${gs}/UpdateHeirAccount`,method:"POST",body:c,headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`}})}),removeHeir:b.mutation({query:({pensionaryID:f})=>({url:`${gs}/RemoveHeir?pensionaryID=${f}`,method:"POST"})})})}),{useGetHeirListByParentPersonIDQuery:la,useLazyGetHeirListByParentPersonIDQuery:Ia,useGetHeirQuery:ta,useRemoveHeirMutation:ra,useUpdateHeirMutation:oa,useInsertHeirMutation:ia}=aa;function ca({setShowEditHeirModal:b,personID:f,refetch:c}){const J=r.useRef(null),V=r.useRef(null),P=r.useRef(null),[$,H]=r.useState([]),[z,S]=r.useState([]),[Z,g]=r.useState(null),[Q,x]=r.useState(!1);r.useState(null);const[K,v]=r.useState(null),[G,ae]=r.useState(null),[a,A]=r.useState(!1),[E,ne]=r.useState(!1),{handleSubmit:s,formState:{errors:m},control:q,register:F,watch:te,setValue:oe}=ts(),n=te(),[X,{isLoading:_}]=oa(),d=ls(),o=new URLSearchParams(location.search).get("personID"),[h,{isLoading:Y,isFetching:l}]=zs(),{data:Ne,isSuccess:le,isLoading:ce,isFetching:we,refetch:Ce,error:pe}=Ys(f),{data:ye,isSuccess:Oe,isLoading:Te,isFetching:ve,error:re,refetch:ge}=ta(f);r.useEffect(()=>{if(Ce(),le){const B=Ne==null?void 0:Ne.itemList.map((j,Ye)=>({id:j.pensionaryID,isActive:j.pensionaryIsActive,pensionaryStatusRowNum:Ye+1,pensionaryStatusName:j.pensionaryStatusName||"-",pensionaryStartdate:be(j.pensionaryStartdate)||"-"}));S(B)}return()=>{S([])}},[Ce,le,Ne]),r.useEffect(()=>{ge(),Oe&&Object.keys(ye).forEach(B=>{oe(B,ye[B])})},[Oe,ye,ge,oe]),r.useEffect(()=>{var B;re&&re.status!=="FETCH_ERROR"&&se.error(((B=re==null?void 0:re.data)==null?void 0:B.message)||re.error,{autoClose:2e3})},[re]),r.useEffect(()=>{var B;pe&&(console.log(pe),se.error(((B=pe==null?void 0:pe.data)==null?void 0:B.message)||pe.error,{autoClose:2e3}))},[pe]);const{relationships:fe,relationshipIsLoading:De,relationshipIsFetching:Be}=Es(),{lookUpItems:Se,lookUpItemsIsLoading:xe,lookUpItemsIsFetching:Pe}=ee({lookUpType:"MaritialStatus"}),{lookUpItems:Fe,lookUpItemsIsLoading:Me,lookUpItemsIsFetching:Le}=ee({lookUpType:"Country"}),{lookUpItems:Re,lookUpItemsIsLoading:Ae,lookUpItemsIsFetching:w}=ee({lookUpType:"State"}),{lookUpItems:O,lookUpItemsIsLoading:D,lookUpItemsIsFetching:y}=ee({lookUpType:"City"}),{pensionaryStatus:je,pensionaryStatusIsLoading:$e,pensionaryStatusIsFetching:Ve}=Ps({pensionaryStatusCategory:"H"}),{lookUpItems:Qe,lookUpItemsIsLoading:Je,lookUpItemsIsFetching:Ze}=ee({lookUpType:"Bank"}),He=M(fe,"relationshipID","relationshipName"),ns=M(Se,"lookUpID","lookUpName"),W=M(Fe,"lookUpID","lookUpName"),N=M(Re,"lookUpID","lookUpName"),_e=M(O,"lookUpID","lookUpName"),ke=M(je,"pensionaryStatusID","pensionaryStatusName"),Xe=M(Qe,"lookUpID","lookUpName"),is=M($,"lookUpID","lookUpName"),Ge=r.useCallback(async B=>{try{const j=await h({lookUpType:"BankBranch",lookUpParentID:B}).unwrap();H(j.itemList)}catch(j){console.log(j)}},[h,H]);r.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]),r.useEffect(()=>{n.bankID&&Ge(n.bankID)},[n.bankID,Ge]);const cs=B=>{g(B),x(!1)},ps=B=>{ae(B),A(!1)},us=B=>{v(B),ne(!1)},ys=B=>{ne(B)},T=B=>{x(B)},I=B=>{A(B)};r.useEffect(()=>{g(be(n==null?void 0:n.personBirthDate))},[n==null?void 0:n.personBirthDate]),r.useEffect(()=>{ae(be(n==null?void 0:n.personBaseFinishDate))},[n==null?void 0:n.personBaseFinishDate]);const Ee=()=>{Ce()},ze=async()=>{var B;try{let j,Ye,es;Z?(j=new Date(Z),j.setMinutes(j.getMinutes()-j.getTimezoneOffset())):j=null,K?(Ye=new Date(K),Ye.setMinutes(Ye.getMinutes()-Ye.getTimezoneOffset())):Ye=null,G?(es=new Date(G),es.setMinutes(es.getMinutes()-es.getTimezoneOffset())):es=null;const ws=await X({...n,relationshipWithParentID:i(n==null?void 0:n.relationshipWithParentID),personNationalCode:i(n==null?void 0:n.personNationalCode),personCertificateNo:i(n==null?void 0:n.personCertificateNo),personBirthDate:j,maritalStatusID:i(n==null?void 0:n.maritalStatusID),personPhone:i(n==null?void 0:n.personPhone),personCellPhone:i(n==null?void 0:n.personCellPhone),personRegion:parseInt(i(n==null?void 0:n.personRegion))||null,personArea:parseInt(i(n==null?void 0:n.personArea))||null,personCountryID:i(n==null?void 0:n.personCountryID),personStateID:i(n==null?void 0:n.personStateID),personCityID:i(n==null?void 0:n.personCityID),personPostalCode:i(n==null?void 0:n.personPostalCode),pensionaryStatusID:i(n==null?void 0:n.pensionaryStatusID),personBaseFinishDate:es,bankID:i(n==null?void 0:n.bankID),bankBranchID:i(n==null?void 0:n.bankBranchID),accountNo:i(n==null?void 0:n.accountNo),insuranceCoef:parseFloat(i(n==null?void 0:n.insuranceCoef))||0,insuranceAmount:parseFloat(i(n==null?void 0:n.insuranceAmount))||0,ledgerCode:parseInt(i(n.ledgerCode))||0,parentPersonID:o,pensionaryStartDate:Ye}).unwrap();b(!1),c(),se.success(ws.message,{autoClose:2e3})}catch(j){console.log(j),se.error(((B=j==null?void 0:j.data)==null?void 0:B.message)||j.error,{auroClose:2e3})}};return Ns([J,V,P],[x,A,ne]),e.jsx(e.Fragment,{children:Te||ve?e.jsx(qe,{sx:{display:"flex",justifyContent:"center",padding:"2rem 10rem"},children:e.jsx(Ue,{color:"primary"})}):e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:s(ze),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"relationshipWithParentID",control:q,rules:{required:!0},render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:He,onChange:j=>B(j?j.value:null),value:He.find(j=>j.value===(n==null?void 0:n.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:De||Be})}),e.jsxs("label",{className:n!=null&&n.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),m.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personFirstName&&e.jsx("span",{className:"error-form",children:m.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFirstName)||"",name:"personFirstName",id:"personFirstName1",required:!0,...F("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personLastName&&e.jsx("span",{className:"error-form",children:m.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personLastName",value:(n==null?void 0:n.personLastName)||"",id:"personLastName1",required:!0,...F("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personNationalCode&&e.jsx("span",{className:"error-form",children:m.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personNationalCode)??"",name:"personNationalCode",id:"personNationalCode2",required:!0,...F("personNationalCode",{required:"کد ملی را وارد کنید",minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personCertificateNo&&e.jsx("span",{className:"error-form",children:m.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...F("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificatetNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personFatherName&&e.jsx("span",{className:"error-form",children:m.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...F("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:Z,onChange:cs,format:"jYYYY/jMM/jDD",onOpenChange:T,suffixIcon:e.jsx(de,{color:"action"}),open:Q,style:he,wrapperStyle:me,pickerProps:{ref:J}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personBirthPlace&&e.jsx("span",{className:"error-form",children:m.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personBirthPlace",value:(n==null?void 0:n.personBirthPlace)||"",id:"personBirthPlace1",required:!0,...F("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"maritalStatusID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:ns,onChange:j=>B(j?j.value:null),value:ns.find(j=>j.value===(n==null?void 0:n.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:xe||Pe})}),e.jsx("label",{className:n!=null&&n.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personPhone&&e.jsx("span",{className:"error-form",children:m.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...F("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personCellPhone&&e.jsx("span",{className:"error-form",children:m.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personCellPhone)||"",name:"personCellPhone",id:"personCellPhone222",required:!0,...F("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personArea&&e.jsx("span",{className:"error-form",children:m.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personArea)||"",name:"personArea",id:"personArea1",required:!0,...F("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personRegion&&e.jsx("span",{className:"error-form",children:m.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personRegion",value:u(n==null?void 0:n.personRegion)||"",id:"personRegion1",required:!0,...F("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCountryID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:W,onChange:j=>B(j?j.value:null),value:W.find(j=>j.value===(n==null?void 0:n.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Me||Le})}),e.jsx("label",{className:n!=null&&n.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personStateID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:N,onChange:j=>B(j?j.value:null),value:N.find(j=>j.value===(n==null?void 0:n.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Ae||w})}),e.jsx("label",{className:n!=null&&n.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCityID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:_e,onChange:j=>B(j?j.value:null),value:_e.find(j=>j.value===(n==null?void 0:n.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:D||y})}),e.jsx("label",{className:n!=null&&n.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personPostalCode&&e.jsx("span",{className:"error-form",children:m.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personPostalCode)||"",name:"personPostalCode",id:"personPostalCode1",required:!0,...F("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.personSpecialDisease&&e.jsx("span",{className:"error-form",children:m.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(n==null?void 0:n.personSpecialDisease)||"",name:"personSpecialDisease",id:"personSpecialDisease1",required:!0,...F("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[m.personAddress&&e.jsx("span",{className:"error-form",children:m.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...F("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[m.personDescription&&e.jsx("span",{className:"error-form",children:m.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...F("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"pensionaryStatusID",control:q,rules:{required:!0},render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:ke,onChange:j=>B(j?j.value:null),value:ke.find(j=>j.value===(n==null?void 0:n.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:$e||Ve})}),e.jsxs("label",{className:n!=null&&n.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),m.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:K,defaultValue:null,onChange:us,onOpenChange:ys,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:E,style:he,wrapperStyle:me,pickerProps:{ref:P}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:G,onChange:ps,format:"jYYYY/jMM/jDD",onOpenChange:I,suffixIcon:e.jsx(de,{color:"action"}),open:a,style:he,wrapperStyle:me,pickerProps:{ref:V}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:u(n==null?void 0:n.heirID)||"-",name:"heirID",id:"heirID",...F("heirID")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"heirID",children:"شماره وظیفه بگیری"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx("input",{type:"text",className:"inputBox__form--input",disabled:!0,value:u(js(n==null?void 0:n.pensionaryStartDate))||"-",name:"pensionaryStartDate",id:"pensionaryStartDate",...F("pensionaryStartDate")}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"pensionaryStartDate",children:"تاریخ وظیفه بگیری"})]})]}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h5",{className:"title-secondary",children:"تاریخچه وضعیت ها"})}),e.jsx(Hs,{statusHistoryTableData:z,isLoading:ce,isFetching:we,handleRefresh:Ee}),e.jsx("div",{className:"flex-col flex-center",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:Xe,onChange:j=>B(j?j.value:null),value:Xe.find(j=>j.value===(n==null?void 0:n.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Je||Ze})}),e.jsx("label",{htmlFor:"bankID",className:n!=null&&n.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankBranchID",control:q,render:({field:{onChange:B}})=>e.jsx(R,{closeMenuOnSelect:!0,components:d,options:is,onChange:j=>B(j?j.value:null),isDisabled:Y||l||!n.bankID,value:is.find(j=>j.value===(n==null?void 0:n.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Y||l})}),e.jsx("label",{htmlFor:"bankBranchID",className:n!=null&&n.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.accountNo&&e.jsx("span",{className:"error-form",children:m.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...F("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.ledgerCode&&e.jsx("span",{className:"error-form",children:m.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...F("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.insuranceCoef&&e.jsx("span",{className:"error-form",children:m.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.insuranceCoef)||"",name:"insuranceCoef",id:"insuranceCoefHeir",required:!0,...F("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[m.insuranceAmount&&e.jsx("span",{className:"error-form",children:m.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(n==null?void 0:n.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...F("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),onClick:s,type:"submit",loading:_,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})})})]})})})}function pa({setShowCreateHeirModal:b,refetch:f}){const c=r.useRef(null),J=r.useRef(null),V=r.useRef(null),[P,$]=r.useState(null),[H,z]=r.useState(!1),[S,Z]=r.useState(null),[g,Q]=r.useState(null),[x,K]=r.useState(!1),[v,G]=r.useState(!1),{handleSubmit:ae,formState:{errors:a},control:A,register:E,watch:ne}=ts(),s=ne(),[m,{isLoading:q}]=ia(),[F,te]=r.useState([]),oe=rs(),X=new URLSearchParams(oe.search).get("personID"),_=ls(),[d,{isLoading:t,isFetching:o}]=zs(),{relationships:h,relationshipIsLoading:Y,relationshipIsFetching:l}=Es(),{lookUpItems:Ne,lookUpItemsIsLoading:le,lookUpItemsIsFetching:ce}=ee({lookUpType:"MaritialStatus"}),{lookUpItems:we,lookUpItemsIsLoading:Ce,lookUpItemsIsFetching:pe}=ee({lookUpType:"Country"}),{lookUpItems:ye,lookUpItemsIsLoading:Oe,lookUpItemsIsFetching:Te}=ee({lookUpType:"State"}),{lookUpItems:ve,lookUpItemsIsLoading:re,lookUpItemsIsFetching:ge}=ee({lookUpType:"City"}),{pensionaryStatus:fe,pensionaryStatusIsLoading:De,pensionaryStatusIsFetching:Be}=Ps({pensionaryStatusCategory:"H"}),{lookUpItems:Se,lookUpItemsIsLoading:xe,lookUpItemsIsFetching:Pe}=ee({lookUpType:"Bank"}),Fe=M(h,"relationshipID","relationshipName"),Me=M(Ne,"lookUpID","lookUpName"),Le=M(we,"lookUpID","lookUpName"),Re=M(fe,"pensionaryStatusID","pensionaryStatusName"),Ae=M(ye,"lookUpID","lookUpName"),w=M(ve,"lookUpID","lookUpName"),O=M(Se,"lookUpID","lookUpName"),D=M(F,"lookUpID","lookUpName"),y=r.useCallback(async W=>{try{const N=await d({lookUpType:"BankBranch",lookUpParentID:i(W)}).unwrap();te(N.itemList)}catch(N){console.log(N)}},[d,te]);r.useEffect(()=>{s.bankID&&y(s.bankID)},[s.bankID,y]);const je=W=>{$(W),z(!1)},$e=W=>{Q(W),K(!1)},Ve=W=>{Z(W),G(!1)},Qe=W=>{G(W)},Je=W=>{z(W)},Ze=W=>{K(W)},He=async()=>{var W;try{let N,_e,ke;P?(N=new Date(P),N.setMinutes(N.getMinutes()-N.getTimezoneOffset())):N=null,S?(ke=new Date(S),ke.setMinutes(ke.getMinutes()-ke.getTimezoneOffset())):ke=null,g?(_e=new Date(g),_e.setMinutes(_e.getMinutes()-_e.getTimezoneOffset())):_e=null;const Xe=await m({...s,relationshipWithParentID:i(s==null?void 0:s.relationshipWithParentID),personNationalCode:i(s==null?void 0:s.personNationalCode),personCertificateNo:i(s==null?void 0:s.personCertificateNo),personBirthDate:N,maritalStatusID:i(s==null?void 0:s.maritalStatusID),personPhone:i(s==null?void 0:s.personPhone),personCellPhone:i(s==null?void 0:s.personCellPhone),personRegion:parseInt(i(s==null?void 0:s.personRegion))||null,personArea:parseInt(i(s==null?void 0:s.personArea))||null,personCountryID:i(s==null?void 0:s.personCountryID),personStateID:i(s==null?void 0:s.personStateID),personCityID:i(s==null?void 0:s.personCityID),personPostalCode:i(s==null?void 0:s.personPostalCode),pensionaryStatusID:i(s==null?void 0:s.pensionaryStatusID),personBaseFinishDate:_e,bankID:i(s==null?void 0:s.bankID),bankBranchID:i(s==null?void 0:s.bankBranchID),accountNo:i(s==null?void 0:s.accountNo),insuranceCoef:parseFloat(i(s==null?void 0:s.insuranceCoef))||0,insuranceAmount:parseFloat(i(s==null?void 0:s.insuranceAmount))||0,ledgerCode:parseInt(i(s.ledgerCode))||0,parentPersonID:X,pensionaryStartDate:ke}).unwrap();b(!1),f(),se.success(Xe.message,{autoClose:2e3})}catch(N){console.log(N),se.error(((W=N==null?void 0:N.data)==null?void 0:W.message)||N.error,{autoClose:2e3})}};return Ns([c,J],[z,K]),e.jsx("section",{className:"formContainer-transparent formContainer--width-lg flex-col",children:e.jsxs("form",{method:"POST",className:"flex-col",onSubmit:ae(He),noValidate:!0,children:[e.jsxs("div",{className:"grid grid--col-3",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"relationshipWithParentID",control:A,rules:{required:!0},render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:Fe,onChange:N=>W(N?N.value:null),value:Fe.find(N=>N.value===(s==null?void 0:s.relationshipWithParentID)),name:"relationshipWithParentID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," نسبت"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Y||l})}),e.jsxs("label",{className:s!=null&&s.relationshipWithParentID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," نسبت"]}),a.relationshipWithParentID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personFirstName&&e.jsx("span",{className:"error-form",children:a.personFirstName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personFirstName",value:(s==null?void 0:s.personFirstName)||"",id:"personFirstName1",required:!0,...E("personFirstName",{required:"نام اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personFirstName1",children:[e.jsx("span",{children:"*"})," نام"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personLastName&&e.jsx("span",{className:"error-form",children:a.personLastName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personLastName)||"",name:"personLastName",id:"personLastName1",required:!0,...E("personLastName",{required:"نام خانوادگی اجباری است",pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personLastName1",children:[e.jsx("span",{children:"*"})," نام خانوادگی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personNationalCode&&e.jsx("span",{className:"error-form",children:a.personNationalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personNationalCode",value:u(s==null?void 0:s.personNationalCode)||"",id:"personNationalCode2",required:!0,...E("personNationalCode",{required:"کد ملی را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:"کد ملی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"},maxLength:{value:10,message:"کد ملی باید ۱۰ رقم باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personNationalCode2",children:[e.jsx("span",{children:"*"})," کد ملی"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personCertificateNo&&e.jsx("span",{className:"error-form",children:a.personCertificateNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personCertificateNo)||"",name:"personCertificateNo",id:"personCertificateNo2",required:!0,...E("personCertificateNo",{required:"شماره شناسنامه را وارد کنید",pattern:{value:/^[۰-۹0-9]+$/,message:" شماره شناسنامه باید فقط شامل اعداد باشد"}})}),e.jsxs("label",{className:"inputBox__form--label",htmlFor:"personCertificateNo2",children:[e.jsx("span",{children:"*"})," شماره شناسنامه"]})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personFatherName&&e.jsx("span",{className:"error-form",children:a.personFatherName.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personFatherName)||"",name:"personFatherName",id:"personFatherName1",required:!0,...E("personFatherName",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personFatherName1",children:"نام پدر"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:P,onChange:je,format:"jYYYY/jMM/jDD",onOpenChange:Je,suffixIcon:e.jsx(de,{color:"action"}),open:H,style:he,wrapperStyle:me,pickerProps:{ref:c}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personBirthPlace&&e.jsx("span",{className:"error-form",children:a.personBirthPlace.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.personBirthPlace)||"",name:"personBirthPlace",id:"personBirthPlace1",required:!0,...E("personBirthPlace",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personBirthPlace1",children:"محل تولد"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"maritalStatusID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:Me,onChange:N=>W(N?N.value:null),value:Me.find(N=>N.value===(s==null?void 0:s.maritalStatusID)),name:"maritalStatusID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"وضعیت تاهل"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:le||ce})}),e.jsx("label",{className:s!=null&&s.maritalStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"وضعیت تاهل"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personPhone&&e.jsx("span",{className:"error-form",children:a.personPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personPhone)||"",name:"personPhone",id:"personPhone11",required:!0,...E("personPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPhone11",children:"تلفن ثابت"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personCellPhone&&e.jsx("span",{className:"error-form",children:a.personCellPhone.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personCellPhone",value:u(s==null?void 0:s.personCellPhone)||"",id:"personCellPhone222",required:!0,...E("personCellPhone",{pattern:{value:/^[۰-۹0-9]+$/,message:"تلفن باید فقط شامل اعداد باشد"},minLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"},maxLength:{value:11,message:"تلفن همراه باید ۱۱ رقم باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personCellPhone222",children:"تلفن همراه"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personArea&&e.jsx("span",{className:"error-form",children:a.personArea.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personArea),name:"personArea",id:"personArea1",required:!0,...E("personArea",{pattern:{value:/^[۰-۹0-9]+$/,message:"ناحیه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personArea1",children:"ناحیه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personRegion&&e.jsx("span",{className:"error-form",children:a.personRegion.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personRegion),name:"personRegion",id:"personRegion1",required:!0,...E("personRegion",{pattern:{value:/^[۰-۹0-9]+$/,message:"منطقه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personRegion1",children:"منطقه سکونت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCountryID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:Le,onChange:N=>W(N?N.value:null),value:Le.find(N=>N.value===(s==null?void 0:s.personCountryID)),name:"personCountryID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"کشور"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Ce||pe})}),e.jsx("label",{className:s!=null&&s.personCountryID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"کشور"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personStateID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:Ae,onChange:N=>W(N?N.value:null),value:Ae.find(N=>N.value===(s==null?void 0:s.personStateID)),name:"personStateID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"استان"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:Oe||Te})}),e.jsx("label",{className:s!=null&&s.personStateID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"استان"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"personCityID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:w,onChange:N=>W(N?N.value:null),value:w.find(N=>N.value===(s==null?void 0:s.personCityID)),name:"personCityID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شهر"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:re||ge})}),e.jsx("label",{className:s!=null&&s.personCityID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شهر"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personPostalCode&&e.jsx("span",{className:"error-form",children:a.personPostalCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personPostalCode",value:u(s==null?void 0:s.personPostalCode)||"",id:"personPostalCode1",required:!0,...E("personPostalCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"کد پستی باید فقط شامل اعداد باشد"},minLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"},maxLength:{value:10,message:"کد پستی باید ۱۰ رقمی باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personPostalCode1",children:"کد پستی"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.personSpecialDisease&&e.jsx("span",{className:"error-form",children:a.personSpecialDisease.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"personSpecialDisease",value:(s==null?void 0:s.personSpecialDisease)||"",id:"personSpecialDisease1",required:!0,...E("personSpecialDisease",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personSpecialDisease1",children:"بیماری خاص"})]}),e.jsxs("div",{className:"inputBox__form col-span-3",children:[a.personAddress&&e.jsx("span",{className:"error-form",children:a.personAddress.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personAddress)||"",name:"personAddress",id:"personAddress1",required:!0,...E("personAddress",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personAddress1",children:"نشانی"})]}),e.jsxs("div",{className:"inputBox__form col-span-3 row-span-2",children:[a.personDescription&&e.jsx("span",{className:"error-form",children:a.personDescription.message}),e.jsx("textarea",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.personDescription)||"",name:"personDescription",id:"personDescription",required:!0,...E("personDescription",{})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"personDescription",children:"توضیحات"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات وظیفه بگیری "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"pensionaryStatusID",control:A,rules:{required:!0},render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:Re,onChange:N=>W(N?N.value:null),value:Re.find(N=>N.value===(s==null?void 0:s.pensionaryStatusID)),name:"pensionaryStatusID",isClearable:!0,placeholder:e.jsxs("div",{className:"react-select-placeholder",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:De||Be})}),e.jsxs("label",{className:s!=null&&s.pensionaryStatusID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:[e.jsx("span",{children:"*"})," وضعیت موظف"]}),a.pensionaryStatusID&&e.jsx("span",{className:"error-form",children:" نسبت اجباری است"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:S,defaultValue:null,onChange:Ve,onOpenChange:Qe,format:"jYYYY/jMM/jDD",suffixIcon:e.jsx(de,{color:"action"}),open:v,style:he,wrapperStyle:me,pickerProps:{ref:V}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ تغییر وضعیت"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(ue.InputDatePicker,{value:g,onChange:$e,format:"jYYYY/jMM/jDD",onOpenChange:Ze,suffixIcon:e.jsx(de,{color:"action"}),open:x,style:he,wrapperStyle:me,pickerProps:{ref:J}}),e.jsx("div",{className:"inputBox__form--readOnly-label",children:"تاریخ مبنای قطع سهم"})]})]}),e.jsx("div",{className:"Modal__header u-margin-top-sm",children:e.jsx("h4",{className:"title-secondary",children:" اطلاعات بانکی وظیفه بگیر "})}),e.jsxs("div",{className:"grid grid--col-4",children:[e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:O,onChange:N=>W(N?N.value:null),value:O.find(N=>N.value===(s==null?void 0:s.bankID)),id:"bankID",name:"bankID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"بانک"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:xe||Pe})}),e.jsx("label",{htmlFor:"bankID",className:s!=null&&s.bankID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"بانک"})]}),e.jsxs("div",{className:"inputBox__form",children:[e.jsx(L,{name:"bankBranchID",control:A,render:({field:{onChange:W}})=>e.jsx(R,{closeMenuOnSelect:!0,components:_,options:D,onChange:N=>W(N?N.value:null),isDisabled:t||o||!s.bankID,value:D.find(N=>N.value===(s==null?void 0:s.bankBranchID))||null,id:"bankBranchID",name:"bankBranchID",isClearable:!0,placeholder:e.jsx("div",{className:"react-select-placeholder",children:"شعبه"}),noOptionsMessage:p.noOptionsMessage,loadingMessage:p.loadingMessage,styles:U,isLoading:t||o})}),e.jsx("label",{htmlFor:"bankBranchID",className:s!=null&&s.bankBranchID?"inputBox__form--readOnly-label":"inputBox__form--readOnly-label-hidden",children:"شعبه"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.accountNo&&e.jsx("span",{className:"error-form",children:a.accountNo.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.accountNo)||"",name:"accountNo",id:"accountNoHeir",required:!0,...E("accountNo",{pattern:{value:/^[۰-۹0-9]+$/,message:"شماره حساب باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"accountNoHeir",children:"شماره حساب"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.ledgerCode&&e.jsx("span",{className:"error-form",children:a.ledgerCode.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:u(s==null?void 0:s.ledgerCode)||"",name:"ledgerCode",id:"ledgerCodeHeir",required:!0,...E("ledgerCode",{pattern:{value:/^[۰-۹0-9]+$/,message:"ردیف ورثه باید فقط شامل اعداد باشد"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"ledgerCodeHeir",children:"ردیف ورثه"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.insuranceCoef&&e.jsx("span",{className:"error-form",children:a.insuranceCoef.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",name:"insuranceCoef",value:u(s==null?void 0:s.insuranceCoef)||"",id:"insuranceCoefHeir",required:!0,...E("insuranceCoef",{pattern:{value:/^[۰-۹0-9]+([.,][۰-۹0-9]+)?$/,message:"از اعداد یا اعشار استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceCoefHeir",children:"ضریب بیمه"})]}),e.jsxs("div",{className:"inputBox__form",children:[a.insuranceAmount&&e.jsx("span",{className:"error-form",children:a.insuranceAmount.message}),e.jsx("input",{type:"text",className:"inputBox__form--input",value:(s==null?void 0:s.insuranceAmount)||"",name:"insuranceAmount",id:"insuranceAmountHeir",required:!0,...E("insuranceAmount",{pattern:{value:/^[آ-ی\s]+$/,message:"از حروف فارسی استفاده کنید"}})}),e.jsx("label",{className:"inputBox__form--label",htmlFor:"insuranceAmountHeir",children:"بیمه تبعی"})]})]}),e.jsx("div",{style:{marginRight:"auto"},children:e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(os,{}),onClick:ae,type:"submit",loading:q,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"ذخیره"})})})]})})}function ua(){const[b,f]=r.useState({}),[c,J]=r.useState([]),[V,P]=r.useState(!1),[$,H]=r.useState(!1),[z,S]=r.useState(!1),[Z,g]=r.useState(""),[Q,x]=r.useState(""),K=rs(),G=new URLSearchParams(K.search).get("personID"),[ae,{isLoading:a}]=ra(),{data:A,isLoading:E,isSuccess:ne,isFetching:s,error:m,refetch:q}=la(G);r.useEffect(()=>{if(q(),ne){const o=A.itemList.map((h,Y)=>({id:h.personID,heirRowNum:Y+1,pensionaryID:h.pensionaryID,personNationalCode:h.personNationalCode,personFirstName:h.personFirstName,personLastName:h.personLastName,pensionaryIsUnderGauranteeText:h.pensionaryIsUnderGauranteeText,personBirthDate:h.personBirthDate,relationshipWithParentName:h.relationshipWithParentName,parentPersonNationalCode:h.parentPersonNationalCode}));J(o)}},[ne,A,q]),r.useEffect(()=>{var o;m&&(console.log(m),se.error(((o=m==null?void 0:m.data)==null?void 0:o.message)||m.error,{autoClose:2e3}))},[m]);const F=()=>{q()},te=()=>{H(!0)},oe=()=>{P(!0)},n=()=>{S(!0)},X=async()=>{var o;try{const h=await ae({pensionaryID:Q}).unwrap();S(!1),q(),se.success(h.message,{autoClose:2e3})}catch(h){console.log(h),se.error(((o=h==null?void 0:h.data)==null?void 0:o.message)||h.error,{autoClose:2e3})}},_=r.useMemo(()=>[{accessorKey:"heirRowNum",header:"ردیف",size:20,enableColumnActions:!1,enableSorting:!1,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(o)})},{accessorKey:"personNationalCode",header:"کد ملی",size:20,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(o)})},{accessorKey:"personFirstName",header:"نام",size:20},{accessorKey:"personLastName",header:"نام خانوادگی",size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:"وضعیت",size:20},{accessorKey:"personBirthDate",header:"تاریخ تولد",size:20,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(js(o))})},{accessorKey:"relationshipWithParentName",size:20,header:"نسبت"},{accessorKey:"parentPersonNationalCode",header:"شماره پرونده",size:20,Cell:({renderedCellValue:o})=>e.jsx("div",{children:u(o)})},{accessorKey:"editHeirAction",header:"ویرایش",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:o})=>e.jsx(Ie,{title:`ویرایش "${o.original.personFirstName} ${o.original.personLastName}"`,children:e.jsx(ie,{color:"success",onClick:oe,sx:{padding:"0"},children:e.jsx(Fs,{})})})},{accessorKey:"deleteHeirAction",header:"حذف",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:o})=>e.jsx(Ie,{title:`حذف "${o.original.personFirstName} ${o.original.personLastName}"`,children:e.jsx(ie,{color:"error",onClick:n,sx:{padding:"0"},children:e.jsx(Vs,{})})})}],[]),d=Is({...Cs,columns:_,data:c,muiTableBodyRowProps:({row:o})=>({onClick:()=>f(()=>({[o.id]:!0})),selected:b[o.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsxs(qe,{children:[s?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"info",onClick:F,children:e.jsx(vs,{fontSize:"small"})})})}),s?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:e.jsx("span",{style:{fontFamily:"sahel",fontSize:"0.8rem"},children:"ایجاد موظف"}),children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"success",onClick:te,children:e.jsx(Js,{fontSize:"small"})})})})]}),muiPaginationProps:{shape:"rounded",showRowsPerPage:!1,size:"small",renderItem:o=>e.jsx(Ds,{...o,page:u(o.page),slots:{previous:Bs,next:Ss,first:_s,last:ks}})},getRowId:o=>o.id,onRowSelectionChange:f,state:{rowSelection:b}});return r.useEffect(()=>{const o=Object.keys(d.getState().rowSelection)[0];if(o){const h=Qs(c,o);g(o),x(h==null?void 0:h.pensionaryID)}},[d,b,c]),e.jsx(e.Fragment,{children:E||s?e.jsx("div",{className:"skeleton-lg",children:e.jsx(qs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsxs(e.Fragment,{children:[V&&Z?e.jsx(as,{title:"ویرایش اطلاعات موظف",closeModal:()=>P(!1),children:e.jsx(ca,{setShowEditHeirModal:P,personID:Z,refetch:q})}):z?e.jsxs(as,{title:"حذف موظف",closeModal:()=>S(!1),children:[e.jsx("p",{className:"paragraph-primary",children:"آیا از حذف این موظف اطمینان دارید؟"}),e.jsxs("div",{className:"flex-row flex-center",children:[e.jsx(Ke,{dir:"ltr",endIcon:e.jsx(Zs,{}),onClick:X,loading:a,variant:"contained",color:"success",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"بله"})}),e.jsx(bs,{dir:"ltr",endIcon:e.jsx(Xs,{}),onClick:()=>S(!1),variant:"contained",color:"error",sx:{fontFamily:"sahel"},children:e.jsx("span",{children:"خیر"})})]})]}):$?e.jsx(as,{title:"ایجاد موظف",closeModal:()=>H(!1),children:e.jsx(pa,{setShowCreateHeirModal:H,refetch:q})}):null,e.jsx(Os,{table:d})]})})}function da(){const[b,f]=r.useState({}),[c,J]=r.useState([]),V=rs(),P=new URLSearchParams(V.search),$=P.get("Role"),H=P.get("personID"),{data:z,isSuccess:S,isLoading:Z,isFetching:g,error:Q,refetch:x}=fn({Role:$,personID:H});r.useEffect(()=>{if(x(),S){const a=z.itemList.map(A=>({id:A.requestID,type:A.requestTypeID,requestNO:A.requestNO||"-",personId:A.personID,requestTypeNameFa:A.requestTypeNameFa||"-",personName:A.personName||"-",date:A.requestDate||"-",body:A.requestText||"-"}));J(a),sessionStorage.setItem("requests",JSON.stringify(a))}},[z,S,x]),r.useEffect(()=>{var a;Q&&se.error(((a=Q==null?void 0:Q.data)==null?void 0:a.message)||Q.error,{autoClose:2e3})},[Q]);const K=()=>{x()},v=r.useMemo(()=>[{accessorKey:"id",header:"شماره درخواست",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:u(a)})},{accessorKey:"requestTypeNameFa",header:"نوع درخواست",size:20},{accessorKey:"personName",header:"ارسال کننده",size:20},{accessorKey:"date",header:"تاریخ درخواست",size:20,Cell:({renderedCellValue:a})=>e.jsx("div",{children:u(js(a))})},{accessorKey:"observeReq",header:"مشاهده درخواست",enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:a})=>e.jsx(Ie,{title:u(a.original.requestNO),children:e.jsx(bn,{to:`/retirement/request?requestID=${a.id}&Role=${$}&type=${a.original.type}`,children:e.jsx(ie,{color:"primary",sx:{padding:"0"},children:e.jsx(en,{})})})})}],[$]),G=Is({...Cs,columns:v,data:c,muiTableBodyRowProps:({row:a})=>({onClick:()=>f(()=>({[a.id]:!0})),selected:b[a.id],sx:{cursor:"pointer"}}),renderTopToolbarCustomActions:()=>e.jsx(qe,{children:g?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"info",onClick:K,children:e.jsx(vs,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:a=>e.jsx(Ds,{...a,page:u(a.page),slots:{previous:Bs,next:Ss,first:_s,last:ks}})},getRowId:a=>a.id,onRowSelectionChange:f,state:{rowSelection:b}});return e.jsx(e.Fragment,{children:Z?e.jsx("div",{className:"skeleton-lg",children:e.jsx(qs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Os,{table:G})})}function ma(){const[b,f]=r.useState({}),[c,J]=r.useState([]),[V,P]=r.useState(null),[$,H]=r.useState(!1),z=rs(),Z=new URLSearchParams(z.search).get("personID"),{data:g,isLoading:Q,isSuccess:x,isFetching:K,error:v,refetch:G}=wn({personID:Z,payType:"M"}),ae=()=>{G()};r.useEffect(()=>{if(x){const s=g.itemList.map((m,q)=>({id:m.payID,payRowNum:q+1,payCreditAmount:m.payCreditAmount,payDebitAmount:m.payDebitAmount,payAmount:m.payAmount,payDate:m.payDate,currentYear:m.currentYear,currentMonth:m.currentMonth}));J(s)}},[x,G,g]),r.useEffect(()=>{var s;v&&se.error(((s=v==null?void 0:v.data)==null?void 0:s.message)||v.error,{autoClose:2e3})},[v]);const a=()=>{H(!0)},A=r.useMemo(()=>[{accessorKey:"payRowNum",header:"ردیف",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:u(s)})},{accessorKey:"payCreditAmount",header:"مبلغ بستانکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[$s(u(s))," ","ریال"]})},{accessorKey:"payDebitAmount",header:"مبلغ بدهکاری",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[$s(u(s))," ","ریال"]})},{accessorKey:"payAmount",header:"مبلغ کل",size:20,Cell:({renderedCellValue:s})=>e.jsxs("div",{children:[$s(u(s))," ","ریال"]})},{accessorKey:"payDate",header:"تاریخ پرداخت",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:js(s)})},{accessorKey:"currentYear",header:"سال مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:u(s)})},{accessorKey:"currentMonth",header:"ماه مالی",size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:u(s)})},{accessorKey:"downloadRetiredSlip",header:"مشاهده/چاپ",enableSorting:!1,enableColumnActions:!1,size:20,Cell:()=>e.jsx(Ie,{title:"دانلود و مشاهده فیش",children:e.jsx(ie,{color:"primary",sx:{padding:"0"},onClick:a,children:e.jsx(en,{})})})}],[]),E=Is({...Cs,columns:A,data:c,renderTopToolbarCustomActions:()=>e.jsx(qe,{children:K?e.jsx(ie,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(Ue,{size:20,value:100})}):e.jsx(Ie,{title:"بروز رسانی",children:e.jsx("span",{children:e.jsx(ie,{"aria-label":"refresh",color:"info",onClick:ae,children:e.jsx(vs,{fontSize:"small"})})})})}),muiPaginationProps:{size:"small",shape:"rounded",showRowsPerPage:!1,renderItem:s=>e.jsx(Ds,{...s,page:u(s.page),slots:{previous:Bs,next:Ss,first:_s,last:ks}})},muiTableBodyRowProps:({row:s})=>({onClick:()=>f(()=>({[s.id]:!0})),selected:b[s.id],sx:{cursor:"pointer"}}),getRowId:s=>s.id,onRowSelectionChange:f,state:{rowSelection:b}});return r.useEffect(()=>{const s=Object.keys(E.getState().rowSelection)[0];P(s||null)},[E,b]),e.jsxs(e.Fragment,{children:[$&&V&&e.jsx(as,{closeModal:()=>H(!1),children:e.jsx($n,{payID:V})},V),Q?e.jsx("div",{className:"skeleton-lg",children:e.jsx(qs,{count:5,baseColor:"#dfdfdf",highlightColor:"#9f9f9f",duration:1,direction:"rtl"})}):e.jsx(Os,{table:E})]})}const Ca=()=>{const[b,f]=r.useState("1"),{personDeathDate:c}=In(P=>P.retiredState),J=(P,$)=>{f($)};return e.jsxs("section",{className:"flex-col",children:[e.jsx(Wn,{title:Cn}),e.jsxs("div",{"data-name":"retired-forms",children:[e.jsxs(Rs,{children:[e.jsx(Us,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Ts,{}),children:vn}),e.jsx(As,{children:e.jsx(Hn,{})})]}),e.jsxs(Rs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Us,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Ts,{}),children:Dn}),e.jsx(As,{children:e.jsx(Yn,{})})]}),e.jsxs(Rs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Us,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Ts,{}),children:Bn}),e.jsx(As,{children:e.jsx(zn,{})})]}),e.jsxs(Rs,{slotProps:{transition:{unmountOnExit:!0}},children:[e.jsx(Us,{id:"panel-header","aria-controls":"panel-content",expandIcon:e.jsx(Ts,{}),children:Sn}),e.jsx(As,{children:e.jsx(Gn,{})})]})]}),e.jsx("div",{"data-name":"retired-grids",children:e.jsxs(_n,{value:b,children:[e.jsx(qe,{sx:{bgcolor:"background.paper",borderRadius:1},children:e.jsxs(kn,{onChange:J,"aria-label":"tabs",variant:"fullWidth",children:[e.jsx(Ms,{label:c?On:Pn,value:"1"}),e.jsx(Ms,{label:Fn,value:"2"}),e.jsx(Ms,{label:Mn,value:"3"}),e.jsx(Ms,{label:Ln,value:"4"})]})}),e.jsx(Ls,{value:"1",sx:{padding:"0"},children:c?e.jsx(ua,{}):e.jsx(na,{})}),e.jsx(Ls,{value:"2",sx:{padding:"0"},children:e.jsx(Rn,{})}),e.jsx(Ls,{value:"3",sx:{padding:"0"},children:e.jsx(ma,{})}),e.jsx(Ls,{value:"4",sx:{padding:"0"},children:e.jsx(da,{})})]})})]})};export{Ca as default};
