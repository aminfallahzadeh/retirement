import{R as z,Q as A,M as E,P as S,aH as $,_ as K,j as e,f as v,ek as F,aw as j,T as l,L as R,fN as B,dP as D,I as t,B as G,C as N,fO as H,ex as k,r as d,D as M,A as _,dQ as U,G as O,ax as W,fP as Z,fQ as Q,i as ee}from"./index-75zhT6gl.js";import{c as se,d as ae}from"./relatedApi-CSQvOahS.js";import{D as w}from"./DeleteOutline-5zdRqkOy.js";import{E as q}from"./EditOutlined-kbuE11CK.js";import{A as J}from"./Add-DoX78MK5.js";import{R as V}from"./Refresh-DdMneeyp.js";import{c as re,d as oe}from"./heirApi-CjTDp5xb.js";const ne=(r,o)=>[{accessorKey:"relatedRowNo",header:z,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"personNationalCode",header:A,size:20},{accessorKey:"personFirstName",header:E,size:20},{accessorKey:"personLastName",header:S,size:20},{accessorKey:"pensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"personBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"relationshipWithParentName",header:F,size:20},{accessorKey:"updateRelated",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${B}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(q,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(w,{})})})}],te=(r,o,s,i)=>e.jsxs(G,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(V,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:k,children:e.jsx(R,{to:`${B}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(J,{fontSize:"small"})})})})]}),ie=()=>{const[r,o]=d.useState([]),[s,i]=M(!1),[g,h]=d.useState(""),[y]=_(),c=y.get("personID"),{data:p,isSuccess:m,isLoading:x,isFetching:u,refetch:f}=se(c),[C,{isLoading:I}]=ae();d.useEffect(()=>{if(m){const n=p.itemList.map((a,T)=>({id:a.personID,relatedRowNo:T+1,pensionaryID:a.pensionaryID,personBirthDate:a.personBirthDate,personNationalCode:a.personNationalCode,personFirstName:a.personFirstName,personLastName:a.personLastName,pensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,relationshipWithParentName:a.relationshipWithParentName}));o(n)}},[m,p]);const b=async()=>{const n=await C({pensionaryID:g}).unwrap();i(),f(),W.success(n.message)},P=ne(c,n=>{h(n),i()}),L=te(x,u,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(U,{open:s,onClose:i,isLoading:I,handleRemove:b}),e.jsx(O,{data:r,columns:P,scroll:!1,topBarActions:L,isLoading:x,isFetching:u})]})},le=(r,o)=>[{accessorKey:"heirRowNo",header:z,size:20,enableSorting:!1,enableColumnActions:!1},{accessorKey:"heirNationalCode",header:A,size:20},{accessorKey:"heirFirstName",header:E,size:20},{accessorKey:"heirLastName",header:S,size:20},{accessorKey:"heirPensionaryIsUnderGauranteeText",header:$,size:20},{accessorKey:"heirBirthDate",header:K,size:20,Cell:({renderedCellValue:s})=>e.jsx("div",{children:v(s)})},{accessorKey:"heirRelationshipWithParentName",header:F,size:20},{accessorKey:"heirParentPersonNationalCode",header:Z,size:20},{accessorKey:"updateHeir",header:j,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${j} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(R,{to:`${Q}?mode=update&id=${r}&personID=${s.original.id}`,children:e.jsx(q,{color:"success"})})})},{accessorKey:"deleteRelated",header:D,enableSorting:!1,enableColumnActions:!1,size:20,Cell:({row:s})=>e.jsx(l,{title:`${D} "${s.original.personFirstName} ${s.original.personLastName}"`,children:e.jsx(t,{color:"error",onClick:()=>o(s.original.pensionaryID),sx:{padding:"0"},children:e.jsx(w,{})})})}],ce=(r,o,s,i)=>e.jsxs(G,{children:[o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:H,children:e.jsx("span",{children:e.jsx(t,{"aria-label":"refresh",color:"info",onClick:s,children:e.jsx(V,{fontSize:"small"})})})}),o||r?e.jsx(t,{"aria-label":"refresh",color:"info",disabled:!0,children:e.jsx(N,{size:20,value:100})}):e.jsx(l,{title:k,children:e.jsx(R,{to:`${Q}?mode=create&id=${i}`,children:e.jsx(t,{"aria-label":"refresh",color:"success",children:e.jsx(J,{fontSize:"small"})})})})]}),de=()=>{const[r,o]=d.useState(""),[s,i]=d.useState([]),[g,h]=M(!1),[y]=_(),c=y.get("personID"),{data:p,isLoading:m,isSuccess:x,isFetching:u,refetch:f}=re(c),[C,{isLoading:I}]=oe();d.useEffect(()=>{if(x){const n=p.itemList.map((a,T)=>({id:a.personID,heirRowNo:T+1,pensionaryID:a.pensionaryID,heirNationalCode:a.personNationalCode,heirFirstName:a.personFirstName,heirLastName:a.personLastName,heirPensionaryIsUnderGauranteeText:a.pensionaryIsUnderGauranteeText,heirBirthDate:a.personBirthDate,heirRelationshipWithParentName:a.relationshipWithParentName,heirParentPersonNationalCode:a.parentPersonNationalCode}));i(n)}},[x,p]);const b=async()=>{const n=await C({pensionaryID:r}).unwrap();f(),h(),W.success(n.message)},P=le(c,n=>{o(n),h()}),L=ce(m,u,f,c);return e.jsxs(e.Fragment,{children:[e.jsx(U,{open:g,onClose:h,isLoading:I,handleRemove:b}),e.jsx(O,{data:s,columns:P,scroll:!1,topBarActions:L,isLoading:m,isFetching:u})]})},De=()=>{const{personDeathDate:r}=ee(o=>o.person);return r?e.jsx(de,{}):e.jsx(ie,{})};export{De as default};
